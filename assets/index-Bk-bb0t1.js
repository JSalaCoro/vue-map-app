var Em=Object.defineProperty;var vm=(e,t,i)=>t in e?Em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ut=(e,t,i)=>vm(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function El(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const St={},vn=[],Ze=()=>{},wm=()=>!1,po=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),vl=e=>e.startsWith("onUpdate:"),Jt=Object.assign,wl=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Tm=Object.prototype.hasOwnProperty,yt=(e,t)=>Tm.call(e,t),nt=Array.isArray,ds=e=>yo(e)==="[object Map]",Rm=e=>yo(e)==="[object Set]",it=e=>typeof e=="function",Bt=e=>typeof e=="string",Bn=e=>typeof e=="symbol",kt=e=>e!==null&&typeof e=="object",Mf=e=>(kt(e)||it(e))&&it(e.then)&&it(e.catch),Cm=Object.prototype.toString,yo=e=>Cm.call(e),Mm=e=>yo(e).slice(8,-1),Sm=e=>yo(e)==="[object Object]",Tl=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=El(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xo=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Am=/-(\w)/g,Me=xo(e=>e.replace(Am,(t,i)=>i?i.toUpperCase():"")),Im=/\B([A-Z])/g,nn=xo(e=>e.replace(Im,"-$1").toLowerCase()),bo=xo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zo=xo(e=>e?`on${bo(e)}`:""),Ri=(e,t)=>!Object.is(e,t),qo=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Sf=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},Pm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Wc;const Eo=()=>Wc||(Wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rl(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=Bt(n)?km(n):Rl(n);if(s)for(const r in s)t[r]=s[r]}return t}else if(Bt(e)||kt(e))return e}const Lm=/;(?![^(]*\))/g,Om=/:([^]+)/,Dm=/\/\*[^]*?\*\//g;function km(e){const t={};return e.replace(Dm,"").split(Lm).forEach(i=>{if(i){const n=i.split(Om);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Cl(e){let t="";if(Bt(e))t=e;else if(nt(e))for(let i=0;i<e.length;i++){const n=Cl(e[i]);n&&(t+=n+" ")}else if(kt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Fm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Nm=El(Fm);function Af(e){return!!e||e===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _e;class zm{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_e,!t&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=_e;try{return _e=this,t()}finally{_e=i}}}on(){_e=this}off(){_e=this.parent}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Bm(){return _e}let Mt;const Jo=new WeakSet;class If{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_e&&_e.active&&_e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jo.has(this)&&(Jo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Lf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Uc(this),Of(this);const t=Mt,i=Fe;Mt=this,Fe=!0;try{return this.fn()}finally{Df(this),Mt=t,Fe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Al(t);this.deps=this.depsTail=void 0,Uc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Na(this)&&this.run()}get dirty(){return Na(this)}}let Pf=0,ms,_s;function Lf(e,t=!1){if(e.flags|=8,t){e.next=_s,_s=e;return}e.next=ms,ms=e}function Ml(){Pf++}function Sl(){if(--Pf>0)return;if(_s){let t=_s;for(_s=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;ms;){let t=ms;for(ms=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function Of(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Df(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Al(n),jm(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function Na(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(kf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function kf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs))return;e.globalVersion=Cs;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Na(e)){e.flags&=-3;return}const i=Mt,n=Fe;Mt=e,Fe=!0;try{Of(e);const s=e.fn(e._value);(t.version===0||Ri(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Mt=i,Fe=n,Df(e),e.flags&=-3}}function Al(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Al(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function jm(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Fe=!0;const Ff=[];function Li(){Ff.push(Fe),Fe=!1}function Oi(){const e=Ff.pop();Fe=e===void 0?!0:e}function Uc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Mt;Mt=void 0;try{t()}finally{Mt=i}}}let Cs=0;class Wm{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Il{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Mt||!Fe||Mt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Mt)i=this.activeLink=new Wm(Mt,this),Mt.deps?(i.prevDep=Mt.depsTail,Mt.depsTail.nextDep=i,Mt.depsTail=i):Mt.deps=Mt.depsTail=i,Nf(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=Mt.depsTail,i.nextDep=void 0,Mt.depsTail.nextDep=i,Mt.depsTail=i,Mt.deps===i&&(Mt.deps=n)}return i}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){Ml();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Sl()}}}function Nf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Nf(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const za=new WeakMap,Zi=Symbol(""),Ba=Symbol(""),Ms=Symbol("");function Gt(e,t,i){if(Fe&&Mt){let n=za.get(e);n||za.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new Il),s.map=n,s.key=i),s.track()}}function ai(e,t,i,n,s,r){const o=za.get(e);if(!o){Cs++;return}const a=l=>{l&&l.trigger()};if(Ml(),t==="clear")o.forEach(a);else{const l=nt(e),c=l&&Tl(i);if(l&&i==="length"){const h=Number(n);o.forEach((u,f)=>{(f==="length"||f===Ms||!Bn(f)&&f>=h)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(Ms)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Zi)),ds(e)&&a(o.get(Ba)));break;case"delete":l||(a(o.get(Zi)),ds(e)&&a(o.get(Ba)));break;case"set":ds(e)&&a(o.get(Zi));break}}Sl()}function rn(e){const t=ft(e);return t===e?t:(Gt(t,"iterate",Ms),Ne(e)?t:t.map(te))}function Pl(e){return Gt(e=ft(e),"iterate",Ms),e}const Um={__proto__:null,[Symbol.iterator](){return Qo(this,Symbol.iterator,te)},concat(...e){return rn(this).concat(...e.map(t=>nt(t)?rn(t):t))},entries(){return Qo(this,"entries",e=>(e[1]=te(e[1]),e))},every(e,t){return Je(this,"every",e,t,void 0,arguments)},filter(e,t){return Je(this,"filter",e,t,i=>i.map(te),arguments)},find(e,t){return Je(this,"find",e,t,te,arguments)},findIndex(e,t){return Je(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Je(this,"findLast",e,t,te,arguments)},findLastIndex(e,t){return Je(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Je(this,"forEach",e,t,void 0,arguments)},includes(...e){return ta(this,"includes",e)},indexOf(...e){return ta(this,"indexOf",e)},join(e){return rn(this).join(e)},lastIndexOf(...e){return ta(this,"lastIndexOf",e)},map(e,t){return Je(this,"map",e,t,void 0,arguments)},pop(){return Gn(this,"pop")},push(...e){return Gn(this,"push",e)},reduce(e,...t){return Vc(this,"reduce",e,t)},reduceRight(e,...t){return Vc(this,"reduceRight",e,t)},shift(){return Gn(this,"shift")},some(e,t){return Je(this,"some",e,t,void 0,arguments)},splice(...e){return Gn(this,"splice",e)},toReversed(){return rn(this).toReversed()},toSorted(e){return rn(this).toSorted(e)},toSpliced(...e){return rn(this).toSpliced(...e)},unshift(...e){return Gn(this,"unshift",e)},values(){return Qo(this,"values",te)}};function Qo(e,t,i){const n=Pl(e),s=n[t]();return n!==e&&!Ne(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const Vm=Array.prototype;function Je(e,t,i,n,s,r){const o=Pl(e),a=o!==e&&!Ne(e),l=o[t];if(l!==Vm[t]){const u=l.apply(e,r);return a?te(u):u}let c=i;o!==e&&(a?c=function(u,f){return i.call(this,te(u),f,e)}:i.length>2&&(c=function(u,f){return i.call(this,u,f,e)}));const h=l.call(o,c,n);return a&&s?s(h):h}function Vc(e,t,i,n){const s=Pl(e);let r=i;return s!==e&&(Ne(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,te(a),l,e)}),s[t](r,...n)}function ta(e,t,i){const n=ft(e);Gt(n,"iterate",Ms);const s=n[t](...i);return(s===-1||s===!1)&&Gs(i[0])?(i[0]=ft(i[0]),n[t](...i)):s}function Gn(e,t,i=[]){Li(),Ml();const n=ft(e)[t].apply(e,i);return Sl(),Oi(),n}const Hm=El("__proto__,__v_isRef,__isVue"),zf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Bn));function Xm(e){Bn(e)||(e=String(e));const t=ft(this);return Gt(t,"has",e),t.hasOwnProperty(e)}class Bf{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?e_:Vf:r?Uf:Wf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=nt(t);if(!s){let l;if(o&&(l=Um[i]))return l;if(i==="hasOwnProperty")return Xm}const a=Reflect.get(t,i,Zt(t)?t:n);return(Bn(i)?zf.has(i):Hm(i))||(s||Gt(t,"get",i),r)?a:Zt(a)?o&&Tl(i)?a:a.value:kt(a)?s?Hf(a):Ol(a):a}}class jf extends Bf{constructor(t=!1){super(!1,t)}set(t,i,n,s){let r=t[i];if(!this._isShallow){const l=Qi(r);if(!Ne(n)&&!Qi(n)&&(r=ft(r),n=ft(n)),!nt(t)&&Zt(r)&&!Zt(n))return l?!1:(r.value=n,!0)}const o=nt(t)&&Tl(i)?Number(i)<t.length:yt(t,i),a=Reflect.set(t,i,n,Zt(t)?t:s);return t===ft(s)&&(o?Ri(n,r)&&ai(t,"set",i,n):ai(t,"add",i,n)),a}deleteProperty(t,i){const n=yt(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&ai(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Bn(i)||!zf.has(i))&&Gt(t,"has",i),n}ownKeys(t){return Gt(t,"iterate",nt(t)?"length":Zi),Reflect.ownKeys(t)}}class Gm extends Bf{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Ym=new jf,Km=new Gm,$m=new jf(!0);const ja=e=>e,rr=e=>Reflect.getPrototypeOf(e);function Zm(e,t,i){return function(...n){const s=this.__v_raw,r=ft(s),o=ds(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...n),h=i?ja:t?Wa:te;return!t&&Gt(r,"iterate",l?Ba:Zi),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:a?[h(u[0]),h(u[1])]:h(u),done:f}},[Symbol.iterator](){return this}}}}function or(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qm(e,t){const i={get(s){const r=this.__v_raw,o=ft(r),a=ft(s);e||(Ri(s,a)&&Gt(o,"get",s),Gt(o,"get",a));const{has:l}=rr(o),c=t?ja:e?Wa:te;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Gt(ft(s),"iterate",Zi),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=ft(r),a=ft(s);return e||(Ri(s,a)&&Gt(o,"has",s),Gt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=ft(a),c=t?ja:e?Wa:te;return!e&&Gt(l,"iterate",Zi),a.forEach((h,u)=>s.call(r,c(h),c(u),o))}};return Jt(i,e?{add:or("add"),set:or("set"),delete:or("delete"),clear:or("clear")}:{add(s){!t&&!Ne(s)&&!Qi(s)&&(s=ft(s));const r=ft(this);return rr(r).has.call(r,s)||(r.add(s),ai(r,"add",s,s)),this},set(s,r){!t&&!Ne(r)&&!Qi(r)&&(r=ft(r));const o=ft(this),{has:a,get:l}=rr(o);let c=a.call(o,s);c||(s=ft(s),c=a.call(o,s));const h=l.call(o,s);return o.set(s,r),c?Ri(r,h)&&ai(o,"set",s,r):ai(o,"add",s,r),this},delete(s){const r=ft(this),{has:o,get:a}=rr(r);let l=o.call(r,s);l||(s=ft(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&ai(r,"delete",s,void 0),c},clear(){const s=ft(this),r=s.size!==0,o=s.clear();return r&&ai(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=Zm(s,e,t)}),i}function Ll(e,t){const i=qm(e,t);return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(yt(i,s)&&s in n?i:n,s,r)}const Jm={get:Ll(!1,!1)},Qm={get:Ll(!1,!0)},t_={get:Ll(!0,!1)};const Wf=new WeakMap,Uf=new WeakMap,Vf=new WeakMap,e_=new WeakMap;function i_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function n_(e){return e.__v_skip||!Object.isExtensible(e)?0:i_(Mm(e))}function Ol(e){return Qi(e)?e:Dl(e,!1,Ym,Jm,Wf)}function s_(e){return Dl(e,!1,$m,Qm,Uf)}function Hf(e){return Dl(e,!0,Km,t_,Vf)}function Dl(e,t,i,n,s){if(!kt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=n_(e);if(o===0)return e;const a=new Proxy(e,o===2?n:i);return s.set(e,a),a}function ps(e){return Qi(e)?ps(e.__v_raw):!!(e&&e.__v_isReactive)}function Qi(e){return!!(e&&e.__v_isReadonly)}function Ne(e){return!!(e&&e.__v_isShallow)}function Gs(e){return e?!!e.__v_raw:!1}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function r_(e){return!yt(e,"__v_skip")&&Object.isExtensible(e)&&Sf(e,"__v_skip",!0),e}const te=e=>kt(e)?Ol(e):e,Wa=e=>kt(e)?Hf(e):e;function Zt(e){return e?e.__v_isRef===!0:!1}function o_(e){return Gf(e,!1)}function Xf(e){return Gf(e,!0)}function Gf(e,t){return Zt(e)?e:new a_(e,t)}class a_{constructor(t,i){this.dep=new Il,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:ft(t),this._value=i?t:te(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||Ne(t)||Qi(t);t=n?t:ft(t),Ri(t,i)&&(this._rawValue=t,this._value=n?t:te(t),this.dep.trigger())}}function l_(e){return Zt(e)?e.value:e}const c_={get:(e,t,i)=>t==="__v_raw"?e:l_(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Zt(s)&&!Zt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Yf(e){return ps(e)?e:new Proxy(e,c_)}class h_{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Il(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Mt!==this)return Lf(this,!0),!0}get value(){const t=this.dep.track();return kf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function u_(e,t,i=!1){let n,s;return it(e)?n=e:(n=e.get,s=e.set),new h_(n,s,i)}const ar={},Ur=new WeakMap;let Hi;function f_(e,t=!1,i=Hi){if(i){let n=Ur.get(i);n||Ur.set(i,n=[]),n.push(e)}}function d_(e,t,i=St){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,c=b=>s?b:Ne(b)||s===!1||s===0?vi(b,1):vi(b);let h,u,f,d,g=!1,m=!1;if(Zt(e)?(u=()=>e.value,g=Ne(e)):ps(e)?(u=()=>c(e),g=!0):nt(e)?(m=!0,g=e.some(b=>ps(b)||Ne(b)),u=()=>e.map(b=>{if(Zt(b))return b.value;if(ps(b))return c(b);if(it(b))return l?l(b,2):b()})):it(e)?t?u=l?()=>l(e,2):e:u=()=>{if(f){Li();try{f()}finally{Oi()}}const b=Hi;Hi=h;try{return l?l(e,3,[d]):e(d)}finally{Hi=b}}:u=Ze,t&&s){const b=u,v=s===!0?1/0:s;u=()=>vi(b(),v)}const _=Bm(),p=()=>{h.stop(),_&&_.active&&wl(_.effects,h)};if(r&&t){const b=t;t=(...v)=>{b(...v),p()}}let x=m?new Array(e.length).fill(ar):ar;const w=b=>{if(!(!(h.flags&1)||!h.dirty&&!b))if(t){const v=h.run();if(s||g||(m?v.some((M,P)=>Ri(M,x[P])):Ri(v,x))){f&&f();const M=Hi;Hi=h;try{const P=[v,x===ar?void 0:m&&x[0]===ar?[]:x,d];l?l(t,3,P):t(...P),x=v}finally{Hi=M}}}else h.run()};return a&&a(w),h=new If(u),h.scheduler=o?()=>o(w,!1):w,d=b=>f_(b,!1,h),f=h.onStop=()=>{const b=Ur.get(h);if(b){if(l)l(b,4);else for(const v of b)v();Ur.delete(h)}},t?n?w(!0):x=h.run():o?o(w.bind(null,!0),!0):h.run(),p.pause=h.pause.bind(h),p.resume=h.resume.bind(h),p.stop=p,p}function vi(e,t=1/0,i){if(t<=0||!kt(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Zt(e))vi(e.value,t,i);else if(nt(e))for(let n=0;n<e.length;n++)vi(e[n],t,i);else if(Rm(e)||ds(e))e.forEach(n=>{vi(n,t,i)});else if(Sm(e)){for(const n in e)vi(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&vi(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ys(e,t,i,n){try{return n?e(...n):e()}catch(s){vo(s,t,i)}}function qe(e,t,i,n){if(it(e)){const s=Ys(e,t,i,n);return s&&Mf(s)&&s.catch(r=>{vo(r,t,i)}),s}if(nt(e)){const s=[];for(let r=0;r<e.length;r++)s.push(qe(e[r],t,i,n));return s}}function vo(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||St;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,l,c)===!1)return}a=a.parent}if(r){Li(),Ys(r,null,10,[e,l,c]),Oi();return}}g_(e,i,s,n,o)}function g_(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const ee=[];let Xe=-1;const wn=[];let xi=null,_n=0;const Kf=Promise.resolve();let Vr=null;function $f(e){const t=Vr||Kf;return e?t.then(this?e.bind(this):e):t}function m_(e){let t=Xe+1,i=ee.length;for(;t<i;){const n=t+i>>>1,s=ee[n],r=Ss(s);r<e||r===e&&s.flags&2?t=n+1:i=n}return t}function kl(e){if(!(e.flags&1)){const t=Ss(e),i=ee[ee.length-1];!i||!(e.flags&2)&&t>=Ss(i)?ee.push(e):ee.splice(m_(t),0,e),e.flags|=1,Zf()}}function Zf(){Vr||(Vr=Kf.then(Jf))}function __(e){nt(e)?wn.push(...e):xi&&e.id===-1?xi.splice(_n+1,0,e):e.flags&1||(wn.push(e),e.flags|=1),Zf()}function Hc(e,t,i=Xe+1){for(;i<ee.length;i++){const n=ee[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ee.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function qf(e){if(wn.length){const t=[...new Set(wn)].sort((i,n)=>Ss(i)-Ss(n));if(wn.length=0,xi){xi.push(...t);return}for(xi=t,_n=0;_n<xi.length;_n++){const i=xi[_n];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}xi=null,_n=0}}const Ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jf(e){try{for(Xe=0;Xe<ee.length;Xe++){const t=ee[Xe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ys(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xe<ee.length;Xe++){const t=ee[Xe];t&&(t.flags&=-2)}Xe=-1,ee.length=0,qf(),Vr=null,(ee.length||wn.length)&&Jf()}}let Le=null,Qf=null;function Hr(e){const t=Le;return Le=e,Qf=e&&e.type.__scopeId||null,t}function p_(e,t=Le,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&th(-1);const r=Hr(t);let o;try{o=e(...s)}finally{Hr(r),n._d&&th(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Fi(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Li(),qe(l,i,8,[e.el,a,e,t]),Oi())}}const y_=Symbol("_vte"),x_=e=>e.__isTeleport;function Fl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Fl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function td(e,t){return it(e)?Jt({name:e.name},t,{setup:e}):e}function ed(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Xr(e,t,i,n,s=!1){if(nt(e)){e.forEach((g,m)=>Xr(g,t&&(nt(t)?t[m]:t),i,n,s));return}if(ys(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Xr(e,t,i,n.component.subTree);return}const r=n.shapeFlag&4?Wl(n.component):n.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,h=a.refs===St?a.refs={}:a.refs,u=a.setupState,f=ft(u),d=u===St?()=>!1:g=>yt(f,g);if(c!=null&&c!==l&&(Bt(c)?(h[c]=null,d(c)&&(u[c]=null)):Zt(c)&&(c.value=null)),it(l))Ys(l,a,12,[o,h]);else{const g=Bt(l),m=Zt(l);if(g||m){const _=()=>{if(e.f){const p=g?d(l)?u[l]:h[l]:l.value;s?nt(p)&&wl(p,r):nt(p)?p.includes(r)||p.push(r):g?(h[l]=[r],d(l)&&(u[l]=h[l])):(l.value=[r],e.k&&(h[e.k]=l.value))}else g?(h[l]=o,d(l)&&(u[l]=o)):m&&(l.value=o,e.k&&(h[e.k]=o))};o?(_.id=-1,me(_,i)):_()}}}Eo().requestIdleCallback;Eo().cancelIdleCallback;const ys=e=>!!e.type.__asyncLoader,id=e=>e.type.__isKeepAlive;function b_(e,t){nd(e,"a",t)}function E_(e,t){nd(e,"da",t)}function nd(e,t,i=Kt){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(wo(t,n,i),i){let s=i.parent;for(;s&&s.parent;)id(s.parent.vnode)&&v_(n,t,i,s),s=s.parent}}function v_(e,t,i,n){const s=wo(t,e,n,!0);Nl(()=>{wl(n[t],s)},i)}function wo(e,t,i=Kt,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Li();const a=Ks(i),l=qe(t,i,e,o);return a(),Oi(),l});return n?s.unshift(r):s.push(r),r}}const hi=e=>(t,i=Kt)=>{(!Ps||e==="sp")&&wo(e,(...n)=>t(...n),i)},w_=hi("bm"),sd=hi("m"),T_=hi("bu"),R_=hi("u"),C_=hi("bum"),Nl=hi("um"),M_=hi("sp"),S_=hi("rtg"),A_=hi("rtc");function I_(e,t=Kt){wo("ec",e,t)}const P_="components";function Ua(e,t){return O_(P_,e,!0,t)||e}const L_=Symbol.for("v-ndc");function O_(e,t,i=!0,n=!1){const s=Le||Kt;if(s){const r=s.type;{const a=Ep(r,!1);if(a&&(a===t||a===Me(t)||a===bo(Me(t))))return r}const o=Xc(s[e]||r[e],t)||Xc(s.appContext[e],t);return!o&&n?r:o}}function Xc(e,t){return e&&(e[t]||e[Me(t)]||e[bo(Me(t))])}const Va=e=>e?Cd(e)?Wl(e):Va(e.parent):null,xs=Jt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Va(e.parent),$root:e=>Va(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>od(e),$forceUpdate:e=>e.f||(e.f=()=>{kl(e.update)}),$nextTick:e=>e.n||(e.n=$f.bind(e.proxy)),$watch:e=>ep.bind(e)}),ea=(e,t)=>e!==St&&!e.__isScriptSetup&&yt(e,t),D_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(ea(n,t))return o[t]=1,n[t];if(s!==St&&yt(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&yt(c,t))return o[t]=3,r[t];if(i!==St&&yt(i,t))return o[t]=4,i[t];Ha&&(o[t]=0)}}const h=xs[t];let u,f;if(h)return t==="$attrs"&&Gt(e.attrs,"get",""),h(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(i!==St&&yt(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,yt(f,t))return f[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return ea(s,t)?(s[t]=i,!0):n!==St&&yt(n,t)?(n[t]=i,!0):yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||e!==St&&yt(e,o)||ea(t,o)||(a=r[0])&&yt(a,o)||yt(n,o)||yt(xs,o)||yt(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:yt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Gc(e){return nt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Ha=!0;function k_(e){const t=od(e),i=e.proxy,n=e.ctx;Ha=!1,t.beforeCreate&&Yc(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:x,destroyed:w,unmounted:b,render:v,renderTracked:M,renderTriggered:P,errorCaptured:R,serverPrefetch:L,expose:S,inheritAttrs:B,components:F,directives:H,filters:J}=t;if(c&&F_(c,n,null),o)for(const j in o){const Y=o[j];it(Y)&&(n[j]=Y.bind(i))}if(s){const j=s.call(i,i);kt(j)&&(e.data=Ol(j))}if(Ha=!0,r)for(const j in r){const Y=r[j],rt=it(Y)?Y.bind(i,i):it(Y.get)?Y.get.bind(i,i):Ze,Z=!it(Y)&&it(Y.set)?Y.set.bind(i):Ze,q=wp({get:rt,set:Z});Object.defineProperty(n,j,{enumerable:!0,configurable:!0,get:()=>q.value,set:st=>q.value=st})}if(a)for(const j in a)rd(a[j],n,i,j);if(l){const j=it(l)?l.call(i):l;Reflect.ownKeys(j).forEach(Y=>{U_(Y,j[Y])})}h&&Yc(h,e,"c");function X(j,Y){nt(Y)?Y.forEach(rt=>j(rt.bind(i))):Y&&j(Y.bind(i))}if(X(w_,u),X(sd,f),X(T_,d),X(R_,g),X(b_,m),X(E_,_),X(I_,R),X(A_,M),X(S_,P),X(C_,x),X(Nl,b),X(M_,L),nt(S))if(S.length){const j=e.exposed||(e.exposed={});S.forEach(Y=>{Object.defineProperty(j,Y,{get:()=>i[Y],set:rt=>i[Y]=rt})})}else e.exposed||(e.exposed={});v&&e.render===Ze&&(e.render=v),B!=null&&(e.inheritAttrs=B),F&&(e.components=F),H&&(e.directives=H),L&&ed(e)}function F_(e,t,i=Ze){nt(e)&&(e=Xa(e));for(const n in e){const s=e[n];let r;kt(s)?"default"in s?r=Lr(s.from||n,s.default,!0):r=Lr(s.from||n):r=Lr(s),Zt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function Yc(e,t,i){qe(nt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function rd(e,t,i,n){let s=n.includes(".")?bd(i,n):()=>i[n];if(Bt(e)){const r=t[e];it(r)&&Or(s,r)}else if(it(e))Or(s,e.bind(i));else if(kt(e))if(nt(e))e.forEach(r=>rd(r,t,i,n));else{const r=it(e.handler)?e.handler.bind(i):t[e.handler];it(r)&&Or(s,r,e)}}function od(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(c=>Gr(l,c,o,!0)),Gr(l,t,o)),kt(t)&&r.set(t,l),l}function Gr(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&Gr(e,r,i,!0),s&&s.forEach(o=>Gr(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=N_[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const N_={data:Kc,props:$c,emits:$c,methods:ns,computed:ns,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:ns,directives:ns,watch:B_,provide:Kc,inject:z_};function Kc(e,t){return t?e?function(){return Jt(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function z_(e,t){return ns(Xa(e),Xa(t))}function Xa(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Qt(e,t){return e?[...new Set([].concat(e,t))]:t}function ns(e,t){return e?Jt(Object.create(null),e,t):t}function $c(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:Jt(Object.create(null),Gc(e),Gc(t??{})):t}function B_(e,t){if(!e)return t;if(!t)return e;const i=Jt(Object.create(null),e);for(const n in t)i[n]=Qt(e[n],t[n]);return i}function ad(){return{app:null,config:{isNativeTag:wm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let j_=0;function W_(e,t){return function(n,s=null){it(n)||(n=Jt({},n)),s!=null&&!kt(s)&&(s=null);const r=ad(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:j_++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Sd,get config(){return r.config},set config(h){},use(h,...u){return o.has(h)||(h&&it(h.install)?(o.add(h),h.install(c,...u)):it(h)&&(o.add(h),h(c,...u))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,u){return u?(r.components[h]=u,c):r.components[h]},directive(h,u){return u?(r.directives[h]=u,c):r.directives[h]},mount(h,u,f){if(!l){const d=c._ceVNode||ue(n,s);return d.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(d,h,f),l=!0,c._container=h,h.__vue_app__=c,Wl(d.component)}},onUnmount(h){a.push(h)},unmount(){l&&(qe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,u){return r.provides[h]=u,c},runWithContext(h){const u=Tn;Tn=c;try{return h()}finally{Tn=u}}};return c}}let Tn=null;function U_(e,t){if(Kt){let i=Kt.provides;const n=Kt.parent&&Kt.parent.provides;n===i&&(i=Kt.provides=Object.create(n)),i[e]=t}}function Lr(e,t,i=!1){const n=Kt||Le;if(n||Tn){const s=Tn?Tn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&it(t)?t.call(n&&n.proxy):t}}const ld={},cd=()=>Object.create(ld),hd=e=>Object.getPrototypeOf(e)===ld;function V_(e,t,i,n=!1){const s={},r=cd();e.propsDefaults=Object.create(null),ud(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:s_(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function H_(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=ft(s),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let f=h[u];if(To(e.emitsOptions,f))continue;const d=t[f];if(l)if(yt(r,f))d!==r[f]&&(r[f]=d,c=!0);else{const g=Me(f);s[g]=Ga(l,a,g,d,e,!1)}else d!==r[f]&&(r[f]=d,c=!0)}}}else{ud(e,t,s,r)&&(c=!0);let h;for(const u in a)(!t||!yt(t,u)&&((h=nn(u))===u||!yt(t,h)))&&(l?i&&(i[u]!==void 0||i[h]!==void 0)&&(s[u]=Ga(l,a,u,void 0,e,!0)):delete s[u]);if(r!==a)for(const u in r)(!t||!yt(t,u))&&(delete r[u],c=!0)}c&&ai(e.attrs,"set","")}function ud(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(gs(l))continue;const c=t[l];let h;s&&yt(s,h=Me(l))?!r||!r.includes(h)?i[h]=c:(a||(a={}))[h]=c:To(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=ft(i),c=a||St;for(let h=0;h<r.length;h++){const u=r[h];i[u]=Ga(s,l,u,c[u],e,!yt(c,u))}}return o}function Ga(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=yt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&it(l)){const{propsDefaults:c}=s;if(i in c)n=c[i];else{const h=Ks(s);n=c[i]=l.call(null,t),h()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===nn(i))&&(n=!0))}return n}const X_=new WeakMap;function fd(e,t,i=!1){const n=i?X_:t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!it(e)){const h=u=>{l=!0;const[f,d]=fd(u,t,!0);Jt(o,f),d&&a.push(...d)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return kt(e)&&n.set(e,vn),vn;if(nt(r))for(let h=0;h<r.length;h++){const u=Me(r[h]);Zc(u)&&(o[u]=St)}else if(r)for(const h in r){const u=Me(h);if(Zc(u)){const f=r[h],d=o[u]=nt(f)||it(f)?{type:f}:Jt({},f),g=d.type;let m=!1,_=!0;if(nt(g))for(let p=0;p<g.length;++p){const x=g[p],w=it(x)&&x.name;if(w==="Boolean"){m=!0;break}else w==="String"&&(_=!1)}else m=it(g)&&g.name==="Boolean";d[0]=m,d[1]=_,(m||yt(d,"default"))&&a.push(u)}}const c=[o,a];return kt(e)&&n.set(e,c),c}function Zc(e){return e[0]!=="$"&&!gs(e)}const dd=e=>e[0]==="_"||e==="$stable",zl=e=>nt(e)?e.map(Ye):[Ye(e)],G_=(e,t,i)=>{if(t._n)return t;const n=p_((...s)=>zl(t(...s)),i);return n._c=!1,n},gd=(e,t,i)=>{const n=e._ctx;for(const s in e){if(dd(s))continue;const r=e[s];if(it(r))t[s]=G_(s,r,n);else if(r!=null){const o=zl(r);t[s]=()=>o}}},md=(e,t)=>{const i=zl(t);e.slots.default=()=>i},_d=(e,t,i)=>{for(const n in t)(i||n!=="_")&&(e[n]=t[n])},Y_=(e,t,i)=>{const n=e.slots=cd();if(e.vnode.shapeFlag&32){const s=t._;s?(_d(n,t,i),i&&Sf(n,"_",s,!0)):gd(t,n)}else t&&md(e,t)},K_=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=St;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:_d(s,t,i):(r=!t.$stable,gd(t,s)),o=t}else t&&(md(e,t),o={default:1});if(r)for(const a in s)!dd(a)&&o[a]==null&&delete s[a]},me=lp;function $_(e){return Z_(e)}function Z_(e,t){const i=Eo();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:f,setScopeId:d=Ze,insertStaticContent:g}=e,m=(y,E,T,O=null,A=null,I=null,z=void 0,N=null,k=!!E.dynamicChildren)=>{if(y===E)return;y&&!Yn(y,E)&&(O=Pt(y),st(y,A,I,!0),y=null),E.patchFlag===-2&&(k=!1,E.dynamicChildren=null);const{type:D,ref:$,shapeFlag:U}=E;switch(D){case Ro:_(y,E,T,O);break;case As:p(y,E,T,O);break;case na:y==null&&x(E,T,O,z);break;case si:F(y,E,T,O,A,I,z,N,k);break;default:U&1?v(y,E,T,O,A,I,z,N,k):U&6?H(y,E,T,O,A,I,z,N,k):(U&64||U&128)&&D.process(y,E,T,O,A,I,z,N,k,jt)}$!=null&&A&&Xr($,y&&y.ref,I,E||y,!E)},_=(y,E,T,O)=>{if(y==null)n(E.el=a(E.children),T,O);else{const A=E.el=y.el;E.children!==y.children&&c(A,E.children)}},p=(y,E,T,O)=>{y==null?n(E.el=l(E.children||""),T,O):E.el=y.el},x=(y,E,T,O)=>{[y.el,y.anchor]=g(y.children,E,T,O,y.el,y.anchor)},w=({el:y,anchor:E},T,O)=>{let A;for(;y&&y!==E;)A=f(y),n(y,T,O),y=A;n(E,T,O)},b=({el:y,anchor:E})=>{let T;for(;y&&y!==E;)T=f(y),s(y),y=T;s(E)},v=(y,E,T,O,A,I,z,N,k)=>{E.type==="svg"?z="svg":E.type==="math"&&(z="mathml"),y==null?M(E,T,O,A,I,z,N,k):L(y,E,A,I,z,N,k)},M=(y,E,T,O,A,I,z,N)=>{let k,D;const{props:$,shapeFlag:U,transition:K,dirs:G}=y;if(k=y.el=o(y.type,I,$&&$.is,$),U&8?h(k,y.children):U&16&&R(y.children,k,null,O,A,ia(y,I),z,N),G&&Fi(y,null,O,"created"),P(k,y,y.scopeId,z,O),$){for(const Ct in $)Ct!=="value"&&!gs(Ct)&&r(k,Ct,null,$[Ct],I,O);"value"in $&&r(k,"value",null,$.value,I),(D=$.onVnodeBeforeMount)&&Ue(D,O,y)}G&&Fi(y,null,O,"beforeMount");const ht=q_(A,K);ht&&K.beforeEnter(k),n(k,E,T),((D=$&&$.onVnodeMounted)||ht||G)&&me(()=>{D&&Ue(D,O,y),ht&&K.enter(k),G&&Fi(y,null,O,"mounted")},A)},P=(y,E,T,O,A)=>{if(T&&d(y,T),O)for(let I=0;I<O.length;I++)d(y,O[I]);if(A){let I=A.subTree;if(E===I||vd(I.type)&&(I.ssContent===E||I.ssFallback===E)){const z=A.vnode;P(y,z,z.scopeId,z.slotScopeIds,A.parent)}}},R=(y,E,T,O,A,I,z,N,k=0)=>{for(let D=k;D<y.length;D++){const $=y[D]=N?bi(y[D]):Ye(y[D]);m(null,$,E,T,O,A,I,z,N)}},L=(y,E,T,O,A,I,z)=>{const N=E.el=y.el;let{patchFlag:k,dynamicChildren:D,dirs:$}=E;k|=y.patchFlag&16;const U=y.props||St,K=E.props||St;let G;if(T&&Ni(T,!1),(G=K.onVnodeBeforeUpdate)&&Ue(G,T,E,y),$&&Fi(E,y,T,"beforeUpdate"),T&&Ni(T,!0),(U.innerHTML&&K.innerHTML==null||U.textContent&&K.textContent==null)&&h(N,""),D?S(y.dynamicChildren,D,N,T,O,ia(E,A),I):z||Y(y,E,N,null,T,O,ia(E,A),I,!1),k>0){if(k&16)B(N,U,K,T,A);else if(k&2&&U.class!==K.class&&r(N,"class",null,K.class,A),k&4&&r(N,"style",U.style,K.style,A),k&8){const ht=E.dynamicProps;for(let Ct=0;Ct<ht.length;Ct++){const bt=ht[Ct],de=U[bt],oe=K[bt];(oe!==de||bt==="value")&&r(N,bt,de,oe,A,T)}}k&1&&y.children!==E.children&&h(N,E.children)}else!z&&D==null&&B(N,U,K,T,A);((G=K.onVnodeUpdated)||$)&&me(()=>{G&&Ue(G,T,E,y),$&&Fi(E,y,T,"updated")},O)},S=(y,E,T,O,A,I,z)=>{for(let N=0;N<E.length;N++){const k=y[N],D=E[N],$=k.el&&(k.type===si||!Yn(k,D)||k.shapeFlag&70)?u(k.el):T;m(k,D,$,null,O,A,I,z,!0)}},B=(y,E,T,O,A)=>{if(E!==T){if(E!==St)for(const I in E)!gs(I)&&!(I in T)&&r(y,I,E[I],null,A,O);for(const I in T){if(gs(I))continue;const z=T[I],N=E[I];z!==N&&I!=="value"&&r(y,I,N,z,A,O)}"value"in T&&r(y,"value",E.value,T.value,A)}},F=(y,E,T,O,A,I,z,N,k)=>{const D=E.el=y?y.el:a(""),$=E.anchor=y?y.anchor:a("");let{patchFlag:U,dynamicChildren:K,slotScopeIds:G}=E;G&&(N=N?N.concat(G):G),y==null?(n(D,T,O),n($,T,O),R(E.children||[],T,$,A,I,z,N,k)):U>0&&U&64&&K&&y.dynamicChildren?(S(y.dynamicChildren,K,T,A,I,z,N),(E.key!=null||A&&E===A.subTree)&&pd(y,E,!0)):Y(y,E,T,$,A,I,z,N,k)},H=(y,E,T,O,A,I,z,N,k)=>{E.slotScopeIds=N,y==null?E.shapeFlag&512?A.ctx.activate(E,T,O,z,k):J(E,T,O,A,I,z,k):W(y,E,k)},J=(y,E,T,O,A,I,z)=>{const N=y.component=_p(y,O,A);if(id(y)&&(N.ctx.renderer=jt),pp(N,!1,z),N.asyncDep){if(A&&A.registerDep(N,X,z),!y.el){const k=N.subTree=ue(As);p(null,k,E,T)}}else X(N,y,E,T,A,I,z)},W=(y,E,T)=>{const O=E.component=y.component;if(op(y,E,T))if(O.asyncDep&&!O.asyncResolved){j(O,E,T);return}else O.next=E,O.update();else E.el=y.el,O.vnode=E},X=(y,E,T,O,A,I,z)=>{const N=()=>{if(y.isMounted){let{next:U,bu:K,u:G,parent:ht,vnode:Ct}=y;{const je=yd(y);if(je){U&&(U.el=Ct.el,j(y,U,z)),je.asyncDep.then(()=>{y.isUnmounted||N()});return}}let bt=U,de;Ni(y,!1),U?(U.el=Ct.el,j(y,U,z)):U=Ct,K&&qo(K),(de=U.props&&U.props.onVnodeBeforeUpdate)&&Ue(de,ht,U,Ct),Ni(y,!0);const oe=Jc(y),Be=y.subTree;y.subTree=oe,m(Be,oe,u(Be.el),Pt(Be),y,A,I),U.el=oe.el,bt===null&&ap(y,oe.el),G&&me(G,A),(de=U.props&&U.props.onVnodeUpdated)&&me(()=>Ue(de,ht,U,Ct),A)}else{let U;const{el:K,props:G}=E,{bm:ht,m:Ct,parent:bt,root:de,type:oe}=y,Be=ys(E);Ni(y,!1),ht&&qo(ht),!Be&&(U=G&&G.onVnodeBeforeMount)&&Ue(U,bt,E),Ni(y,!0);{de.ce&&de.ce._injectChildStyle(oe);const je=y.subTree=Jc(y);m(null,je,T,O,y,A,I),E.el=je.el}if(Ct&&me(Ct,A),!Be&&(U=G&&G.onVnodeMounted)){const je=E;me(()=>Ue(U,bt,je),A)}(E.shapeFlag&256||bt&&ys(bt.vnode)&&bt.vnode.shapeFlag&256)&&y.a&&me(y.a,A),y.isMounted=!0,E=T=O=null}};y.scope.on();const k=y.effect=new If(N);y.scope.off();const D=y.update=k.run.bind(k),$=y.job=k.runIfDirty.bind(k);$.i=y,$.id=y.uid,k.scheduler=()=>kl($),Ni(y,!0),D()},j=(y,E,T)=>{E.component=y;const O=y.vnode.props;y.vnode=E,y.next=null,H_(y,E.props,O,T),K_(y,E.children,T),Li(),Hc(y),Oi()},Y=(y,E,T,O,A,I,z,N,k=!1)=>{const D=y&&y.children,$=y?y.shapeFlag:0,U=E.children,{patchFlag:K,shapeFlag:G}=E;if(K>0){if(K&128){Z(D,U,T,O,A,I,z,N,k);return}else if(K&256){rt(D,U,T,O,A,I,z,N,k);return}}G&8?($&16&&at(D,A,I),U!==D&&h(T,U)):$&16?G&16?Z(D,U,T,O,A,I,z,N,k):at(D,A,I,!0):($&8&&h(T,""),G&16&&R(U,T,O,A,I,z,N,k))},rt=(y,E,T,O,A,I,z,N,k)=>{y=y||vn,E=E||vn;const D=y.length,$=E.length,U=Math.min(D,$);let K;for(K=0;K<U;K++){const G=E[K]=k?bi(E[K]):Ye(E[K]);m(y[K],G,T,null,A,I,z,N,k)}D>$?at(y,A,I,!0,!1,U):R(E,T,O,A,I,z,N,k,U)},Z=(y,E,T,O,A,I,z,N,k)=>{let D=0;const $=E.length;let U=y.length-1,K=$-1;for(;D<=U&&D<=K;){const G=y[D],ht=E[D]=k?bi(E[D]):Ye(E[D]);if(Yn(G,ht))m(G,ht,T,null,A,I,z,N,k);else break;D++}for(;D<=U&&D<=K;){const G=y[U],ht=E[K]=k?bi(E[K]):Ye(E[K]);if(Yn(G,ht))m(G,ht,T,null,A,I,z,N,k);else break;U--,K--}if(D>U){if(D<=K){const G=K+1,ht=G<$?E[G].el:O;for(;D<=K;)m(null,E[D]=k?bi(E[D]):Ye(E[D]),T,ht,A,I,z,N,k),D++}}else if(D>K)for(;D<=U;)st(y[D],A,I,!0),D++;else{const G=D,ht=D,Ct=new Map;for(D=ht;D<=K;D++){const ge=E[D]=k?bi(E[D]):Ye(E[D]);ge.key!=null&&Ct.set(ge.key,D)}let bt,de=0;const oe=K-ht+1;let Be=!1,je=0;const Xn=new Array(oe);for(D=0;D<oe;D++)Xn[D]=0;for(D=G;D<=U;D++){const ge=y[D];if(de>=oe){st(ge,A,I,!0);continue}let We;if(ge.key!=null)We=Ct.get(ge.key);else for(bt=ht;bt<=K;bt++)if(Xn[bt-ht]===0&&Yn(ge,E[bt])){We=bt;break}We===void 0?st(ge,A,I,!0):(Xn[We-ht]=D+1,We>=je?je=We:Be=!0,m(ge,E[We],T,null,A,I,z,N,k),de++)}const Bc=Be?J_(Xn):vn;for(bt=Bc.length-1,D=oe-1;D>=0;D--){const ge=ht+D,We=E[ge],jc=ge+1<$?E[ge+1].el:O;Xn[D]===0?m(null,We,T,jc,A,I,z,N,k):Be&&(bt<0||D!==Bc[bt]?q(We,T,jc,2):bt--)}}},q=(y,E,T,O,A=null)=>{const{el:I,type:z,transition:N,children:k,shapeFlag:D}=y;if(D&6){q(y.component.subTree,E,T,O);return}if(D&128){y.suspense.move(E,T,O);return}if(D&64){z.move(y,E,T,jt);return}if(z===si){n(I,E,T);for(let U=0;U<k.length;U++)q(k[U],E,T,O);n(y.anchor,E,T);return}if(z===na){w(y,E,T);return}if(O!==2&&D&1&&N)if(O===0)N.beforeEnter(I),n(I,E,T),me(()=>N.enter(I),A);else{const{leave:U,delayLeave:K,afterLeave:G}=N,ht=()=>n(I,E,T),Ct=()=>{U(I,()=>{ht(),G&&G()})};K?K(I,ht,Ct):Ct()}else n(I,E,T)},st=(y,E,T,O=!1,A=!1)=>{const{type:I,props:z,ref:N,children:k,dynamicChildren:D,shapeFlag:$,patchFlag:U,dirs:K,cacheIndex:G}=y;if(U===-2&&(A=!1),N!=null&&Xr(N,null,T,y,!0),G!=null&&(E.renderCache[G]=void 0),$&256){E.ctx.deactivate(y);return}const ht=$&1&&K,Ct=!ys(y);let bt;if(Ct&&(bt=z&&z.onVnodeBeforeUnmount)&&Ue(bt,E,y),$&6)pt(y.component,T,O);else{if($&128){y.suspense.unmount(T,O);return}ht&&Fi(y,null,E,"beforeUnmount"),$&64?y.type.remove(y,E,T,jt,O):D&&!D.hasOnce&&(I!==si||U>0&&U&64)?at(D,E,T,!1,!0):(I===si&&U&384||!A&&$&16)&&at(k,E,T),O&&ot(y)}(Ct&&(bt=z&&z.onVnodeUnmounted)||ht)&&me(()=>{bt&&Ue(bt,E,y),ht&&Fi(y,null,E,"unmounted")},T)},ot=y=>{const{type:E,el:T,anchor:O,transition:A}=y;if(E===si){_t(T,O);return}if(E===na){b(y);return}const I=()=>{s(T),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(y.shapeFlag&1&&A&&!A.persisted){const{leave:z,delayLeave:N}=A,k=()=>z(T,I);N?N(y.el,I,k):k()}else I()},_t=(y,E)=>{let T;for(;y!==E;)T=f(y),s(y),y=T;s(E)},pt=(y,E,T)=>{const{bum:O,scope:A,job:I,subTree:z,um:N,m:k,a:D}=y;qc(k),qc(D),O&&qo(O),A.stop(),I&&(I.flags|=8,st(z,y,E,T)),N&&me(N,E),me(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},at=(y,E,T,O=!1,A=!1,I=0)=>{for(let z=I;z<y.length;z++)st(y[z],E,T,O,A)},Pt=y=>{if(y.shapeFlag&6)return Pt(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const E=f(y.anchor||y.el),T=E&&E[y_];return T?f(T):E};let re=!1;const be=(y,E,T)=>{y==null?E._vnode&&st(E._vnode,null,null,!0):m(E._vnode||null,y,E,null,null,null,T),E._vnode=y,re||(re=!0,Hc(),qf(),re=!1)},jt={p:m,um:st,m:q,r:ot,mt:J,mc:R,pc:Y,pbc:S,n:Pt,o:e};return{render:be,hydrate:void 0,createApp:W_(be)}}function ia({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Ni({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function q_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pd(e,t,i=!1){const n=e.children,s=t.children;if(nt(n)&&nt(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=bi(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&pd(o,a)),a.type===Ro&&(a.el=o.el)}}function J_(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(s=i[i.length-1],e[s]<c){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<c?r=a+1:o=a;c<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function yd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yd(t)}function qc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Q_=Symbol.for("v-scx"),tp=()=>Lr(Q_);function Or(e,t,i){return xd(e,t,i)}function xd(e,t,i=St){const{immediate:n,deep:s,flush:r,once:o}=i,a=Jt({},i),l=t&&n||!t&&r!=="post";let c;if(Ps){if(r==="sync"){const d=tp();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Ze,d.resume=Ze,d.pause=Ze,d}}const h=Kt;a.call=(d,g,m)=>qe(d,h,g,m);let u=!1;r==="post"?a.scheduler=d=>{me(d,h&&h.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(d,g)=>{g?d():kl(d)}),a.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const f=d_(e,t,a);return Ps&&(c?c.push(f):l&&f()),f}function ep(e,t,i){const n=this.proxy,s=Bt(e)?e.includes(".")?bd(n,e):()=>n[e]:e.bind(n,n);let r;it(t)?r=t:(r=t.handler,i=t);const o=Ks(this),a=xd(s,r.bind(n),i);return o(),a}function bd(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const ip=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Me(t)}Modifiers`]||e[`${nn(t)}Modifiers`];function np(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||St;let s=i;const r=t.startsWith("update:"),o=r&&ip(n,t.slice(7));o&&(o.trim&&(s=i.map(h=>Bt(h)?h.trim():h)),o.number&&(s=i.map(Pm)));let a,l=n[a=Zo(t)]||n[a=Zo(Me(t))];!l&&r&&(l=n[a=Zo(nn(t))]),l&&qe(l,e,6,s);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,qe(c,e,6,s)}}function Ed(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!it(e)){const l=c=>{const h=Ed(c,t,!0);h&&(a=!0,Jt(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(kt(e)&&n.set(e,null),null):(nt(r)?r.forEach(l=>o[l]=null):Jt(o,r),kt(e)&&n.set(e,o),o)}function To(e,t){return!e||!po(t)?!1:(t=t.slice(2).replace(/Once$/,""),yt(e,t[0].toLowerCase()+t.slice(1))||yt(e,nn(t))||yt(e,t))}function Jc(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:f,setupState:d,ctx:g,inheritAttrs:m}=e,_=Hr(e);let p,x;try{if(i.shapeFlag&4){const b=s||n,v=b;p=Ye(c.call(v,b,h,u,d,f,g)),x=a}else{const b=t;p=Ye(b.length>1?b(u,{attrs:a,slots:o,emit:l}):b(u,null)),x=t.props?a:sp(a)}}catch(b){bs.length=0,vo(b,e,1),p=ue(As)}let w=p;if(x&&m!==!1){const b=Object.keys(x),{shapeFlag:v}=w;b.length&&v&7&&(r&&b.some(vl)&&(x=rp(x,r)),w=On(w,x,!1,!0))}return i.dirs&&(w=On(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&Fl(w,i.transition),p=w,Hr(_),p}const sp=e=>{let t;for(const i in e)(i==="class"||i==="style"||po(i))&&((t||(t={}))[i]=e[i]);return t},rp=(e,t)=>{const i={};for(const n in e)(!vl(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function op(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Qc(n,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const f=h[u];if(o[f]!==n[f]&&!To(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Qc(n,o,c):!0:!!o;return!1}function Qc(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!To(i,r))return!0}return!1}function ap({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const vd=e=>e.__isSuspense;function lp(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):__(e)}const si=Symbol.for("v-fgt"),Ro=Symbol.for("v-txt"),As=Symbol.for("v-cmt"),na=Symbol.for("v-stc"),bs=[];let ye=null;function Bl(e=!1){bs.push(ye=e?null:[])}function cp(){bs.pop(),ye=bs[bs.length-1]||null}let Is=1;function th(e,t=!1){Is+=e,e<0&&ye&&t&&(ye.hasOnce=!0)}function wd(e){return e.dynamicChildren=Is>0?ye||vn:null,cp(),Is>0&&ye&&ye.push(e),e}function Td(e,t,i,n,s,r){return wd(Es(e,t,i,n,s,r,!0))}function hp(e,t,i,n,s){return wd(ue(e,t,i,n,s,!0))}function Yr(e){return e?e.__v_isVNode===!0:!1}function Yn(e,t){return e.type===t.type&&e.key===t.key}const Rd=({key:e})=>e??null,Dr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||Zt(e)||it(e)?{i:Le,r:e,k:t,f:!!i}:e:null);function Es(e,t=null,i=null,n=0,s=null,r=e===si?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Rd(t),ref:t&&Dr(t),scopeId:Qf,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Le};return a?(jl(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Bt(i)?8:16),Is>0&&!o&&ye&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ye.push(l),l}const ue=up;function up(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===L_)&&(e=As),Yr(e)){const a=On(e,t,!0);return i&&jl(a,i),Is>0&&!r&&ye&&(a.shapeFlag&6?ye[ye.indexOf(e)]=a:ye.push(a)),a.patchFlag=-2,a}if(vp(e)&&(e=e.__vccOpts),t){t=fp(t);let{class:a,style:l}=t;a&&!Bt(a)&&(t.class=Cl(a)),kt(l)&&(Gs(l)&&!nt(l)&&(l=Jt({},l)),t.style=Rl(l))}const o=Bt(e)?1:vd(e)?128:x_(e)?64:kt(e)?4:it(e)?2:0;return Es(e,t,i,n,s,o,r,!0)}function fp(e){return e?Gs(e)||hd(e)?Jt({},e):e:null}function On(e,t,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?dp(s||{},t):s,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Rd(c),ref:t&&t.ref?i&&r?nt(r)?r.concat(Dr(t)):[r,Dr(t)]:Dr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==si?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&On(e.ssContent),ssFallback:e.ssFallback&&On(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Fl(h,l.clone(h)),h}function Ya(e=" ",t=0){return ue(Ro,null,e,t)}function Ye(e){return e==null||typeof e=="boolean"?ue(As):nt(e)?ue(si,null,e.slice()):Yr(e)?bi(e):ue(Ro,null,String(e))}function bi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:On(e)}function jl(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(nt(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),jl(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!hd(t)?t._ctx=Le:s===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:Le},i=32):(t=String(t),n&64?(i=16,t=[Ya(t)]):i=8);e.children=t,e.shapeFlag|=i}function dp(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Cl([t.class,n.class]));else if(s==="style")t.style=Rl([t.style,n.style]);else if(po(s)){const r=t[s],o=n[s];o&&r!==o&&!(nt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function Ue(e,t,i,n=null){qe(e,t,7,[i,n])}const gp=ad();let mp=0;function _p(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||gp,r={uid:mp++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fd(n,s),emitsOptions:Ed(n,s),emit:null,emitted:null,propsDefaults:St,inheritAttrs:n.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=np.bind(null,r),e.ce&&e.ce(r),r}let Kt=null,Kr,Ka;{const e=Eo(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Kr=t("__VUE_INSTANCE_SETTERS__",i=>Kt=i),Ka=t("__VUE_SSR_SETTERS__",i=>Ps=i)}const Ks=e=>{const t=Kt;return Kr(e),e.scope.on(),()=>{e.scope.off(),Kr(t)}},eh=()=>{Kt&&Kt.scope.off(),Kr(null)};function Cd(e){return e.vnode.shapeFlag&4}let Ps=!1;function pp(e,t=!1,i=!1){t&&Ka(t);const{props:n,children:s}=e.vnode,r=Cd(e);V_(e,n,r,t),Y_(e,s,i);const o=r?yp(e,t):void 0;return t&&Ka(!1),o}function yp(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,D_);const{setup:n}=i;if(n){Li();const s=e.setupContext=n.length>1?bp(e):null,r=Ks(e),o=Ys(n,e,0,[e.props,s]),a=Mf(o);if(Oi(),r(),(a||e.sp)&&!ys(e)&&ed(e),a){if(o.then(eh,eh),t)return o.then(l=>{ih(e,l)}).catch(l=>{vo(l,e,0)});e.asyncDep=o}else ih(e,o)}else Md(e)}function ih(e,t,i){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:kt(t)&&(e.setupState=Yf(t)),Md(e)}function Md(e,t,i){const n=e.type;e.render||(e.render=n.render||Ze);{const s=Ks(e);Li();try{k_(e)}finally{Oi(),s()}}}const xp={get(e,t){return Gt(e,"get",""),e[t]}};function bp(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,xp),slots:e.slots,emit:e.emit,expose:t}}function Wl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yf(r_(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in xs)return xs[i](e)},has(t,i){return i in t||i in xs}})):e.proxy}function Ep(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function vp(e){return it(e)&&"__vccOpts"in e}const wp=(e,t)=>u_(e,t,Ps);function $a(e,t,i){const n=arguments.length;return n===2?kt(t)&&!nt(t)?Yr(t)?ue(e,null,[t]):ue(e,t):ue(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Yr(i)&&(i=[i]),ue(e,t,i))}const Sd="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Za;const nh=typeof window<"u"&&window.trustedTypes;if(nh)try{Za=nh.createPolicy("vue",{createHTML:e=>e})}catch{}const Ad=Za?e=>Za.createHTML(e):e=>e,Tp="http://www.w3.org/2000/svg",Rp="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,sh=ni&&ni.createElement("template"),Cp={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?ni.createElementNS(Tp,e):t==="mathml"?ni.createElementNS(Rp,e):i?ni.createElement(e,{is:i}):ni.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>ni.createTextNode(e),createComment:e=>ni.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ni.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{sh.innerHTML=Ad(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=sh.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Mp=Symbol("_vtc");function Sp(e,t,i){const n=e[Mp];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const rh=Symbol("_vod"),Ap=Symbol("_vsh"),Ip=Symbol(""),Pp=/(^|;)\s*display\s*:/;function Lp(e,t,i){const n=e.style,s=Bt(i);let r=!1;if(i&&!s){if(t)if(Bt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&kr(n,a,"")}else for(const o in t)i[o]==null&&kr(n,o,"");for(const o in i)o==="display"&&(r=!0),kr(n,o,i[o])}else if(s){if(t!==i){const o=n[Ip];o&&(i+=";"+o),n.cssText=i,r=Pp.test(i)}}else t&&e.removeAttribute("style");rh in e&&(e[rh]=r?n.display:"",e[Ap]&&(n.display="none"))}const oh=/\s*!important$/;function kr(e,t,i){if(nt(i))i.forEach(n=>kr(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Op(e,t);oh.test(i)?e.setProperty(nn(n),i.replace(oh,""),"important"):e[n]=i}}const ah=["Webkit","Moz","ms"],sa={};function Op(e,t){const i=sa[t];if(i)return i;let n=Me(t);if(n!=="filter"&&n in e)return sa[t]=n;n=bo(n);for(let s=0;s<ah.length;s++){const r=ah[s]+n;if(r in e)return sa[t]=r}return t}const lh="http://www.w3.org/1999/xlink";function ch(e,t,i,n,s,r=Nm(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(lh,t.slice(6,t.length)):e.setAttributeNS(lh,t,i):i==null||r&&!Af(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Bn(i)?String(i):i)}function hh(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Ad(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Af(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(s||t)}function Dp(e,t,i,n){e.addEventListener(t,i,n)}function kp(e,t,i,n){e.removeEventListener(t,i,n)}const uh=Symbol("_vei");function Fp(e,t,i,n,s=null){const r=e[uh]||(e[uh]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=Np(t);if(n){const c=r[t]=jp(n,s);Dp(e,a,c,l)}else o&&(kp(e,a,o,l),r[t]=void 0)}}const fh=/(?:Once|Passive|Capture)$/;function Np(e){let t;if(fh.test(e)){t={};let n;for(;n=e.match(fh);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):nn(e.slice(2)),t]}let ra=0;const zp=Promise.resolve(),Bp=()=>ra||(zp.then(()=>ra=0),ra=Date.now());function jp(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;qe(Wp(n,i.value),t,5,[n])};return i.value=e,i.attached=Bp(),i}function Wp(e,t){if(nt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const dh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Up=(e,t,i,n,s,r)=>{const o=s==="svg";t==="class"?Sp(e,n,o):t==="style"?Lp(e,i,n):po(t)?vl(t)||Fp(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vp(e,t,n,o))?(hh(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ch(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(n))?hh(e,Me(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ch(e,t,n,o))};function Vp(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&dh(t)&&it(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return dh(t)&&Bt(i)?!1:t in e}const Hp=Jt({patchProp:Up},Cp);let gh;function Xp(){return gh||(gh=$_(Hp))}const Gp=(...e)=>{const t=Xp().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=Kp(n);if(!s)return;const r=t._component;!it(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,Yp(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Yp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kp(e){return Bt(e)?document.querySelector(e):e}class Di{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ls={PROPERTYCHANGE:"propertychange"};class Co{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Ul(e,t){return e>t?1:e<t?-1:0}function Vl(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if(typeof i=="function"){for(let s=1;s<n;++s){const r=e[s];if(r===t)return s;if(r<t)return i(t,e[s-1],r)>0?s-1:s}return n-1}if(i>0){for(let s=1;s<n;++s)if(e[s]<t)return s-1;return n-1}if(i<0){for(let s=1;s<n;++s)if(e[s]<=t)return s;return n-1}for(let s=1;s<n;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return n-1}function $p(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let s=0;s<n;s++)e[e.length]=i[s]}function Mo(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Zp(e,t,i){const n=t;return e.every(function(s,r){if(r===0)return!0;const o=n(e[r-1],s);return!(o>0||o===0)})}function $r(){return!0}function So(){return!1}function Zr(){}function qp(e){let t,i,n;return function(){const s=Array.prototype.slice.call(arguments);return(!i||this!==n||!Mo(s,i))&&(n=this,i=s,t=e.apply(this,arguments)),t}}function Jp(e){function t(){let i;try{i=e()}catch(n){return Promise.reject(n)}return i instanceof Promise?i:Promise.resolve(i)}return t()}function Ao(e){for(const t in e)delete e[t]}function Id(e){let t;for(t in e)return!1;return!t}class Io extends Co{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(i)||s.push(i)}dispatchEvent(t){const i=typeof t=="string",n=i?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=i?new Di(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Zr);delete o[n]}return l}disposeInternal(){this.listeners_&&Ao(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const s=n.indexOf(i);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=Zr,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}const et={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function xt(e,t,i,n,s){if(s){const o=i;i=function(){e.removeEventListener(t,i),o.apply(n??this,arguments)}}else n&&n!==e&&(i=i.bind(n));const r={target:e,type:t,listener:i};return e.addEventListener(t,i),r}function qr(e,t,i,n){return xt(e,t,i,n,!0)}function Lt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Ao(e))}class $s extends Io{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(et.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=xt(this,t[r],i);return s}return xt(this,t,i)}onceInternal(t,i){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=qr(this,t[r],i)}else n=qr(this,t,i);return i.ol_key=n,n}unInternal(t,i){const n=i.ol_key;if(n)Qp(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],i);else this.removeEventListener(t,i)}}$s.prototype.on;$s.prototype.once;$s.prototype.un;function Qp(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)Lt(e[t]);else Lt(e)}function dt(){throw new Error("Unimplemented abstract method.")}let t0=0;function Yt(e){return e.ol_uid||(e.ol_uid=String(++t0))}class mh extends Di{constructor(t,i,n){super(t),this.key=i,this.oldValue=n}}class ui extends $s{constructor(t){super(),this.on,this.once,this.un,Yt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,i){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new mh(n,t,i)),n=Ls.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new mh(n,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,n){const s=this.values_||(this.values_={});if(n)s[t]=i;else{const r=s[t];s[t]=i,r!==i&&this.notify(t,r)}}setProperties(t,i){for(const n in t)this.set(n,t[n],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Id(this.values_)&&(this.values_=null),i||this.notify(t,n)}}}const ve={ANIMATING:0,INTERACTING:1},Ie={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},e0=42,Hl=256,Xl={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Gl{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Xl[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Zs=6378137,bn=Math.PI*Zs,i0=[-bn,-bn,bn,bn],n0=[-180,-85,180,85],lr=Zs*Math.log(Math.tan(Math.PI/2));class on extends Gl{constructor(t){super({code:t,units:"m",extent:i0,global:!0,worldExtent:n0,getPointResolution:function(i,n){return i/Math.cosh(n[1]/Zs)}})}}const _h=[new on("EPSG:3857"),new on("EPSG:102100"),new on("EPSG:102113"),new on("EPSG:900913"),new on("http://www.opengis.net/def/crs/EPSG/0/3857"),new on("http://www.opengis.net/gml/srs/epsg.xml#3857")];function s0(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let r=0;r<s;r+=n){t[r]=bn*e[r]/180;let o=Zs*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));o>lr?o=lr:o<-lr&&(o=-lr),t[r+1]=o}return t}function r0(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let r=0;r<s;r+=n)t[r]=180*e[r]/bn,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Zs))/Math.PI-90;return t}const o0=6378137,ph=[-180,-90,180,90],a0=Math.PI*o0/180;class zi extends Gl{constructor(t,i){super({code:t,units:"degrees",extent:ph,axisOrientation:i,global:!0,metersPerUnit:a0,worldExtent:ph})}}const yh=[new zi("CRS:84"),new zi("EPSG:4326","neu"),new zi("urn:ogc:def:crs:OGC:1.3:CRS84"),new zi("urn:ogc:def:crs:OGC:2:84"),new zi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new zi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new zi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let qa={};function l0(e){return qa[e]||qa[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function c0(e,t){qa[e]=t}let Rn={};function Os(e,t,i){const n=e.getCode(),s=t.getCode();n in Rn||(Rn[n]={}),Rn[n][s]=i}function oa(e,t){return e in Rn&&t in Rn[e]?Rn[e][t]:null}const Wt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xh(e){const t=ki();for(let i=0,n=e.length;i<n;++i)Fr(t,e[i]);return t}function h0(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function Pd(e,t,i){let n,s;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,i<e[1]?s=e[1]-i:e[3]<i?s=i-e[3]:s=0,n*n+s*s}function Yl(e,t){return Ld(e,t[0],t[1])}function u0(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Ld(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function bh(e,t){const i=e[0],n=e[1],s=e[2],r=e[3],o=t[0],a=t[1];let l=Wt.UNKNOWN;return o<i?l=l|Wt.LEFT:o>s&&(l=l|Wt.RIGHT),a<n?l=l|Wt.BELOW:a>r&&(l=l|Wt.ABOVE),l===Wt.UNKNOWN&&(l=Wt.INTERSECTING),l}function ki(){return[1/0,1/0,-1/0,-1/0]}function qs(e,t,i,n,s){return s?(s[0]=e,s[1]=t,s[2]=i,s[3]=n,s):[e,t,i,n]}function Po(e){return qs(1/0,1/0,-1/0,-1/0,e)}function f0(e,t){const i=e[0],n=e[1];return qs(i,n,i,n,t)}function d0(e,t,i,n,s){const r=Po(s);return Dd(r,e,t,i,n)}function Ja(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function Od(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Fr(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Dd(e,t,i,n,s){for(;i<n;i+=s)g0(e,t[i],t[i+1]);return e}function g0(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function kd(e,t){let i;return i=t(Lo(e)),i||(i=t(Oo(e)),i)||(i=t(Do(e)),i)||(i=t(ci(e)),i)?i:!1}function Ds(e){let t=0;return ko(e)||(t=Tt(e)*ne(e)),t}function Lo(e){return[e[0],e[1]]}function Oo(e){return[e[2],e[1]]}function Dn(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function m0(e,t){let i;if(t==="bottom-left")i=Lo(e);else if(t==="bottom-right")i=Oo(e);else if(t==="top-left")i=ci(e);else if(t==="top-right")i=Do(e);else throw new Error("Invalid corner");return i}function Qa(e,t,i,n,s){const[r,o,a,l,c,h,u,f]=_0(e,t,i,n);return qs(Math.min(r,a,c,u),Math.min(o,l,h,f),Math.max(r,a,c,u),Math.max(o,l,h,f),s)}function _0(e,t,i,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=s*o,c=s*a,h=r*o,u=r*a,f=e[0],d=e[1];return[f-l+u,d-c-h,f-l-u,d-c+h,f+l-u,d+c+h,f+l+u,d+c-h,f-l+u,d-c-h]}function ne(e){return e[3]-e[1]}function Oe(e,t,i){const n=i||ki();return Js(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Po(n),n}function ci(e){return[e[0],e[3]]}function Do(e){return[e[2],e[3]]}function Tt(e){return e[2]-e[0]}function Js(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function ko(e){return e[2]<e[0]||e[3]<e[1]}function p0(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function y0(e,t,i){let n=!1;const s=bh(e,t),r=bh(e,i);if(s===Wt.INTERSECTING||r===Wt.INTERSECTING)n=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],h=t[0],u=t[1],f=i[0],d=i[1],g=(d-u)/(f-h);let m,_;r&Wt.ABOVE&&!(s&Wt.ABOVE)&&(m=f-(d-c)/g,n=m>=o&&m<=l),!n&&r&Wt.RIGHT&&!(s&Wt.RIGHT)&&(_=d-(f-l)*g,n=_>=a&&_<=c),!n&&r&Wt.BELOW&&!(s&Wt.BELOW)&&(m=f-(d-a)/g,n=m>=o&&m<=l),!n&&r&Wt.LEFT&&!(s&Wt.LEFT)&&(_=d-(f-o)*g,n=_>=a&&_<=c)}return n}function x0(e,t){const i=t.getExtent(),n=Dn(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const s=Tt(i),o=Math.floor((n[0]-i[0])/s)*s;e[0]-=o,e[2]-=o}return e}function Fd(e,t,i){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];x0(e,t);const s=Tt(n);if(Tt(e)>s,e[0]<n[0])return[[e[0]+s,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-s,e[3]]]}return[e]}function Ft(e,t,i){return Math.min(Math.max(e,t),i)}function b0(e,t,i,n,s,r){const o=s-i,a=r-n;if(o!==0||a!==0){const l=((e-i)*o+(t-n)*a)/(o*o+a*a);l>1?(i=s,n=r):l>0&&(i+=o*l,n+=a*l)}return Cn(e,t,i,n)}function Cn(e,t,i,n){const s=i-e,r=n-t;return s*s+r*r}function E0(e){const t=e.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(e[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(e[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=e[s];e[s]=e[n],e[n]=o;for(let a=n+1;a<t;a++){const l=-e[a][n]/e[n][n];for(let c=n;c<t+1;c++)n==c?e[a][c]=0:e[a][c]+=l*e[n][c]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let s=n-1;s>=0;s--)e[s][t]-=e[s][n]*i[n]}return i}function Eh(e){return e*180/Math.PI}function Ci(e){return e*Math.PI/180}function Mn(e,t){const i=e%t;return i*t<0?i+t:i}function v0(e,t,i){return e+i*(t-e)}function Nd(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function cr(e,t){return Math.floor(Nd(e,t))}function hr(e,t){return Math.ceil(Nd(e,t))}function tl(e,t,i){if(e>=t&&e<i)return e;const n=i-t;return((e-t)%n+n)%n+t}function w0(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Jr(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function Kl(e,t){const i=Math.cos(t),n=Math.sin(t),s=e[0]*i-e[1]*n,r=e[1]*i+e[0]*n;return e[0]=s,e[1]=r,e}function T0(e,t){return e[0]*=t,e[1]*=t,e}function R0(e,t){if(t.canWrapX()){const i=Tt(t.getExtent()),n=C0(e,t,i);n&&(e[0]-=n*i)}return e}function C0(e,t,i){const n=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||Tt(n),s=Math.floor((e[0]-n[0])/i)),s}const M0=63710088e-1;function vh(e,t,i){i=i||M0;const n=Ci(e[1]),s=Ci(t[1]),r=(s-n)/2,o=Ci(t[0]-e[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Qr=.9996,Ce=.00669438,Fo=Ce*Ce,No=Fo*Ce,Gi=Ce/(1-Ce),wh=Math.sqrt(1-Ce),kn=(1-wh)/(1+wh),zd=kn*kn,$l=zd*kn,Zl=$l*kn,Bd=Zl*kn,jd=1-Ce/4-3*Fo/64-5*No/256,S0=3*Ce/8+3*Fo/32+45*No/1024,A0=15*Fo/256+45*No/1024,I0=35*No/3072,P0=3/2*kn-27/32*$l+269/512*Bd,L0=21/16*zd-55/32*Zl,O0=151/96*$l-417/128*Bd,D0=1097/512*Zl,to=6378137;function k0(e,t,i){const n=e-5e5,o=(i.north?t:t-1e7)/Qr/(to*jd),a=o+P0*Math.sin(2*o)+L0*Math.sin(4*o)+O0*Math.sin(6*o)+D0*Math.sin(8*o),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,f=u*u,d=f*f,g=1-Ce*c,m=Math.sqrt(1-Ce*c),_=to/m,p=(1-Ce)/g,x=Gi*h**2,w=x*x,b=n/(_*Qr),v=b*b,M=v*b,P=M*b,R=P*b,L=R*b,S=a-u/p*(v/2-P/24*(5+3*f+10*x-4*w-9*Gi))+L/720*(61+90*f+298*x+45*d-252*Gi-3*w);let B=(b-M/6*(1+2*f+x)+R/120*(5-2*x+28*f-3*w+8*Gi+24*d))/h;return B=tl(B+Ci(Wd(i.number)),-Math.PI,Math.PI),[Eh(B),Eh(S)]}const Th=-80,Rh=84,F0=-180,N0=180;function z0(e,t,i){e=tl(e,F0,N0),t<Th?t=Th:t>Rh&&(t=Rh);const n=Ci(t),s=Math.sin(n),r=Math.cos(n),o=s/r,a=o*o,l=a*a,c=Ci(e),h=Wd(i.number),u=Ci(h),f=to/Math.sqrt(1-Ce*s**2),d=Gi*r**2,g=r*tl(c-u,-Math.PI,Math.PI),m=g*g,_=m*g,p=_*g,x=p*g,w=x*g,b=to*(jd*n-S0*Math.sin(2*n)+A0*Math.sin(4*n)-I0*Math.sin(6*n)),v=Qr*f*(g+_/6*(1-a+d)+x/120*(5-18*a+l+72*d-58*Gi))+5e5;let M=Qr*(b+f*o*(m/2+p/24*(5-a+9*d+4*d**2)+w/720*(61-58*a+l+600*d-330*Gi)));return i.north||(M+=1e7),[v,M]}function Wd(e){return(e-1)*6-180+3}const B0=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Ud(e){let t=0;for(const s of B0){const r=e.match(s);if(r){t=parseInt(r[1]);break}}if(!t)return null;let i=0,n=!1;return t>32700&&t<32761?i=t-32700:t>32600&&t<32661&&(n=!0,i=t-32600),i?{number:i,north:n}:null}function Ch(e,t){return function(i,n,s,r){const o=i.length;s=s>1?s:2,r=r??s,n||(s>2?n=i.slice():n=new Array(o));for(let a=0;a<o;a+=r){const l=i[a],c=i[a+1],h=e(l,c,t);n[a]=h[0],n[a+1]=h[1]}return n}}function j0(e){return Ud(e)?new Gl({code:e,units:"m"}):null}function W0(e){const t=Ud(e.getCode());return t?{forward:Ch(z0,t),inverse:Ch(k0,t)}:null}function Vd(...e){console.warn(...e)}const U0=[W0],V0=[j0];let el=!0;function H0(e){el=!1}function ql(e,t){if(t!==void 0){for(let i=0,n=e.length;i<n;++i)t[i]=e[i];t=t}else t=e.slice();return t}function il(e){c0(e.getCode(),e),Os(e,e,ql)}function X0(e){e.forEach(il)}function xe(e){if(typeof e!="string")return e;const t=l0(e);if(t)return t;for(const i of V0){const n=i(e);if(n)return n}return null}function Mh(e,t,i,n){e=xe(e);let s;const r=e.getPointResolutionFunc();if(r)s=r(t,i);else{const o=e.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=Ql(e,xe("EPSG:4326"));if(!a&&o!=="degrees")s=t*e.getMetersPerUnit();else{let c=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];c=a(c,c,2);const h=vh(c.slice(0,2),c.slice(2,4)),u=vh(c.slice(4,6),c.slice(6,8));s=(h+u)/2}const l=e.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Sh(e){X0(e),e.forEach(function(t){e.forEach(function(i){t!==i&&Os(t,i,ql)})})}function G0(e,t,i,n){e.forEach(function(s){t.forEach(function(r){Os(s,r,i),Os(r,s,n)})})}function Jl(e,t){return e?typeof e=="string"?xe(e):e:xe(t)}function Y0(e){return function(t,i,n,s){const r=t.length;n=n!==void 0?n:2,s=s??n,i=i!==void 0?i:new Array(r);for(let o=0;o<r;o+=s){const a=e(t.slice(o,o+n)),l=a.length;for(let c=0,h=s;c<h;++c)i[o+c]=c>=l?t[o+c]:a[c]}return i}}function aa(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||Ql(e,t)===ql)&&i}function Ql(e,t){const i=e.getCode(),n=t.getCode();let s=oa(i,n);if(s)return s;let r=null,o=null;for(const l of U0)r||(r=l(e)),o||(o=l(t));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)s=la(r.inverse,o.forward);else{const l=oa(i,a);l&&(s=la(l,o.forward))}else{const l=oa(a,n);l&&(s=la(r.inverse,l))}return s&&(il(e),il(t),Os(e,t,s)),s}function la(e,t){return function(i,n,s,r){return n=e(i,n,s,r),t(n,n,s,r)}}function eo(e,t){const i=xe(e),n=xe(t);return Ql(i,n)}function Hd(e,t,i){const n=eo(t,i);if(!n){const s=xe(t).getCode(),r=xe(i).getCode();throw new Error(`No transform available between ${s} and ${r}`)}return n(e,void 0,e.length)}function nl(e,t){return e}function ti(e,t){return el&&!Jr(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(el=!1,Vd("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function K0(e,t){return e}function Yi(e,t){return e}function $0(){Sh(_h),Sh(yh),G0(yh,_h,s0,r0)}$0();function Rt(e,t){if(!e)throw new Error(t)}function Ah(e,t,i){return function(n,s,r,o,a){if(!n)return;if(!s&&!t)return n;const l=t?0:r[0]*s,c=t?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let f=e[0]+l/2+h,d=e[2]-l/2+h,g=e[1]+c/2+u,m=e[3]-c/2+u;f>d&&(f=(d+f)/2,d=f),g>m&&(g=(m+g)/2,m=g);let _=Ft(n[0],f,d),p=Ft(n[1],g,m);if(o&&i&&s){const x=30*s;_+=-x*Math.log(1+Math.max(0,f-n[0])/x)+x*Math.log(1+Math.max(0,n[0]-d)/x),p+=-x*Math.log(1+Math.max(0,g-n[1])/x)+x*Math.log(1+Math.max(0,n[1]-m)/x)}return[_,p]}}function Z0(e){return e}function tc(e,t,i,n){const s=Tt(t)/i[0],r=ne(t)/i[1];return n?Math.min(e,Math.max(s,r)):Math.min(e,Math.min(s,r))}function ec(e,t,i){let n=Math.min(e,t);const s=50;return n*=Math.log(1+s*Math.max(0,e/t-1))/s+1,i&&(n=Math.max(n,i),n/=Math.log(1+s*Math.max(0,i/e-1))/s+1),Ft(n,i/2,t*2)}function q0(e,t,i,n){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=e[0],c=e[e.length-1],h=i?tc(l,i,o,n):l;if(a)return t?ec(s,h,c):Ft(s,c,h);const u=Math.min(h,s),f=Math.floor(Vl(e,u,r));return e[f]>h&&f<e.length-1?e[f+1]:e[f]}}}function J0(e,t,i,n,s,r){return n=n!==void 0?n:!0,i=i!==void 0?i:0,function(o,a,l,c){if(o!==void 0){const h=s?tc(t,s,l,r):t;if(c)return n?ec(o,h,i):Ft(o,i,h);const u=1e-9,f=Math.ceil(Math.log(t/h)/Math.log(e)-u),d=-a*(.5-u)+.5,g=Math.min(h,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),_=Math.max(f,m),p=t/Math.pow(e,_);return Ft(p,i,h)}}}function Ih(e,t,i,n,s){return i=i!==void 0?i:!0,function(r,o,a,l){if(r!==void 0){const c=n?tc(e,n,a,s):e;return!i||!l?Ft(r,t,c):ec(r,c,t)}}}function ic(e){if(e!==void 0)return 0}function Ph(e){if(e!==void 0)return e}function Q0(e){const t=2*Math.PI/e;return function(i,n){if(n)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i}}function ty(e){const t=Ci(5);return function(i,n){return n||i===void 0?i:Math.abs(i)<=t?0:i}}function Xd(e){return Math.pow(e,3)}function jn(e){return 1-Xd(1-e)}function ey(e){return 3*e*e-2*e*e*e}function iy(e){return e}new Array(6);function Sn(){return[1,0,0,1,0,0]}function pe(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function ks(e,t,i,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return e[0]=n*c,e[1]=s*l,e[2]=-n*l,e[3]=s*c,e[4]=o*n*c-a*n*l+t,e[5]=o*s*l+a*s*c+i,e}function Gd(e,t){const i=ny(t);Rt(i!==0,"Transformation matrix cannot be inverted");const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/i,e[1]=-s/i,e[2]=-r/i,e[3]=n/i,e[4]=(r*l-o*a)/i,e[5]=-(n*l-s*a)/i,e}function ny(e){return e[0]*e[3]-e[1]*e[2]}const Lh=[1e6,1e6,1e6,1e6,2,2];function sy(e){return"matrix("+e.map((i,n)=>Math.round(i*Lh[n])/Lh[n]).join(", ")+")"}function ry(e,t,i,n,s,r,o){r=r||[],o=o||2;let a=0;for(let l=t;l<i;l+=n){const c=e[l],h=e[l+1];r[a++]=s[0]*c+s[2]*h+s[4],r[a++]=s[1]*c+s[3]*h+s[5];for(let u=2;u<o;u++)r[a++]=e[l+u]}return r&&r.length!=a&&(r.length=a),r}function oy(e,t,i,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let f=t;f<i;f+=n){const d=e[f]-c,g=e[f+1]-h;o[u++]=c+d*a-g*l,o[u++]=h+d*l+g*a;for(let m=f+2;m<f+n;++m)o[u++]=e[m]}return o&&o.length!=u&&(o.length=u),o}function ay(e,t,i,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<i;u+=n){const f=e[u]-l,d=e[u+1]-c;a[h++]=l+s*f,a[h++]=c+r*d;for(let g=u+2;g<u+n;++g)a[h++]=e[g]}return a&&a.length!=h&&(a.length=h),a}function ly(e,t,i,n,s,r,o){o=o||[];let a=0;for(let l=t;l<i;l+=n){o[a++]=e[l]+s,o[a++]=e[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const Oh=Sn();class cy extends ui{constructor(){super(),this.extent_=ki(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=qp((t,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return dt()}closestPointXY(t,i,n,s){return dt()}containsXY(t,i){const n=this.getClosestPoint([t,i]);return n[0]===t&&n[1]===i}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return dt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Po(i),this.extentRevision_=this.getRevision()}return p0(this.extent_,t)}rotate(t,i){dt()}scale(t,i,n){dt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return dt()}getType(){return dt()}applyTransform(t){dt()}intersectsExtent(t){return dt()}translate(t,i){dt()}transform(t,i){const n=xe(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=ne(c)/ne(l);ks(Oh,c[0],c[3],h,-h,0,0,0);const u=ry(r,0,r.length,a,Oh,o),f=eo(n,i);return f?f(u,u,a):u}:eo(n,i);return this.applyTransform(s),this}}class nc extends cy{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return d0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return dt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=Dh(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){dt()}setLayout(t,i,n){let s;if(t)s=Dh(t);else{for(let r=0;r<n;++r){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}s=i.length,t=hy(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();oy(n,0,n.length,s,t,i,n),this.changed()}}scale(t,i,n){i===void 0&&(i=t),n||(n=Dn(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();ay(s,0,s.length,r,t,i,n,s),this.changed()}}translate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();ly(n,0,n.length,s,t,i,n),this.changed()}}}function hy(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Dh(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function kh(e,t,i,n,s,r,o){const a=e[t],l=e[t+1],c=e[i]-a,h=e[i+1]-l;let u;if(c===0&&h===0)u=t;else{const f=((s-a)*c+(r-l)*h)/(c*c+h*h);if(f>1)u=i;else if(f>0){for(let d=0;d<n;++d)o[d]=v0(e[t+d],e[i+d],f);o.length=n;return}else u=t}for(let f=0;f<n;++f)o[f]=e[u+f];o.length=n}function Yd(e,t,i,n,s){let r=e[t],o=e[t+1];for(t+=n;t<i;t+=n){const a=e[t],l=e[t+1],c=Cn(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function uy(e,t,i,n,s){for(let r=0,o=i.length;r<o;++r){const a=i[r];s=Yd(e,t,a,n,s),t=a}return s}function Kd(e,t,i,n,s,r,o,a,l,c,h){if(t==i)return c;let u,f;if(s===0){if(f=Cn(o,a,e[t],e[t+1]),f<c){for(u=0;u<n;++u)l[u]=e[t+u];return l.length=n,f}return c}h=h||[NaN,NaN];let d=t+n;for(;d<i;)if(kh(e,d-n,d,n,o,a,h),f=Cn(o,a,h[0],h[1]),f<c){for(c=f,u=0;u<n;++u)l[u]=h[u];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(c))/s|0,1);if(kh(e,i-n,t,n,o,a,h),f=Cn(o,a,h[0],h[1]),f<c){for(c=f,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function fy(e,t,i,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,f=i.length;u<f;++u){const d=i[u];c=Kd(e,t,d,n,s,r,o,a,l,c,h),t=d}return c}function dy(e,t,i,n){for(let s=0,r=i.length;s<r;++s)e[t++]=i[s];return t}function $d(e,t,i,n){for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0;a<n;++a)e[t++]=o[a]}return t}function gy(e,t,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=$d(e,t,i[o],n);s[r++]=l,t=l}return s.length=r,s}function my(e,t,i,n,s,r,o){const a=(i-t)/n;if(a<3){for(;t<i;t+=n)r[o++]=e[t],r[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,i-n];let h=0;for(;c.length>0;){const u=c.pop(),f=c.pop();let d=0;const g=e[f],m=e[f+1],_=e[u],p=e[u+1];for(let x=f+n;x<u;x+=n){const w=e[x],b=e[x+1],v=b0(w,b,g,m,_,p);v>d&&(h=x,d=v)}d>s&&(l[(h-t)/n]=1,f+n<h&&c.push(f,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=e[t+u*n],r[o++]=e[t+u*n+1]);return o}function an(e,t){return t*Math.round(e/t)}function _y(e,t,i,n,s,r,o){if(t==i)return o;let a=an(e[t],s),l=an(e[t+1],s);t+=n,r[o++]=a,r[o++]=l;let c,h;do if(c=an(e[t],s),h=an(e[t+1],s),t+=n,t==i)return r[o++]=c,r[o++]=h,o;while(c==a&&h==l);for(;t<i;){const u=an(e[t],s),f=an(e[t+1],s);if(t+=n,u==c&&f==h)continue;const d=c-a,g=h-l,m=u-a,_=f-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=u,h=f;continue}r[o++]=c,r[o++]=h,a=c,l=h,c=u,h=f}return r[o++]=c,r[o++]=h,o}function py(e,t,i,n,s,r,o,a){for(let l=0,c=i.length;l<c;++l){const h=i[l];o=_y(e,t,h,n,s,r,o),a.push(o),t=h}return o}function Zd(e,t,i,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<i;o+=n)s[r++]=e.slice(o,o+n);return s.length=r,s}function yy(e,t,i,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o];s[r++]=Zd(e,t,l,n,s[r]),t=l}return s.length=r,s}function qd(e,t,i,n){let s=0;const r=e[i-n],o=e[i-n+1];let a=0,l=0;for(;t<i;t+=n){const c=e[t]-r,h=e[t+1]-o;s+=l*c-a*h,a=c,l=h}return s/2}function xy(e,t,i,n){let s=0;for(let r=0,o=i.length;r<o;++r){const a=i[r];s+=qd(e,t,a,n),t=a}return s}class Fs extends nc{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new Fs(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,n,s){return s<Pd(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,s))}getArea(){return qd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const i=[];return i.length=my(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new Fs(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$d(this.flatCoordinates,0,t,this.stride),this.changed()}}class sc extends nc{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){const t=new sc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,s){const r=this.flatCoordinates,o=Cn(t,i,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return f0(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Ld(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dy(this.flatCoordinates,0,t,this.stride),this.changed()}}function by(e,t,i,n,s){return!kd(s,function(o){return!Ki(e,t,i,n,o[0],o[1])})}function Ki(e,t,i,n,s,r){let o=0,a=e[i-n],l=e[i-n+1];for(;t<i;t+=n){const c=e[t],h=e[t+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function Jd(e,t,i,n,s,r){if(i.length===0||!Ki(e,t,i[0],n,s,r))return!1;for(let o=1,a=i.length;o<a;++o)if(Ki(e,i[o-1],i[o],n,s,r))return!1;return!0}function Ey(e,t,i,n,s,r,o){let a,l,c,h,u,f,d;const g=s[r+1],m=[];for(let x=0,w=i.length;x<w;++x){const b=i[x];for(h=e[b-n],f=e[b-n+1],a=t;a<b;a+=n)u=e[a],d=e[a+1],(g<=f&&d<=g||f<=g&&g<=d)&&(c=(g-f)/(d-f)*(u-h)+h,m.push(c)),h=u,f=d}let _=NaN,p=-1/0;for(m.sort(Ul),h=m[0],a=1,l=m.length;a<l;++a){u=m[a];const x=Math.abs(u-h);x>p&&(c=(h+u)/2,Jd(e,t,i,n,c,g)&&(_=c,p=x)),h=u}return isNaN(_)&&(_=s[r]),[_,g,p]}function vy(e,t,i,n,s){let r;for(t+=n;t<i;t+=n)if(r=s(e.slice(t-n,t),e.slice(t,t+n)),r)return r;return!1}function Qd(e,t,i,n,s){const r=Dd(ki(),e,t,i,n);return Js(s,r)?u0(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:vy(e,t,i,n,function(o,a){return y0(s,o,a)}):!1}function tg(e,t,i,n,s){return!!(Qd(e,t,i,n,s)||Ki(e,t,i,n,s[0],s[1])||Ki(e,t,i,n,s[0],s[3])||Ki(e,t,i,n,s[2],s[1])||Ki(e,t,i,n,s[2],s[3]))}function wy(e,t,i,n,s){if(!tg(e,t,i[0],n,s))return!1;if(i.length===1)return!0;for(let r=1,o=i.length;r<o;++r)if(by(e,i[r-1],i[r],n,s)&&!Qd(e,i[r-1],i[r],n,s))return!1;return!0}function Ty(e,t,i,n){for(;t<i-n;){for(let s=0;s<n;++s){const r=e[t+s];e[t+s]=e[i-n+s],e[i-n+s]=r}t+=n,i-=n}}function eg(e,t,i,n){let s=0,r=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const a=e[t],l=e[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Ry(e,t,i,n,s){s=s!==void 0?s:!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=eg(e,t,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function Fh(e,t,i,n,s){s=s!==void 0?s:!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=eg(e,t,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&Ty(e,t,a,n),t=a}return t}class Ns extends nc{constructor(t,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,t),this.ends_=n):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?$p(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ns(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,s){return s<Pd(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uy(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fy(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,s))}containsXY(t,i){return Jd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return xy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Fh(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,yy(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Dn(this.getExtent());this.flatInteriorPoint_=Ey(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new sc(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Fs(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,i=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Fs(i.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Ry(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Fh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=py(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new Ns(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return wy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=gy(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Nh(e){if(ko(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],i=e[1],n=e[2],s=e[3],r=[t,i,t,s,n,s,n,i,t,i];return new Ns(r,"XY",[r.length])}const ca=0;class Ke extends ui{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Jl(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&H0(),t.center&&(t.center=ti(t.center,this.projection_)),t.extent&&(t.extent=Yi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const i=Object.assign({},t);for(const a in Ie)delete i[a];this.setProperties(i,!0);const n=My(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=Cy(t),r=n.constraint,o=Sy(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];i=i||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-i[3]+i[1]-s[1]),a=r/2*(s[0]-i[0]+i[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let n=0;n<i.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=ti(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ti(s.anchor,this.getProjection())),i[n]=s}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===i){n&&ur(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<i;++s){const h=arguments[s],u={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||ey,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const f=Mn(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+f,l=u.targetRotation}Ay(u)?u.complete=!0:r+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(ve.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ve.ANIMATING]>0}getInteracting(){return this.hints_[ve.INTERACTING]>0}cancelAnimations(){this.setHint(ve.ANIMATING,-this.hints_[ve.ANIMATING]);let t;for(let i=0,n=this.animations_.length;i<n;++i){const s=this.animations_[i];if(s[0].callback&&ur(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let i=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=f+u*(g-f),p=d+u*(m-d);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const f=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=u===1?Mn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),i=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(ve.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&ur(o,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-i[0],s[1]-i[1]],Kl(n,t-this.getRotation()),w0(n,i)),n}calculateCenterZoom(t,i){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=i[0]-t*(i[0]-s[0])/r,a=i[1]-t*(i[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(t){const i=this.viewportSize_;if(t){const n=i[0],s=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&nl(t,this.getProjection())}getCenterInternal(){return this.get(Ie.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const i=this.calculateExtentInternal(t);return K0(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();Rt(i,"The view center is not defined");const n=this.getResolution();Rt(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return Rt(s!==void 0,"The view rotation is not defined"),Qa(i,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ie.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(Yi(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();const n=Tt(t)/i[0],s=ne(t)/i[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/Math.log(t);return function(r){return i/Math.pow(t,r*s)}}getRotation(){return this.get(Ie.ROTATION)}getValueForResolutionFunction(t){const i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/i;return function(o){return Math.log(n/o)/i/r}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t);const n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i}getState(){const t=this.getProjection(),i=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=ha(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],i,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,n,s;if(this.resolutions_){const r=Vl(this.resolutions_,t,1);i=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return i+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){var i;if((i=this.resolutions_)!=null&&i.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ft(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ft(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let n;if(Rt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Rt(!ko(t),"Cannot fit empty extent provided as `geometry`");const s=Yi(t,this.getProjection());n=Nh(s)}else if(t.getType()==="Circle"){const s=Yi(t.getExtent(),this.getProjection());n=Nh(s),n.rotate(this.getRotation(),Dn(s))}else n=t;this.fitInternal(n,i)}rotatedExtentForGeometry(t){const i=this.getRotation(),n=Math.cos(i),s=Math.sin(-i),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,f=r.length;u<f;u+=o){const d=r[u]*n-r[u+1]*s,g=r[u]*s+r[u+1]*n;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(t,i){i=i||{};let n=i.size;n||(n=this.getViewportSizeMinusPadding_());const s=i.padding!==void 0?i.padding:[0,0,0,0],r=i.nearest!==void 0?i.nearest:!1;let o;i.minResolution!==void 0?o=i.minResolution:i.maxZoom!==void 0?o=this.getResolutionForZoom(i.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),f=Dn(a);f[0]+=(s[1]-s[3])/2*l,f[1]+=(s[0]-s[2])/2*l;const d=f[0]*u-f[1]*h,g=f[1]*u+f[0]*h,m=this.getConstrainedCenter([d,g],l),_=i.callback?i.callback:Zr;i.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:i.duration,easing:i.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),ur(_,!0))}centerOn(t,i,n){this.centerOnInternal(ti(t,this.getProjection()),i,n)}centerOnInternal(t,i,n){this.setCenterInternal(ha(t,i,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,n,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=ha(t,s,[a[0]/2+o[3],a[1]/2+o[0]],i,n);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const i=nl(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){const i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&ti(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);i&&(this.targetCenter_=this.calculateCenterZoom(r,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=ti(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(s,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ti(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){const n=this.getAnimating()||this.getInteracting()||i,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Ie.ROTATION)!==s&&this.set(Ie.ROTATION,s),this.get(Ie.RESOLUTION)!==o&&(this.set(Ie.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ie.CENTER)||!Jr(this.get(Ie.CENTER),a))&&this.set(Ie.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,n){t=t!==void 0?t:200;const s=i||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Jr(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:jn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ve.INTERACTING,1)}endInteraction(t,i,n){n=n&&ti(n,this.getProjection()),this.endInteractionInternal(t,i,n)}endInteractionInternal(t,i,n){this.getInteracting()&&(this.setHint(ve.INTERACTING,-1),this.resolveConstraints(t,i,n))}getConstrainedCenter(t,i){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)}getConstrainedZoom(t,i){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))}getConstrainedResolution(t,i){i=i||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)}}function ur(e,t){setTimeout(function(){e(t)},0)}function Cy(e){if(e.extent!==void 0){const i=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Ah(e.extent,e.constrainOnlyCenter,i)}const t=Jl(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Ah(i,!1,!1)}return Z0}function My(e){let t,i,n,o=e.minZoom!==void 0?e.minZoom:ca,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,h=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,u=e.showFullExtent!==void 0?e.showFullExtent:!1,f=Jl(e.projection,"EPSG:3857"),d=f.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&f.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const _=e.resolutions;i=_[o],n=_[a]!==void 0?_[a]:_[_.length-1],e.constrainResolution?t=q0(_,h,!g&&m,u):t=Ih(i,n,h,!g&&m,u)}else{const p=(d?Math.max(Tt(d),ne(d)):360*Xl.degrees/f.getMetersPerUnit())/Hl/Math.pow(2,ca),x=p/Math.pow(2,28-ca);i=e.maxResolution,i!==void 0?o=0:i=p/Math.pow(l,o),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=i/Math.pow(l,a):n=p/Math.pow(l,a):n=x),a=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,a-o),e.constrainResolution?t=J0(l,i,n,h,!g&&m,u):t=Ih(i,n,h,!g&&m,u)}return{constraint:t,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}function Sy(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const i=e.constrainRotation;return i===void 0||i===!0?ty():i===!1?Ph:typeof i=="number"?Q0(i):Ph}return ic}function Ay(e){return!(e.sourceCenter&&e.targetCenter&&!Jr(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function ha(e,t,i,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=e[0]*r-e[1]*o,l=e[1]*r+e[0]*o;a+=(t[0]/2-i[0])*n,l+=(i[1]-t[1]/2)*n,o=-o;const c=a*r-l*o,h=l*r+a*o;return[c,h]}const we={ADD:"add",REMOVE:"remove"},zh={LENGTH:"length"};class fr extends Di{constructor(t,i,n){super(t),this.element=i,this.index=n}}class li extends ui{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,n=t.length;i<n;++i)this.push(t[i]);return this}forEach(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)t(i[n],n,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(zh.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new fr(we.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)if(i[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new fr(we.REMOVE,i,t)),i}setAt(t,i){const n=this.getLength();if(t>=n){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);const s=this.array_[t];this.array_[t]=i,this.dispatchEvent(new fr(we.REMOVE,s,t)),this.dispatchEvent(new fr(we.ADD,i,t))}updateLength_(){this.set(zh.LENGTH,this.array_.length)}assertUnique_(t,i){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===t&&n!==i)throw new Error("Duplicate item added to a unique collection")}}const Et={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ig extends ui{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[Et.OPACITY]=t.opacity!==void 0?t.opacity:1,Rt(typeof i[Et.OPACITY]=="number","Layer opacity must be a number"),i[Et.VISIBLE]=t.visible!==void 0?t.visible:!0,i[Et.Z_INDEX]=t.zIndex,i[Et.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[Et.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[Et.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[Et.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Ft(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return dt()}getLayerStatesArray(t){return dt()}getExtent(){return this.get(Et.EXTENT)}getMaxResolution(){return this.get(Et.MAX_RESOLUTION)}getMinResolution(){return this.get(Et.MIN_RESOLUTION)}getMinZoom(){return this.get(Et.MIN_ZOOM)}getMaxZoom(){return this.get(Et.MAX_ZOOM)}getOpacity(){return this.get(Et.OPACITY)}getSourceState(){return dt()}getVisible(){return this.get(Et.VISIBLE)}getZIndex(){return this.get(Et.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Et.EXTENT,t)}setMaxResolution(t){this.set(Et.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Et.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Et.MAX_ZOOM,t)}setMinZoom(t){this.set(Et.MIN_ZOOM,t)}setOpacity(t){Rt(typeof t=="number","Layer opacity must be a number"),this.set(Et.OPACITY,t)}setVisible(t){this.set(Et.VISIBLE,t)}setZIndex(t){this.set(Et.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const $e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class zo extends ig{constructor(t){const i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Et.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Et.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=xt(t,et.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof Ke?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(i.layerStatesArray){if(s=i.layerStatesArray.find(o=>o.layer===this),!s)return!1}else s=this.getLayerState();const r=this.getExtent();return rc(s,i.viewState)&&(!r||Js(r,i.extent))}getAttributions(t){var r;if(!this.isVisible(t))return[];const i=(r=this.getSource())==null?void 0:r.getAttributions();if(!i)return[];const n=t instanceof Ke?t.getViewStateAndExtent():t;let s=i(n);return Array.isArray(s)||(s=[s]),s}render(t,i){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,i){}renderDeferred(t){const i=this.getRenderer();i&&i.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Et.MAP,t)}getMapInternal(){return this.get(Et.MAP)}setMap(t){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=xt(t,$e.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=xt(this,et.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const i=t.frameState.layerStatesArray,n=this.getLayerState(!1);Rt(!i.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(t){this.set(Et.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function rc(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}function ng(e,t,i=0,n=e.length-1,s=Iy){for(;n>i;){if(n-i>600){const l=n-i+1,c=t-i+1,h=Math.log(l),u=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),d=Math.max(i,Math.floor(t-c*u/l+f)),g=Math.min(n,Math.floor(t+(l-c)*u/l+f));ng(e,t,d,g,s)}const r=e[t];let o=i,a=n;for(Kn(e,i,t),s(e[n],r)>0&&Kn(e,i,n);o<a;){for(Kn(e,o,a),o++,a--;s(e[o],r)<0;)o++;for(;s(e[a],r)>0;)a--}s(e[i],r)===0?Kn(e,i,a):(a++,Kn(e,a,n)),a<=t&&(i=a+1),t<=a&&(n=a-1)}}function Kn(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function Iy(e,t){return e<t?-1:e>t?1:0}class Py{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data;const n=[];if(!gr(t,i))return n;const s=this.toBBox,r=[];for(;i;){for(let o=0;o<i.children.length;o++){const a=i.children[o],l=i.leaf?s(a):a;gr(t,l)&&(i.leaf?n.push(a):fa(t,l)?this._all(a,n):r.push(a))}i=r.pop()}return n}collides(t){let i=this.data;if(!gr(t,i))return!1;const n=[];for(;i;){for(let s=0;s<i.children.length;s++){const r=i.children[s],o=i.leaf?this.toBBox(r):r;if(gr(t,o)){if(i.leaf||fa(t,o))return!0;n.push(r)}}i=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=pn([]),this}remove(t,i){if(!t)return this;let n=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,c;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),n.leaf){const h=Ly(t,n.children,i);if(h!==-1)return n.children.splice(h,1),r.push(n),this._condense(r),this}!c&&!n.leaf&&fa(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){const n=[];for(;t;)t.leaf?i.push(...t.children):n.push(...t.children),t=n.pop();return i}_build(t,i,n,s){const r=n-i+1;let o=this._maxEntries,a;if(r<=o)return a=pn(t.slice(i,n+1)),ln(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=pn([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));Bh(t,i,n,c,this.compareMinX);for(let h=i;h<=n;h+=c){const u=Math.min(h+c-1,n);Bh(t,h,u,l,this.compareMinY);for(let f=h;f<=u;f+=l){const d=Math.min(f+l-1,u);a.children.push(this._build(t,f,d,s-1))}}return ln(a,this.toBBox),a}_chooseSubtree(t,i,n,s){for(;s.push(i),!(i.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<i.children.length;l++){const c=i.children[l],h=ua(c),u=ky(t,c)-h;u<o?(o=u,r=h<r?h:r,a=c):u===o&&h<r&&(r=h,a=c)}i=a||i.children[0]}return i}_insert(t,i,n){const s=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,i,r);for(o.children.push(t),rs(o,s);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(s,r,i)}_split(t,i){const n=t[i],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=pn(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ln(n,this.toBBox),ln(a,this.toBBox),i?t[i-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,i){this.data=pn([t,i]),this.data.height=t.height+1,this.data.leaf=!1,ln(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let s,r=1/0,o=1/0;for(let a=i;a<=n-i;a++){const l=ss(t,0,a,this.toBBox),c=ss(t,a,n,this.toBBox),h=Fy(l,c),u=ua(l)+ua(c);h<r?(r=h,s=a,o=u<o?u:o):h===r&&u<o&&(o=u,s=a)}return s||n-i}_chooseSplitAxis(t,i,n){const s=t.leaf?this.compareMinX:Oy,r=t.leaf?this.compareMinY:Dy,o=this._allDistMargin(t,i,n,s),a=this._allDistMargin(t,i,n,r);o<a&&t.children.sort(s)}_allDistMargin(t,i,n,s){t.children.sort(s);const r=this.toBBox,o=ss(t,0,i,r),a=ss(t,n-i,n,r);let l=dr(o)+dr(a);for(let c=i;c<n-i;c++){const h=t.children[c];rs(o,t.leaf?r(h):h),l+=dr(o)}for(let c=n-i-1;c>=i;c--){const h=t.children[c];rs(a,t.leaf?r(h):h),l+=dr(a)}return l}_adjustParentBBoxes(t,i,n){for(let s=n;s>=0;s--)rs(i[s],t)}_condense(t){for(let i=t.length-1,n;i>=0;i--)t[i].children.length===0?i>0?(n=t[i-1].children,n.splice(n.indexOf(t[i]),1)):this.clear():ln(t[i],this.toBBox)}}function Ly(e,t,i){if(!i)return t.indexOf(e);for(let n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function ln(e,t){ss(e,0,e.children.length,t,e)}function ss(e,t,i,n,s){s||(s=pn(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<i;r++){const o=e.children[r];rs(s,e.leaf?n(o):o)}return s}function rs(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Oy(e,t){return e.minX-t.minX}function Dy(e,t){return e.minY-t.minY}function ua(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function dr(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ky(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Fy(e,t){const i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,r-n)}function fa(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function gr(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function pn(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bh(e,t,i,n,s){const r=[t,i];for(;r.length;){if(i=r.pop(),t=r.pop(),i-t<=n)continue;const o=t+Math.ceil((i-t)/n/2)*n;ng(e,o,t,i,s),r.push(t,o,o,i)}}const ct={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},zs={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Ut={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Ut.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Ut.max=Ut.whitepoint[2].D65;Ut.rgb=function(e,t){t=t||Ut.whitepoint[2].E;var i=e[0]/t[0],n=e[1]/t[1],s=e[2]/t[2],r,o,a;return r=i*3.240969941904521+n*-1.537383177570093+s*-.498610760293,o=i*-.96924363628087+n*1.87596750150772+s*.041555057407175,a=i*.055630079696993+n*-.20397695888897+s*1.056971514242878,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[r*255,o*255,a*255]};zs.xyz=function(e,t){var i=e[0]/255,n=e[1]/255,s=e[2]/255;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var r=i*.41239079926595+n*.35758433938387+s*.18048078840183,o=i*.21263900587151+n*.71516867876775+s*.072192315360733,a=i*.019330818715591+n*.11919477979462+s*.95053215224966;return t=t||Ut.whitepoint[2].E,[r*t[0],o*t[1],a*t[2]]};const oc={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,i){var n,s,r,o,a,l,c,h,u,f,d,g,m;if(r=e[0],o=e[1],a=e[2],r===0)return[0,0,0];var _=.0011070564598794539;return t=t||"D65",i=i||2,u=Ut.whitepoint[i][t][0],f=Ut.whitepoint[i][t][1],d=Ut.whitepoint[i][t][2],g=4*u/(u+15*f+3*d),m=9*f/(u+15*f+3*d),n=o/(13*r)+g||0,s=a/(13*r)+m||0,c=r>8?f*Math.pow((r+16)/116,3):f*r*_,l=c*9*n/(4*s)||0,h=c*(12-3*n-20*s)/(4*s)||0,[l,c,h]}};Ut.luv=function(e,t,i){var n,s,r,o,a,l,c,h,u,f,d,g,m,_=.008856451679035631,p=903.2962962962961;t=t||"D65",i=i||2,u=Ut.whitepoint[i][t][0],f=Ut.whitepoint[i][t][1],d=Ut.whitepoint[i][t][2],g=4*u/(u+15*f+3*d),m=9*f/(u+15*f+3*d),l=e[0],c=e[1],h=e[2],n=4*l/(l+15*c+3*h)||0,s=9*c/(l+15*c+3*h)||0;var x=c/f;return r=x<=_?p*x:116*Math.pow(x,1/3)-16,o=13*r*(n-g),a=13*r*(s-m),[r,o,a]};var sg={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t=e[0],i=e[1],n=e[2],s,r,o;return o=n/360*2*Math.PI,s=i*Math.cos(o),r=i*Math.sin(o),[t,s,r]},xyz:function(e){return oc.xyz(sg.luv(e))}};oc.lchuv=function(e){var t=e[0],i=e[1],n=e[2],s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i),o=r*360/2/Math.PI;return o<0&&(o+=360),[t,s,o]};Ut.lchuv=function(e){return oc.lchuv(Ut.luv(e))};const jh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Wh={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Ny(e){var h,u;var t,i=[],n=1,s;if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(e=String(e).toLowerCase(),jh[e])i=jh[e].slice(),s="rgb";else if(e==="transparent")n=0,s="rgb",i=[0,0,0];else if(e[0]==="#"){var r=e.slice(1),o=r.length,a=o<=4;n=1,a?(i=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(n=parseInt(r[3]+r[3],16)/255)):(i=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(n=parseInt(r[6]+r[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),s="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(e)){var l=t[1];s=l.replace(/a$/,"");var c=s==="cmyk"?4:s==="gray"?1:3;i=t[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=i.shift()),i=i.map(function(f,d){if(f[f.length-1]==="%")return f=parseFloat(f)/100,d===3?f:s==="rgb"?f*255:s[0]==="h"||s[0]==="l"&&!d?f*100:s==="lab"?f*125:s==="lch"?d<2?f*150:f*360:s[0]==="o"&&!d?f:s==="oklab"?f*.4:s==="oklch"?d<2?f*.4:f*360:f;if(s[d]==="h"||d===2&&s[s.length-1]==="h"){if(Wh[f]!==void 0)return Wh[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),n=i.length>c?i.pop():1}else/[0-9](?:\s|\/|,)/.test(e)&&(i=e.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),s=((u=(h=e.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:u.toLowerCase())||"rgb");return{space:s,values:i,alpha:n}}const da={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,i=e[1]/100,n=e[2]/100,s,r,o,a,l,c=0;if(i===0)return l=n*255,[l,l,l];for(r=n<.5?n*(1+i):n+i-n*i,s=2*n-r,a=[0,0,0];c<3;)o=t+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?s+(r-s)*6*o:2*o<1?r:3*o<2?s+(r-s)*(2/3-o)*6:s,a[c++]=l*255;return a}};zs.hsl=function(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255,s=Math.min(t,i,n),r=Math.max(t,i,n),o=r-s,a,l,c;return r===s?a=0:t===r?a=(i-n)/o:i===r?a=2+(n-t)/o:n===r&&(a=4+(t-i)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(s+r)/2,r===s?l=0:c<=.5?l=o/(r+s):l=o/(2-r-s),[a,l*100,c*100]};function zy(e){Array.isArray(e)&&e.raw&&(e=String.raw(...arguments)),e instanceof Number&&(e=+e);var t,i=Ny(e);if(!i.space)return[];const n=i.space[0]==="h"?da.min:zs.min,s=i.space[0]==="h"?da.max:zs.max;return t=Array(3),t[0]=Math.min(Math.max(i.values[0],n[0]),s[0]),t[1]=Math.min(Math.max(i.values[1],n[1]),s[1]),t[2]=Math.min(Math.max(i.values[2],n[2]),s[2]),i.space[0]==="h"&&(t=da.rgb(t)),t.push(Math.min(Math.max(i.alpha,0),1)),t}const ac=[NaN,NaN,NaN,0];function By(e){return typeof e=="string"?e:cc(e)}const jy=1024,$n={};let ga=0;function Wy(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function Uh(e){const t=Ut.lchuv(zs.xyz(e));return t[3]=e[3],t}function Uy(e){const t=Ut.rgb(sg.xyz(e));return t[3]=e[3],t}function lc(e){if(e==="none")return ac;if($n.hasOwnProperty(e))return $n[e];if(ga>=jy){let i=0;for(const n in $n)i++&3||(delete $n[n],--ga)}const t=zy(e);if(t.length!==4)throw new Error('failed to parse "'+e+'" as color');for(const i of t)if(isNaN(i))throw new Error('failed to parse "'+e+'" as color');return rg(t),$n[e]=t,++ga,t}function Fn(e){return Array.isArray(e)?e:lc(e)}function rg(e){return e[0]=Ft(e[0]+.5|0,0,255),e[1]=Ft(e[1]+.5|0,0,255),e[2]=Ft(e[2]+.5|0,0,255),e[3]=Ft(e[3],0,1),e}function cc(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let n=e[2];n!=(n|0)&&(n=n+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+n+","+s+")"}const Ii=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Vy=Ii.includes("firefox"),Hy=Ii.includes("safari")&&!Ii.includes("chrom");Hy&&(Ii.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ii));const Xy=Ii.includes("webkit")&&!Ii.includes("edge"),og=Ii.includes("macintosh"),ag=typeof devicePixelRatio<"u"?devicePixelRatio:1,lg=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,cg=typeof Image<"u"&&Image.prototype.decode,hg=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function se(e,t,i,n){let s;return i&&i.length?s=i.shift():lg?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",n)}let ma;function io(){return ma||(ma=se(1,1)),ma}function hc(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function Vh(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function Gy(e){for(;e.lastChild;)e.lastChild.remove()}function Yy(e,t){const i=e.childNodes;for(let n=0;;++n){const s=i[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){e.appendChild(r);continue}if(!r){e.removeChild(s),--n;continue}e.insertBefore(r,s)}}}function Ky(e,t,i){const n=e;let s=!0,r=!1,o=!1;const a=[qr(n,et.LOAD,function(){o=!0,r||t()})];return n.src&&cg?(r=!0,n.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():i())})):a.push(qr(n,et.ERROR,i)),function(){s=!1,a.forEach(Lt)}}function $y(e,t){return new Promise((i,n)=>{function s(){o(),i(e)}function r(){o(),n(new Error("Image load error"))}function o(){e.removeEventListener("load",s),e.removeEventListener("error",r)}e.addEventListener("load",s),e.addEventListener("error",r)})}function Zy(e,t){return t&&(e.src=t),e.src&&cg?new Promise((i,n)=>e.decode().then(()=>i(e)).catch(s=>e.complete&&e.width?i(e):n(s))):$y(e)}class qy{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const n=this.cache_[i];!(t++&3)&&!n.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,n){const s=_a(t,i,n);return s in this.cache_?this.cache_[s]:null}getPattern(t,i,n){const s=_a(t,i,n);return s in this.patternCache_?this.patternCache_[s]:null}set(t,i,n,s,r){const o=_a(t,i,n),a=o in this.cache_;this.cache_[o]=s,r&&(s.getImageState()===ct.IDLE&&s.load(),s.getImageState()===ct.LOADING?s.ready().then(()=>{this.patternCache_[o]=io().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=io().createPattern(s.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function _a(e,t,i){const n=i?Fn(i):"null";return t+":"+e+":"+n}const Te=new qy;let Zn=null;class ug extends Io{constructor(t,i,n,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=s===void 0?ct.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ct.LOADED){Zn||(Zn=se(1,1,void 0,{willReadFrequently:!0})),Zn.drawImage(this.image_,0,0);try{Zn.getImageData(0,0,1,1),this.tainted_=!1}catch{Zn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(et.CHANGE)}handleImageError_(){this.imageState_=ct.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ct.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],n=se(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ct.IDLE){this.image_||this.initializeImage_(),this.imageState_=ct.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Zy(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==ct.LOADED)return;const i=this.image_,n=se(Math.ceil(i.width*t),Math.ceil(i.height*t)),s=n.canvas;n.scale(t,t),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=By(this.color_),n.fillRect(0,0,s.width/t,s.height/t),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===ct.LOADED||this.imageState_===ct.ERROR)t();else{const i=()=>{(this.imageState_===ct.LOADED||this.imageState_===ct.ERROR)&&(this.removeEventListener(et.CHANGE,i),t())};this.addEventListener(et.CHANGE,i)}})),this.ready_}}function uc(e,t,i,n,s,r){let o=t===void 0?void 0:Te.get(t,i,s);return o||(o=new ug(e,e&&"src"in e?e.src||void 0:t,i,n,s),Te.set(t,i,s,o,r)),r&&o&&!Te.getPattern(t,i,s)&&Te.set(t,i,s,o,r),o}function Hh(e){return e[0]>0&&e[1]>0}function Jy(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function fe(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class Bo{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=fe(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Bo({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return dt()}getImage(t){return dt()}getHitDetectionImage(){return dt()}getPixelRatio(t){return 1}getImageState(){return dt()}getImageSize(){return dt()}getOrigin(){return dt()}getSize(){return dt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=fe(t)}listenImageChange(t){dt()}load(){dt()}unlistenImageChange(t){dt()}ready(){return Promise.resolve()}}function Xh(e){return e?Array.isArray(e)?cc(e):typeof e=="object"&&"src"in e?Qy(e):e:null}function Qy(e){if(!e.offset||!e.size)return Te.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=Te.getPattern(t,void 0,e.color);if(i)return i;const n=Te.get(e.src,"anonymous",null);if(n.getImageState()!==ct.LOADED)return null;const s=se(e.size[0],e.size[1]);return s.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),uc(s.canvas,t,void 0,ct.LOADED,e.color,!0),Te.getPattern(t,void 0,e.color)}const mr="ol-hidden",jo="ol-unselectable",fc="ol-control",Gh="ol-collapsed",Yh="#000",Kh="round",$h="round",tx=10,ex="#000",ix=1,nx=new ui;class Wo extends Bo{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ct.LOADING:ct.LOADED,this.imageState_===ct.LOADING&&this.ready().then(()=>this.imageState_=ct.LOADED),this.render()}clone(){const t=this.getScale(),i=new Wo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-i[0]/n[0],t[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var r,o;const i=(r=this.fill_)==null?void 0:r.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let s=(o=Te.get(n,null,null))==null?void 0:o.getImage(1);if(!s){const a=this.renderOptions_,l=Math.ceil(a.size*t),c=se(l,l);this.draw_(a,c,t),s=c.canvas,Te.set(n,null,null,new ug(s,void 0,null,ct.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let s=this.radius,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const M=s;s=r,r=M}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),h=s-c,u=Math.sqrt(l*l+h*h),f=u/l;if(t==="miter"&&f<=n)return f*i;const d=i/2/f,g=i/2*(h/u),_=Math.sqrt((s+d)*(s+d)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return _*2;const p=s*Math.sin(a),x=Math.sqrt(s*s-p*p),w=r-x,v=Math.sqrt(p*p+w*w)/p;if(v<=n){const M=v*i/2-r-s;return 2*Math.max(_,M)}return _*2}createRenderOptions(){let t=Kh,i=$h,n=0,s=null,r=0,o,a=0;this.stroke_&&(o=Xh(this.stroke_.getColor()??ex),a=this.stroke_.getWidth()??ix,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??$h,t=this.stroke_.getLineCap()??Kh,n=this.stroke_.getMiterLimit()??tx);const l=this.calculateLineJoinSize_(i,a,n),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let s=this.fill_.getColor();s===null&&(s=Yh),i.fillStyle=Xh(s),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=Fn(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(i=se(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const n=this.radius;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/i;for(let a=0;a<i;a++){const l=r+a*o,c=a%2===0?n:s;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Yh,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Uo extends Wo{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new Uo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}}class Qs{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Qs({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=uc(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===ct.IDLE&&i.load(),i.getImageState()===ct.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?Yt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Fn(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Vo{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Vo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class qi{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Zh,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new qi({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Zh,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function sx(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(Rt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let pa=null;function fg(e,t){if(!pa){const i=new Qs({color:"rgba(255,255,255,0.4)"}),n=new Vo({color:"#3399CC",width:1.25});pa=[new qi({image:new Uo({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return pa}function Zh(e){return e.getGeometry()}function qh(e,t,i,n){return i!==void 0&&n!==void 0?[i/e,n/t]:i!==void 0?i/e:n!==void 0?n/t:1}class dc extends Bo{constructor(t){t=t||{};const i=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:n,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Rt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Yt(o)),Rt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Rt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=ct.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?ct.LOADED:ct.IDLE:l=ct.LOADING:l=ct.LOADED),this.color_=t.color!==void 0?Fn(t.color):null,this.iconImage_=uc(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(qh(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(qh(c,h,t.width,t.height))}}clone(){let t,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new dc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const i=this.getDisplacement(),n=this.getScaleArray();return[t[0]-i[0]/n[0],t[1]+i[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==ct.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==ct.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(et.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(et.CHANGE,t)}ready(){return this.iconImage_.ready()}}const rx="#333";class gc{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=fe(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Qs({color:rx}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new gc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=fe(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}let sn=0;const ie=1<<sn++,lt=1<<sn++,le=1<<sn++,Pe=1<<sn++,tn=1<<sn++,os=1<<sn++,_r=Math.pow(2,sn)-1,mc={[ie]:"boolean",[lt]:"number",[le]:"string",[Pe]:"color",[tn]:"number[]",[os]:"size"},ox=Object.keys(mc).map(Number).sort(Ul);function ax(e){return e in mc}function as(e){const t=[];for(const i of ox)ls(e,i)&&t.push(mc[i]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function ls(e,t){return(e&t)===t}function gi(e,t){return e===t}class Nt{constructor(t,i){if(!ax(t))throw new Error(`literal expressions must have a specific type, got ${as(t)}`);this.type=t,this.value=i}}class lx{constructor(t,i,...n){this.type=t,this.operator=i,this.args=n}}function dg(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Vt(e,t,i){switch(typeof e){case"boolean":{if(gi(t,le))return new Nt(le,e?"true":"false");if(!ls(t,ie))throw new Error(`got a boolean, but expected ${as(t)}`);return new Nt(ie,e)}case"number":{if(gi(t,os))return new Nt(os,fe(e));if(gi(t,ie))return new Nt(ie,!!e);if(gi(t,le))return new Nt(le,e.toString());if(!ls(t,lt))throw new Error(`got a number, but expected ${as(t)}`);return new Nt(lt,e)}case"string":{if(gi(t,Pe))return new Nt(Pe,lc(e));if(gi(t,ie))return new Nt(ie,!!e);if(!ls(t,le))throw new Error(`got a string, but expected ${as(t)}`);return new Nt(le,e)}}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(e.length===0)throw new Error("empty expression");if(typeof e[0]=="string")return xx(e,t,i);for(const n of e)if(typeof n!="number")throw new Error("expected an array of numbers");if(gi(t,os)){if(e.length!==2)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new Nt(os,e)}if(gi(t,Pe)){if(e.length===3)return new Nt(Pe,[...e,1]);if(e.length===4)return new Nt(Pe,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!ls(t,tn))throw new Error(`got an array of numbers, but expected ${as(t)}`);return new Nt(tn,e)}const C={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},cx={[C.Get]:Q(tt(1,1/0),Jh),[C.Var]:Q(tt(1,1),hx),[C.Has]:Q(tt(1,1/0),Jh),[C.Id]:Q(ux,cn),[C.Concat]:Q(tt(2,1/0),mt(le)),[C.GeometryType]:Q(fx,cn),[C.LineMetric]:Q(cn),[C.Resolution]:Q(cn),[C.Zoom]:Q(cn),[C.Time]:Q(cn),[C.Any]:Q(tt(2,1/0),mt(ie)),[C.All]:Q(tt(2,1/0),mt(ie)),[C.Not]:Q(tt(1,1),mt(ie)),[C.Equal]:Q(tt(2,2),mt(_r)),[C.NotEqual]:Q(tt(2,2),mt(_r)),[C.GreaterThan]:Q(tt(2,2),mt(lt)),[C.GreaterThanOrEqualTo]:Q(tt(2,2),mt(lt)),[C.LessThan]:Q(tt(2,2),mt(lt)),[C.LessThanOrEqualTo]:Q(tt(2,2),mt(lt)),[C.Multiply]:Q(tt(2,1/0),Qh),[C.Coalesce]:Q(tt(2,1/0),Qh),[C.Divide]:Q(tt(2,2),mt(lt)),[C.Add]:Q(tt(2,1/0),mt(lt)),[C.Subtract]:Q(tt(2,2),mt(lt)),[C.Clamp]:Q(tt(3,3),mt(lt)),[C.Mod]:Q(tt(2,2),mt(lt)),[C.Pow]:Q(tt(2,2),mt(lt)),[C.Abs]:Q(tt(1,1),mt(lt)),[C.Floor]:Q(tt(1,1),mt(lt)),[C.Ceil]:Q(tt(1,1),mt(lt)),[C.Round]:Q(tt(1,1),mt(lt)),[C.Sin]:Q(tt(1,1),mt(lt)),[C.Cos]:Q(tt(1,1),mt(lt)),[C.Atan]:Q(tt(1,2),mt(lt)),[C.Sqrt]:Q(tt(1,1),mt(lt)),[C.Match]:Q(tt(4,1/0),tu,gx),[C.Between]:Q(tt(3,3),mt(lt)),[C.Interpolate]:Q(tt(6,1/0),tu,mx),[C.Case]:Q(tt(3,1/0),dx,_x),[C.In]:Q(tt(2,2),px),[C.Number]:Q(tt(1,1/0),mt(_r)),[C.String]:Q(tt(1,1/0),mt(_r)),[C.Array]:Q(tt(1,1/0),mt(lt)),[C.Color]:Q(tt(1,4),mt(lt)),[C.Band]:Q(tt(1,3),mt(lt)),[C.Palette]:Q(tt(2,2),yx),[C.ToString]:Q(tt(1,1),mt(ie|lt|le|Pe))};function Jh(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=e[r+1];switch(typeof o){case"number":{s[r]=new Nt(lt,o);break}case"string":{s[r]=new Nt(le,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}r===0&&i.properties.add(String(o))}return s}function hx(e,t,i){const n=e[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new Nt(le,n)]}function ux(e,t,i){i.featureId=!0}function fx(e,t,i){i.geometryType=!0}function cn(e,t,i){const n=e[0];if(e.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function tt(e,t){return function(i,n,s){const r=i[0],o=i.length-1;if(e===t){if(o!==e){const a=e===1?"":"s";throw new Error(`expected ${e} argument${a} for ${r}, got ${o}`)}}else if(o<e||o>t){const a=t===1/0?`${e} or more`:`${e} to ${t}`;throw new Error(`expected ${a} arguments for ${r}, got ${o}`)}}}function Qh(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=Vt(e[r+1],t,i);s[r]=o}return s}function mt(e){return function(t,i,n){const s=t.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=Vt(t[o+1],e,n);r[o]=a}return r}}function dx(e,t,i){const n=e[0],s=e.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function tu(e,t,i){const n=e[0],s=e.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function gx(e,t,i){const n=e.length-1,s=le|lt|ie,r=Vt(e[1],s,i),o=Vt(e[e.length-1],t,i),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=Vt(e[l+2],r.type,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Vt(e[l+3],o.type,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[r,...a,o]}function mx(e,t,i){const n=e[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);s=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new Nt(lt,s);let o;try{o=Vt(e[2],lt,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(e.length-3);for(let l=0;l<a.length;l+=2){try{const c=Vt(e[l+3],lt,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Vt(e[l+4],t,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[r,o,...a]}function _x(e,t,i){const n=Vt(e[e.length-1],t,i),s=new Array(e.length-1);for(let r=0;r<s.length-1;r+=2){try{const o=Vt(e[r+1],ie,i);s[r]=o}catch(o){throw new Error(`failed to parse argument ${r} of case expression: ${o.message}`)}try{const o=Vt(e[r+2],n.type,i);s[r+1]=o}catch(o){throw new Error(`failed to parse argument ${r+1} of case expression: ${o.message}`)}}return s[s.length-1]=n,s}function px(e,t,i){let n=e[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=le}else s=lt;const r=new Array(n.length);for(let a=0;a<r.length;a++)try{const l=Vt(n[a],s,i);r[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Vt(e[1],s,i),...r]}function yx(e,t,i){let n;try{n=Vt(e[1],lt,i)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const s=e[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let o=0;o<r.length;o++){let a;try{a=Vt(s[o],Pe,i)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Nt))throw new Error(`the palette color at index ${o} must be a literal value`);r[o]=a}return[n,...r]}function Q(...e){return function(t,i,n){const s=t[0];let r;for(let o=0;o<e.length;o++){const a=e[o](t,i,n);if(o==e.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");r=a}}return new lx(i,s,...r)}}function xx(e,t,i){const n=e[0],s=cx[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(e,t,i)}function gg(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return gg(e.getGeometries()[0]);default:return""}}function mg(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function fi(e,t,i){const n=Vt(e,t,i);return ze(n)}function ze(e,t){if(e instanceof Nt){if(e.type===Pe&&typeof e.value=="string"){const n=lc(e.value);return function(){return n}}return function(){return e.value}}const i=e.operator;switch(i){case C.Number:case C.String:case C.Coalesce:return bx(e);case C.Get:case C.Var:case C.Has:return Ex(e);case C.Id:return n=>n.featureId;case C.GeometryType:return n=>n.geometryType;case C.Concat:{const n=e.args.map(s=>ze(s));return s=>"".concat(...n.map(r=>r(s).toString()))}case C.Resolution:return n=>n.resolution;case C.Any:case C.All:case C.Between:case C.In:case C.Not:return wx(e);case C.Equal:case C.NotEqual:case C.LessThan:case C.LessThanOrEqualTo:case C.GreaterThan:case C.GreaterThanOrEqualTo:return vx(e);case C.Multiply:case C.Divide:case C.Add:case C.Subtract:case C.Clamp:case C.Mod:case C.Pow:case C.Abs:case C.Floor:case C.Ceil:case C.Round:case C.Sin:case C.Cos:case C.Atan:case C.Sqrt:return Tx(e);case C.Case:return Rx(e);case C.Match:return Cx(e);case C.Interpolate:return Mx(e);case C.ToString:return Sx(e);default:throw new Error(`Unsupported operator ${i}`)}}function bx(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case C.Coalesce:return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case C.Number:case C.String:return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a===i)return a}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}function Ex(e,t){const n=e.args[0].value;switch(e.operator){case C.Get:return s=>{const r=e.args;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a){const h=r[a].value;o=o[h]}return o};case C.Var:return s=>s.variables[n];case C.Has:return s=>{const r=e.args;if(!(n in s.properties))return!1;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a){const h=r[a].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function vx(e,t){const i=e.operator,n=ze(e.args[0]),s=ze(e.args[1]);switch(i){case C.Equal:return r=>n(r)===s(r);case C.NotEqual:return r=>n(r)!==s(r);case C.LessThan:return r=>n(r)<s(r);case C.LessThanOrEqualTo:return r=>n(r)<=s(r);case C.GreaterThan:return r=>n(r)>s(r);case C.GreaterThanOrEqualTo:return r=>n(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${i}`)}}function wx(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case C.Any:return r=>{for(let o=0;o<n;++o)if(s[o](r))return!0;return!1};case C.All:return r=>{for(let o=0;o<n;++o)if(!s[o](r))return!1;return!0};case C.Between:return r=>{const o=s[0](r),a=s[1](r),l=s[2](r);return o>=a&&o<=l};case C.In:return r=>{const o=s[0](r);for(let a=1;a<n;++a)if(o===s[a](r))return!0;return!1};case C.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${i}`)}}function Tx(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case C.Multiply:return r=>{let o=1;for(let a=0;a<n;++a)o*=s[a](r);return o};case C.Divide:return r=>s[0](r)/s[1](r);case C.Add:return r=>{let o=0;for(let a=0;a<n;++a)o+=s[a](r);return o};case C.Subtract:return r=>s[0](r)-s[1](r);case C.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case C.Mod:return r=>s[0](r)%s[1](r);case C.Pow:return r=>Math.pow(s[0](r),s[1](r));case C.Abs:return r=>Math.abs(s[0](r));case C.Floor:return r=>Math.floor(s[0](r));case C.Ceil:return r=>Math.ceil(s[0](r));case C.Round:return r=>Math.round(s[0](r));case C.Sin:return r=>Math.sin(s[0](r));case C.Cos:return r=>Math.cos(s[0](r));case C.Atan:return n===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case C.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${i}`)}}function Rx(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{for(let r=0;r<i-1;r+=2)if(n[r](s))return n[r+1](s);return n[i-1](s)}}function Cx(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{const r=n[0](s);for(let o=1;o<i;o+=2)if(r===n[o](s))return n[o+1](s);return n[i-1](s)}}function Mx(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{const r=n[0](s),o=n[1](s);let a,l;for(let c=2;c<i;c+=2){const h=n[c](s);let u=n[c+1](s);const f=Array.isArray(u);if(f&&(u=Wy(u)),h>=o)return c===2?u:f?Ax(r,o,a,l,h,u):cs(r,o,a,l,h,u);a=h,l=u}return l}}function Sx(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case C.ToString:return r=>{const o=s[0](r);return e.args[0].type===Pe?cc(o):o.toString()};default:throw new Error(`Unsupported convert operator ${i}`)}}function cs(e,t,i,n,s,r){const o=s-i;if(o===0)return n;const a=t-i,l=e===1?a/o:(Math.pow(e,a)-1)/(Math.pow(e,o)-1);return n+l*(r-n)}function Ax(e,t,i,n,s,r){if(s-i===0)return n;const a=Uh(n),l=Uh(r);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[cs(e,t,i,a[0],s,l[0]),cs(e,t,i,a[1],s,l[1]),a[2]+cs(e,t,i,0,s,c),cs(e,t,i,n[3],s,r[3])];return rg(Uy(h))}function Ix(e){return!0}function Px(e){const t=dg(),i=Lx(e,t),n=mg();return function(s,r){if(n.properties=s.getPropertiesInternal(),n.resolution=r,t.featureId){const o=s.getId();o!==void 0?n.featureId=o:n.featureId=null}return t.geometryType&&(n.geometryType=gg(s.getGeometry())),i(n)}}function eu(e){const t=dg(),i=e.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=sl(e[o],t);const s=mg(),r=new Array(i);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,t.featureId){const c=o.getId();c!==void 0?s.featureId=c:s.featureId=null}let l=0;for(let c=0;c<i;++c){const h=n[c](s);h&&(r[l]=h,l+=1)}return r.length=l,r}}function Lx(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s){const r=e[s],o="filter"in r?fi(r.filter,ie,t):Ix;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=sl(r.style[c],t)}else a=[sl(r.style,t)];n[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<i;++a){const l=n[a].filter;if(l(s)&&!(e[a].else&&o)){o=!0;for(const c of n[a].styles){const h=c(s);h&&r.push(h)}}}return r}}function sl(e,t){const i=Bs(e,"",t),n=js(e,"",t),s=Ox(e,t),r=Dx(e,t),o=ce(e,"z-index",t);if(!i&&!n&&!s&&!r&&!Id(e))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const a=new qi;return function(l){let c=!0;if(i){const h=i(l);h&&(c=!1),a.setFill(h)}if(n){const h=n(l);h&&(c=!1),a.setStroke(h)}if(s){const h=s(l);h&&(c=!1),a.setText(h)}if(r){const h=r(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function Bs(e,t,i){let n;if(t+"fill-pattern-src"in e)n=zx(e,t+"fill-",i);else{if(e[t+"fill-color"]==="none")return r=>null;n=_c(e,t+"fill-color",i)}if(!n)return null;const s=new Qs;return function(r){const o=n(r);return o===ac?null:(s.setColor(o),s)}}function js(e,t,i){const n=ce(e,t+"stroke-width",i),s=_c(e,t+"stroke-color",i);if(!n&&!s)return null;const r=ri(e,t+"stroke-line-cap",i),o=ri(e,t+"stroke-line-join",i),a=_g(e,t+"stroke-line-dash",i),l=ce(e,t+"stroke-line-dash-offset",i),c=ce(e,t+"stroke-miter-limit",i),h=new Vo;return function(u){if(s){const f=s(u);if(f===ac)return null;h.setColor(f)}if(n&&h.setWidth(n(u)),r){const f=r(u);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(f)}if(o){const f=o(u);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(f)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function Ox(e,t){const i="text-",n=ri(e,i+"value",t);if(!n)return null;const s=Bs(e,i,t),r=Bs(e,i+"background-",t),o=js(e,i,t),a=js(e,i+"background-",t),l=ri(e,i+"font",t),c=ce(e,i+"max-angle",t),h=ce(e,i+"offset-x",t),u=ce(e,i+"offset-y",t),f=An(e,i+"overflow",t),d=ri(e,i+"placement",t),g=ce(e,i+"repeat",t),m=Ho(e,i+"scale",t),_=An(e,i+"rotate-with-view",t),p=ce(e,i+"rotation",t),x=ri(e,i+"align",t),w=ri(e,i+"justify",t),b=ri(e,i+"baseline",t),v=An(e,i+"keep-upright",t),M=_g(e,i+"padding",t),P=Xo(e,i+"declutter-mode"),R=new gc({declutterMode:P});return function(L){if(R.setText(n(L)),s&&R.setFill(s(L)),r&&R.setBackgroundFill(r(L)),o&&R.setStroke(o(L)),a&&R.setBackgroundStroke(a(L)),l&&R.setFont(l(L)),c&&R.setMaxAngle(c(L)),h&&R.setOffsetX(h(L)),u&&R.setOffsetY(u(L)),f&&R.setOverflow(f(L)),d){const S=d(L);if(S!=="point"&&S!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(S)}if(g&&R.setRepeat(g(L)),m&&R.setScale(m(L)),_&&R.setRotateWithView(_(L)),p&&R.setRotation(p(L)),x){const S=x(L);if(S!=="left"&&S!=="center"&&S!=="right"&&S!=="end"&&S!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(S)}if(w){const S=w(L);if(S!=="left"&&S!=="right"&&S!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(S)}if(b){const S=b(L);if(S!=="bottom"&&S!=="top"&&S!=="middle"&&S!=="alphabetic"&&S!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(S)}return M&&R.setPadding(M(L)),v&&R.setKeepUpright(v(L)),R}}function Dx(e,t){return"icon-src"in e?kx(e,t):"shape-points"in e?Fx(e,t):"circle-radius"in e?Nx(e,t):null}function kx(e,t){const i="icon-",n=i+"src",s=pg(e[n],n),r=no(e,i+"anchor",t),o=Ho(e,i+"scale",t),a=ce(e,i+"opacity",t),l=no(e,i+"displacement",t),c=ce(e,i+"rotation",t),h=An(e,i+"rotate-with-view",t),u=nu(e,i+"anchor-origin"),f=su(e,i+"anchor-x-units"),d=su(e,i+"anchor-y-units"),g=Ux(e,i+"color"),m=jx(e,i+"cross-origin"),_=Wx(e,i+"offset"),p=nu(e,i+"offset-origin"),x=so(e,i+"width"),w=so(e,i+"height"),b=Bx(e,i+"size"),v=Xo(e,i+"declutter-mode"),M=new dc({src:s,anchorOrigin:u,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:w,width:x,size:b,declutterMode:v});return function(P){return a&&M.setOpacity(a(P)),l&&M.setDisplacement(l(P)),c&&M.setRotation(c(P)),h&&M.setRotateWithView(h(P)),o&&M.setScale(o(P)),r&&M.setAnchor(r(P)),M}}function Fx(e,t){const i="shape-",n=i+"points",s=i+"radius",r=rl(e[n],n),o=rl(e[s],s),a=Bs(e,i,t),l=js(e,i,t),c=Ho(e,i+"scale",t),h=no(e,i+"displacement",t),u=ce(e,i+"rotation",t),f=An(e,i+"rotate-with-view",t),d=so(e,i+"radius2"),g=so(e,i+"angle"),m=Xo(e,i+"declutter-mode"),_=new Wo({points:r,radius:o,radius2:d,angle:g,declutterMode:m});return function(p){return a&&_.setFill(a(p)),l&&_.setStroke(l(p)),h&&_.setDisplacement(h(p)),u&&_.setRotation(u(p)),f&&_.setRotateWithView(f(p)),c&&_.setScale(c(p)),_}}function Nx(e,t){const i="circle-",n=Bs(e,i,t),s=js(e,i,t),r=ce(e,i+"radius",t),o=Ho(e,i+"scale",t),a=no(e,i+"displacement",t),l=ce(e,i+"rotation",t),c=An(e,i+"rotate-with-view",t),h=Xo(e,i+"declutter-mode"),u=new Uo({radius:5,declutterMode:h});return function(f){return r&&u.setRadius(r(f)),n&&u.setFill(n(f)),s&&u.setStroke(s(f)),a&&u.setDisplacement(a(f)),l&&u.setRotation(l(f)),c&&u.setRotateWithView(c(f)),o&&u.setScale(o(f)),u}}function ce(e,t,i){if(!(t in e))return;const n=fi(e[t],lt,i);return function(s){return rl(n(s),t)}}function ri(e,t,i){if(!(t in e))return null;const n=fi(e[t],le,i);return function(s){return pg(n(s),t)}}function zx(e,t,i){const n=ri(e,t+"pattern-src",i),s=iu(e,t+"pattern-offset",i),r=iu(e,t+"pattern-size",i),o=_c(e,t+"color",i);return function(a){return{src:n(a),offset:s&&s(a),size:r&&r(a),color:o&&o(a)}}}function An(e,t,i){if(!(t in e))return null;const n=fi(e[t],ie,i);return function(s){const r=n(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function _c(e,t,i){if(!(t in e))return null;const n=fi(e[t],Pe,i);return function(s){return yg(n(s),t)}}function _g(e,t,i){if(!(t in e))return null;const n=fi(e[t],tn,i);return function(s){return tr(n(s),t)}}function no(e,t,i){if(!(t in e))return null;const n=fi(e[t],tn,i);return function(s){const r=tr(n(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function iu(e,t,i){if(!(t in e))return null;const n=fi(e[t],tn,i);return function(s){return xg(n(s),t)}}function Ho(e,t,i){if(!(t in e))return null;const n=fi(e[t],tn|lt,i);return function(s){return Vx(n(s),t)}}function so(e,t){const i=e[t];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}}function Bx(e,t){const i=e[t];if(i!==void 0){if(typeof i=="number")return fe(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return i}}function jx(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}}function nu(e,t){const i=e[t];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function su(e,t){const i=e[t];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return i}}function Wx(e,t){const i=e[t];if(i!==void 0)return tr(i,t)}function Xo(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function Ux(e,t){const i=e[t];if(i!==void 0)return yg(i,t)}function tr(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const i=e.length;for(let n=0;n<i;++n)if(typeof e[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function pg(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function rl(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function yg(e,t){if(typeof e=="string")return e;const i=tr(e,t),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}function xg(e,t){const i=tr(e,t);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return i}function Vx(e,t){return typeof e=="number"?e:xg(e,t)}const ru={RENDER_ORDER:"renderOrder"};class Hx extends zo{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ru.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,i){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new Py(9)),this.getRenderer().renderDeclutter(t,i)}setRenderOrder(t){this.set(ru.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?fg:t;const i=Xx(t);this.styleFunction_=t===null?void 0:sx(i),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function Xx(e){if(e===void 0)return fg;if(!e)return null;if(typeof e=="function"||e instanceof qi)return e;if(!Array.isArray(e))return eu([e]);if(e.length===0)return[];const t=e.length,i=e[0];if(i instanceof qi){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!(o instanceof qi))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in i){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return Px(s)}return eu(e)}class Gx extends Co{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){dt()}calculateMatrices2D(t){const i=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;ks(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Gd(s,n)}forEachFeatureAtCoordinate(t,i,n,s,r,o,a,l){let c;const h=i.viewState;function u(b,v,M,P){return r.call(o,v,b?M:null,P)}const f=h.projection,d=R0(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&s){const b=f.getExtent(),v=Tt(b);g.push([-v,0],[v,0])}const m=i.layerStatesArray,_=m.length,p=[],x=[];for(let b=0;b<g.length;b++)for(let v=_-1;v>=0;--v){const M=m[v],P=M.layer;if(P.hasRenderer()&&rc(M,h)&&a.call(l,P)){const R=P.getRenderer(),L=P.getSource();if(R&&L){const S=L.getWrapX()?d:t,B=u.bind(null,M.managed);x[0]=S[0]+g[b][0],x[1]=S[1]+g[b][1],c=R.forEachFeatureAtCoordinate(x,i,n,B,p)}if(c)return c}}if(p.length===0)return;const w=1/p.length;return p.forEach((b,v)=>b.distanceSq+=v*w),p.sort((b,v)=>b.distanceSq-v.distanceSq),p.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(t,i,n,s,r,o){return this.forEachFeatureAtCoordinate(t,i,n,s,$r,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){dt()}scheduleExpireIconCache(t){Te.canExpireCache()&&t.postRenderFunctions.push(Yx)}}function Yx(e,t){Te.expire()}class bg extends Di{constructor(t,i,n,s){super(t),this.inversePixelTransform=i,this.frameState=n,this.context=s}}class Kx extends Gx{constructor(t){super(t),this.fontChangeListenerKey_=xt(nx,Ls.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=jo+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){const n=this.getMap();if(n.hasListener(t)){const s=new bg(t,void 0,i);n.dispatchEvent(s)}}disposeInternal(){Lt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent($e.PRECOMPOSE,t);const i=t.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);i.some(a=>a.layer instanceof Hx&&a.layer.getDeclutter())&&(t.declutter={});const s=t.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,l=i.length;a<l;++a){const c=i[a];t.layerIndex=a;const h=c.layer,u=h.getSourceState();if(!rc(c,s)||u!="ready"&&u!="undefined"){h.unrender();continue}const f=h.render(t,o);f&&(f!==o&&(this.children_.push(f),o=f),r.push(c))}this.declutter(t,r),Yy(this.element_,this.children_),this.dispatchRenderEvent($e.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,i){if(t.declutter){for(let n=i.length-1;n>=0;--n){const s=i[n],r=s.layer;r.getDeclutter()&&r.renderDeclutter(t,s)}i.forEach(n=>n.layer.renderDeferred(t))}}}class Ei extends Di{constructor(t,i){super(t),this.layer=i}}const ya={LAYERS:"layers"};class Wn extends ig{constructor(t){t=t||{};const i=Object.assign({},t);delete i.layers;let n=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ya.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new li(n.slice(),{unique:!0}):Rt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new li(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(xt(t,we.ADD,this.handleLayersAdd_,this),xt(t,we.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Lt);Ao(this.listenerKeys_);const i=t.getArray();for(let n=0,s=i.length;n<s;n++){const r=i[n];this.registerLayerListeners_(r),this.dispatchEvent(new Ei("addlayer",r))}this.changed()}registerLayerListeners_(t){const i=[xt(t,Ls.PROPERTYCHANGE,this.handleLayerChange_,this),xt(t,et.CHANGE,this.handleLayerChange_,this)];t instanceof Wn&&i.push(xt(t,"addlayer",this.handleLayerGroupAdd_,this),xt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Yt(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new Ei("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ei("removelayer",t.layer))}handleLayersAdd_(t){const i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new Ei("addlayer",i)),this.changed()}handleLayersRemove_(t){const i=t.element,n=Yt(i);this.listenerKeys_[n].forEach(Lt),delete this.listenerKeys_[n],this.dispatchEvent(new Ei("removelayer",i)),this.changed()}getLayers(){return this.get(ya.LAYERS)}setLayers(t){const i=this.getLayers();if(i){const n=i.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new Ei("removelayer",n[s]))}this.set(ya.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){const i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(i)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,a=i.length;o<a;o++){const l=i[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Oe(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return i}getSourceState(){return"ready"}}class yn extends Di{constructor(t,i,n){super(t),this.map=i,this.frameState=n!==void 0?n:null}}class pi extends yn{constructor(t,i,n,s,r,o){super(t,i,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ot={SINGLECLICK:"singleclick",CLICK:et.CLICK,DBLCLICK:et.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ol={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class $x extends Io{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=xt(n,ol.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=xt(n,ol.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(et.TOUCHMOVE,this.boundHandleTouchMove_,hg?{passive:!1}:!1)}emulateClick_(t){let i=new pi(Ot.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new pi(Ot.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new pi(Ot.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const i=t,n=i.pointerId;if(i.type==Ot.POINTERUP||i.type==Ot.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==i.target){delete this.trackedTouches_[s];break}}else(i.type==Ot.POINTERDOWN||i.type==Ot.POINTERMOVE)&&(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const i=new pi(Ot.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const i=new pi(Ot.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(xt(n,Ot.POINTERMOVE,this.handlePointerMove_,this),xt(n,Ot.POINTERUP,this.handlePointerUp_,this),xt(this.element_,Ot.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(xt(this.element_.getRootNode(),Ot.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const i=new pi(Ot.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new pi(Ot.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){const i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(et.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const yi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ht={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ro=1/0;class Zx{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ao(this.queuedElements_)}dequeue(){const t=this.elements_,i=this.priorities_,n=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){Rt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(t);return i!=ro?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const i=this.elements_,n=this.priorities_,s=i.length,r=i[t],o=n[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<s&&n[c]<n[l]?c:l;i[t]=i[h],n[t]=n[h],t=h}i[t]=r,n[t]=o,this.siftDown_(a,t)}siftDown_(t,i){const n=this.elements_,s=this.priorities_,r=n[i],o=s[i];for(;i>t;){const a=this.getParentIndex_(i);if(s[a]>o)n[i]=n[a],s[i]=s[a],i=a;else break}n[i]=r,s[i]=o}reprioritize(){const t=this.priorityFunction_,i=this.elements_,n=this.priorities_;let s=0;const r=i.length;let o,a,l;for(a=0;a<r;++a)o=i[a],l=t(o),l==ro?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,i[s++]=o);i.length=s,n.length=s,this.heapify_()}}const V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class qx extends Zx{constructor(t,i){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const i=super.enqueue(t);return i&&t[0].addEventListener(et.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const i=t.target,n=i.getState();if(n===V.LOADED||n===V.ERROR||n===V.EMPTY){n!==V.ERROR&&i.removeEventListener(et.CHANGE,this.boundHandleTileChange_);const s=i.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n=0;for(;this.tilesLoading_<t&&n<i&&this.getCount()>0;){const s=this.dequeue()[0],r=s.getKey();s.getState()===V.IDLE&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,s.load())}}}function Jx(e,t,i,n,s){if(!e||!(i in e.wantedTiles)||!e.wantedTiles[i][t.getKey()])return ro;const r=e.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class pc extends ui{constructor(t){super();const i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var i;this.map_&&((i=this.element)==null||i.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Lt(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){const n=this.target_??t.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==Zr&&this.listenerKeys.push(xt(t,yi.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Qx extends pc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const i=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:i+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(et.CLICK,this.handleClick_.bind(this),!1);const c=i+" "+jo+" "+fc+(this.collapsed_&&this.collapsible_?" "+Gh:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(s=>s.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!i.some(r=>{var o;return((o=r.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const i=await Promise.all(this.collectSourceAttributions_(t).map(s=>Jp(()=>s))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Mo(i,this.renderedAttributions_)){Gy(this.ulElement_);for(let s=0,r=i.length;s<r;++s){const o=document.createElement("li");o.innerHTML=i[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Gh),this.collapsed_?Vh(this.collapseLabel_,this.label_):Vh(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class tb extends pc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const i=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=i+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(et.CLICK,this.handleClick_.bind(this),!1);const a=i+" "+jo+" "+fc,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(mr)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const i=this.getMap().getView();if(!i)return;const n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:jn}):i.setRotation(0))}render(t){const i=t.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(mr);!r&&n===0?this.element.classList.add(mr):r&&n!==0&&this.element.classList.remove(mr)}this.label_.style.transform=s}this.rotation_=n}}class eb extends pc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const i=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(et.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(et.CLICK,this.handleClick_.bind(this,-n),!1);const f=i+" "+jo+" "+fc,d=this.element;d.className=f,d.appendChild(h),d.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:jn})):n.setZoom(r)}}}function ib(e){e=e||{};const t=new li;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new eb(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new tb(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new Qx(e.attributionOptions)),t}const ou={ACTIVE:"active"};let er=class extends ui{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ou.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(ou.ACTIVE,t)}setMap(t){this.map_=t}};function nb(e,t,i){const n=e.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:i!==void 0?i:250,easing:iy,center:e.getConstrainedCenter(s)})}}function yc(e,t,i,n){const s=e.getZoom();if(s===void 0)return;const r=e.getConstrainedZoom(s+t),o=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:i,duration:n!==void 0?n:250,easing:jn})}class sb extends er{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==Ot.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();yc(a,o,r,this.duration_),n.preventDefault(),i=!0}return!i}}class ir extends er{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ot.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ot.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Ot.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==Ot.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function xc(e){const t=e.length;let i=0,n=0;for(let s=0;s<t;s++)i+=e[s].clientX,n+=e[s].clientY;return{clientX:i/t,clientY:n/t}}function al(e){const t=arguments;return function(i){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](i),!!n);++s);return n}}const rb=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ob=function(e){const t=e.map.getTargetElement(),i=t.getRootNode(),n=e.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):t.contains(n)},Eg=function(e){const t=e.map.getTargetElement(),i=t.getRootNode();return(i instanceof ShadowRoot?i.host:t).hasAttribute("tabindex")?ob(e):!0},ab=$r,vg=function(e){const t=e.originalEvent;return t.button==0&&!(Xy&&og&&t.ctrlKey)},wg=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},lb=function(e){const t=e.originalEvent;return og?t.metaKey:t.ctrlKey},cb=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Tg=function(e){const t=e.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},xa=function(e){const t=e.originalEvent;return Rt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},hb=function(e){const t=e.originalEvent;return Rt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class ub extends ir{constructor(t){super({stopDown:So}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:al(wg,hb);this.condition_=t.onFocusOnly?al(Eg,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,s=i.getEventPixel(xc(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();T0(r,a.getResolution()),Kl(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=i.getPixelFromCoordinateInternal(o),l=i.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:jn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class fb extends ir{constructor(t){t=t||{},super({stopDown:So}),this.condition_=t.condition?t.condition:rb,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!xa(t))return;const i=t.map,n=i.getView();if(n.getConstraints().rotation===ic)return;const s=i.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return xa(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return xa(t)&&vg(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class db extends Co{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,i=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],i[0])+n,s.top=Math.min(t[1],i[1])+n,s.width=Math.abs(i[0]-t[0])+n,s.height=Math.abs(i[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,i=this.endPixel_,s=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Ns([s])}getGeometry(){return this.geometry_}}const hn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class qn extends Di{constructor(t,i,n){super(t),this.coordinate=i,this.mapBrowserEvent=n}}class gb extends ir{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new db(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??vg,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,n){const s=n[0]-i[0],r=n[1]-i[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new qn(hn.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new qn(i?hn.BOXEND:hn.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new qn(hn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new qn(hn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new qn(hn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class mb extends gb{constructor(t){t=t||{};const i=t.condition?t.condition:cb;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:jn})}}const Bi={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class _b extends er{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return wg(i)&&Tg(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==et.KEYDOWN){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==Bi.DOWN||s==Bi.LEFT||s==Bi.RIGHT||s==Bi.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==Bi.DOWN?c=-a:s==Bi.LEFT?l=-a:s==Bi.RIGHT?l=a:c=a;const h=[l,c];Kl(h,o.getRotation()),nb(o,h,this.duration_),n.preventDefault(),i=!0}}return!i}}class pb extends er{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(i){return!lb(i)&&Tg(i)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==et.KEYDOWN||t.type==et.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();yc(a,o,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}class yb{constructor(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[i+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class xb extends er{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const i=t.condition?t.condition:ab;this.condition_=t.onFocusOnly?al(Eg,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==et.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let r;if(t.type==et.WHEEL&&(r=s.deltaY,Vy&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=ag),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const i=t.getView();i.getAnimating()&&i.cancelAnimations();let n=-Ft(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),yc(i,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class bb extends ir{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=So),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==ic&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(xc(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class Eb extends ir{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=So),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(i=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(xc(this.targetPointers))),l.render(),c.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function vb(e){e=e||{};const t=new li,i=new yb(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new fb),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new sb({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new ub({onFocusOnly:e.onFocusOnly,kinetic:i})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new bb),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new Eb({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new _b),t.push(new pb({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new xb({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new mb({duration:e.zoomDuration})),t}function Rg(e){if(e instanceof zo){e.setMapInternal(null);return}e instanceof Wn&&e.getLayers().forEach(Rg)}function Cg(e,t){if(e instanceof zo){e.setMapInternal(t);return}if(e instanceof Wn){const i=e.getLayers().getArray();for(let n=0,s=i.length;n<s;++n)Cg(i[n],t)}}let wb=class extends ui{constructor(t){super(),t=t||{},this.on,this.once,this.un;const i=Tb(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:ag,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Sn(),this.pixelToCoordinateTransform_=Sn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=i.controls||ib(),this.interactions=i.interactions||vb({onFocusOnly:!0}),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new qx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ht.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ht.VIEW,this.handleViewChanged_),this.addChangeListener(Ht.SIZE,this.handleSizeChanged_),this.addChangeListener(Ht.TARGET,this.handleTargetChanged_),this.setProperties(i.values);const n=this;t.view&&!(t.view instanceof Ke)&&t.view.then(function(s){n.setView(new Ke(s))}),this.controls.addEventListener(we.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(we.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(we.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(we.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(we.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(we.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Cg(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:$r,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,i,null,o,null)}getFeaturesAtPixel(t,i){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},i),n}getAllLayers(){const t=[];function i(n){n.forEach(function(s){s instanceof Wn?i(s.getLayers()):t.push(s)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.layerFilter!==void 0?i.layerFilter:$r,r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(Ht.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return nl(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const i=this.frameState_;return i?pe(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ht.LAYERGROUP)}setLayers(t){const i=this.getLayerGroup();if(t instanceof li){i.setLayers(t);return}const n=i.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const s=t[i];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const i=ti(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){const i=this.frameState_;return i?pe(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ht.SIZE)}getView(){return this.get(Ht.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,n,s){return Jx(this.frameState_,t,i,n,s)}handleBrowserEvent(t,i){i=i||t.type;const n=new pi(i,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const i=t.originalEvent,n=i.type;if(n===ol.POINTERDOWN||n===et.WHEEL||n===et.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=i.target,a=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===s?s.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[ve.ANIMATING]||o[ve.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}i.getTilesLoading()<s&&(i.reprioritize(),i.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener($e.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent($e.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new yn(yi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new yn(yi.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Lt(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(et.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(et.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Kx(this)),this.mapBrowserEventHandler_=new $x(this,this.moveTolerance_);for(const r in Ot)this.mapBrowserEventHandler_.addEventListener(Ot[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(et.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(et.WHEEL,this.boundHandleBrowserEvent_,hg?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const r=i.getRootNode();n=r instanceof ShadowRoot?r.host:i}this.targetChangeHandlerKeys_=[xt(n,et.KEYDOWN,this.handleBrowserEvent,this),xt(n,et.KEYPRESS,this.handleBrowserEvent,this)];const s=i.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(i)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=xt(t,Ls.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=xt(t,et.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ei("addlayer",t)),this.layerGroupPropertyListenerKeys_=[xt(t,Ls.PROPERTYCHANGE,this.render,this),xt(t,et.CHANGE,this.render,this),xt(t,"addlayer",this.handleLayerAdd_,this),xt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const s=t[i].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Rg(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const i=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(i!==void 0&&Hh(i)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Qa(a.center,a.resolution,a.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Yt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Qa(a.nextCenter,a.nextResolution,l,i)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!ko(this.previousExtent_)&&!Ja(r.extent,this.previousExtent_))&&(this.dispatchEvent(new yn(yi.MOVESTART,this,s)),this.previousExtent_=Po(this.previousExtent_)),this.previousExtent_&&!r.viewHints[ve.ANIMATING]&&!r.viewHints[ve.INTERACTING]&&!Ja(r.extent,this.previousExtent_)&&(this.dispatchEvent(new yn(yi.MOVEEND,this,r)),h0(r.extent,this.previousExtent_))),this.dispatchEvent(new yn(yi.POSTRENDER,this,r)),this.renderComplete_=(this.hasListener(yi.LOADSTART)||this.hasListener(yi.LOADEND)||this.hasListener($e.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const i=this.getLayerGroup();i&&this.handleLayerRemove_(new Ei("removelayer",i)),this.set(Ht.LAYERGROUP,t)}setSize(t){this.set(Ht.SIZE,t)}setTarget(t){this.set(Ht.TARGET,t)}setView(t){if(!t||t instanceof Ke){this.set(Ht.VIEW,t);return}this.set(Ht.VIEW,new Ke);const i=this;t.then(function(n){i.setView(new Ke(n))})}updateSize(){const t=this.getTargetElement();let i;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(i=[Math.max(0,r),Math.max(0,o)],!Hh(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Vd("No map visible because the map container's width or height are 0."))}const n=this.getSize();i&&(!n||!Mo(i,n))&&(this.setSize(i),this.updateViewportSize_(i))}updateViewportSize_(t){const i=this.getView();i&&i.setViewportSize(t)}};function Tb(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Wn({layers:e.layers});i[Ht.LAYERGROUP]=n,i[Ht.TARGET]=e.target,i[Ht.VIEW]=e.view instanceof Ke?e.view:new Ke;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new li(e.controls.slice()):(Rt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let r;e.interactions!==void 0&&(Array.isArray(e.interactions)?r=new li(e.interactions.slice()):(Rt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new li(e.overlays.slice()):(Rt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new li,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:i}}const pr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Rb extends zo{constructor(t){t=t||{};const i=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(pr.PRELOAD)}setPreload(t){this.set(pr.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(pr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(pr.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const Cb=5;class Mb extends $s{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Cb}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return dt()}getData(t){return null}prepareFrame(t){return dt()}renderFrame(t,i){return dt()}forEachFeatureAtCoordinate(t,i,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const i=t.target;(i.getState()===ct.LOADED||i.getState()===ct.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=ct.LOADED&&i!=ct.ERROR&&t.addEventListener(et.CHANGE,this.boundHandleImageChange_),i==ct.IDLE&&(t.load(),i=t.getState()),i==ct.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Sb{constructor(){ut(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(io(),{get:(t,i)=>{if(typeof io()[i]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i),this.pushMethodArgs_},set:(t,i,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i,n),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(i=>{for(let n=0,s=i.length;n<s;++n){const r=i[n];if(typeof r=="function"){r(t);continue}const o=i[++n];if(typeof t[r]=="function")t[r](...o);else{if(typeof o=="function"){t[r]=o(t);continue}t[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}let xn=null;function Ab(){xn=se(1,1,void 0,{willReadFrequently:!0})}class Ib extends Mb{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Sn(),this.pixelTransform=Sn(),this.inversePixelTransform=Sn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,i,n){xn||Ab(),xn.clearRect(0,0,1,1);let s;try{xn.drawImage(t,i,n,1,1,0,0,1,1),s=xn.getImageData(0,0,1,1).data}catch{return xn=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,i,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&Mo(Fn(t.style.backgroundColor),Fn(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===i?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=se();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,i,n){const s=ci(n),r=Do(n),o=Oo(n),a=Lo(n);pe(i.coordinateToPixelTransform,s),pe(i.coordinateToPixelTransform,r),pe(i.coordinateToPixelTransform,o),pe(i.coordinateToPixelTransform,a);const l=this.inversePixelTransform;pe(l,s),pe(l,r),pe(l,o),pe(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,i){const n=t.extent,s=t.viewState.resolution,r=t.viewState.rotation,o=t.pixelRatio,a=Math.round(Tt(n)/s*o),l=Math.round(ne(n)/s*o);ks(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,r,-a/2,-l/2),Gd(this.inversePixelTransform,this.pixelTransform);const c=sy(this.pixelTransform);if(this.useContainer(i,c,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(t,i,n){const s=this.getLayer();if(s.hasListener(t)){const r=new bg(t,this.inversePixelTransform,n,i);s.dispatchEvent(r)}}preRender(t,i){this.frameState=i,!i.declutter&&this.dispatchRenderEvent_($e.PRERENDER,t,i)}postRender(t,i){i.declutter||this.dispatchRenderEvent_($e.POSTRENDER,t,i)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new Sb),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_($e.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_($e.POSTRENDER,this.context,t))}getRenderTransform(t,i,n,s,r,o,a){const l=r/2,c=o/2,h=s/i,u=-h,f=-t[0]+a,d=-t[1];return ks(this.tempTransform,l,c,h,u,-n,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class bc extends Io{constructor(t,i,n){super(),n=n||{},this.tileCoord=t,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(et.CHANGE)}release(){this.state===V.ERROR&&this.setState(V.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==V.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){dt()}getAlpha(t,i){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=i-n+1e3/60;return s>=this.transition_?1:Xd(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function oo(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}function Pb(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e instanceof DataView?e:null}const Lb=new Error("disposed");let un=null;function Ob(e){un||(un=se(e.width,e.height,void 0,{willReadFrequently:!0}));const t=un.canvas,i=e.width;t.width!==i&&(t.width=i);const n=e.height;return t.height!==n&&(t.height=n),un.clearRect(0,0,i,n),un.drawImage(e,0,0),un.getImageData(0,0,i,n).data}const Db=[256,256];class ll extends bc{constructor(t){const i=V.IDLE;super(t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=oo(this.data_);return t?[t.width,t.height]:Db}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==V.IDLE&&this.state!==V.ERROR)return;this.state=V.LOADING,this.changed();const t=this;this.loader_().then(function(i){t.data_=i,t.state=V.LOADED,t.changed()}).catch(function(i){t.error_=i,t.state=V.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Lb),this.controller_=null),super.disposeInternal()}}class Mg extends bc{constructor(t,i,n,s,r,o){super(t,i,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=V.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=V.ERROR,this.unlistenImage_(),this.image_=kb(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=V.LOADED:this.state=V.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==V.ERROR&&(this.state=V.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==V.IDLE&&(this.state=V.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ky(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function kb(){const e=se(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}class Fb{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof Co&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){const n=this.entries_[t];return Rt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const i=this.entries_[t];return Rt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.key_;return t}getValues(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var i;return(i=this.entries_[t])==null?void 0:i.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){Rt(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const Sg=.5,Nb=10,au=.25;class Ag{constructor(t,i,n,s,r,o,a){this.sourceProj_=t,this.targetProj_=i;let l={};const c=a?Y0(w=>pe(a,Hd(w,this.targetProj_,this.sourceProj_))):eo(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const b=w[0]+"/"+w[1];return l[b]||(l[b]=c(w)),l[b]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Tt(s)>=Tt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Tt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Tt(this.targetProj_.getExtent()):null;const h=ci(n),u=Do(n),f=Oo(n),d=Lo(n),g=this.transformInv_(h),m=this.transformInv_(u),_=this.transformInv_(f),p=this.transformInv_(d),x=Nb+(o?Math.max(0,Math.ceil(Math.log2(Ds(n)/(o*o*256*256)))):0);if(this.addQuad_(h,u,f,d,g,m,_,p,x),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(b,v,M){w=Math.min(w,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-w>this.sourceWorldWidth_/2){const v=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];v[0][0]-w>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-w>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-w>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const M=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-M<this.sourceWorldWidth_/2&&(b.source=v)}})}l={}}addTriangle_(t,i,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,i,n]})}addQuad_(t,i,n,s,r,o,a,l,c){const h=xh([r,o,a,l]),u=this.sourceWorldWidth_?Tt(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=xh([t,i,n,s]);g=Tt(_)/this.targetWorldWidth_>au||g}!d&&this.sourceProj_.isGlobal()&&u&&(g=u>au||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Js(h,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_);let x;d?x=(Mn(r[0],f)+Mn(a[0],f))/2-Mn(p[0],f):x=(r[0]+a[0])/2-p[0];const w=(r[1]+a[1])/2-p[1];g=x*x+w*w>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const _=[(i[0]+n[0])/2,(i[1]+n[1])/2],p=this.transformInv_(_),x=[(s[0]+t[0])/2,(s[1]+t[1])/2],w=this.transformInv_(x);this.addQuad_(t,i,_,x,r,o,p,w,c-1),this.addQuad_(x,_,n,s,w,p,a,l,c-1)}else{const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_),x=[(n[0]+s[0])/2,(n[1]+s[1])/2],w=this.transformInv_(x);this.addQuad_(t,_,x,s,r,p,w,l,c-1),this.addQuad_(_,i,n,x,p,o,a,w,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,n,s,r,a,l),m&14||this.addTriangle_(t,n,i,r,a,o),m&&(m&13||this.addTriangle_(i,s,t,o,l,r),m&7||this.addTriangle_(i,s,n,o,l,a))}calculateSourceExtent(){const t=ki();return this.triangles_.forEach(function(i,n,s){const r=i.source;Fr(t,r[0]),Fr(t,r[1]),Fr(t,r[2])}),t}getTriangles(){return this.triangles_}}let ba;const In=[];function lu(e,t,i,n,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,s)),e.restore()}function Ea(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function zb(){if(ba===void 0){const e=se(6,6,In);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",lu(e,4,5,4,0),lu(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;ba=Ea(t,0)||Ea(t,4)||Ea(t,8),hc(e),In.push(e.canvas)}return ba}function cu(e,t,i,n){const s=Hd(i,t,e);let r=Mh(t,n,i);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=e.getMetersPerUnit();a!==void 0&&(r/=a);const l=e.getExtent();if(!l||Yl(l,s)){const c=Mh(e,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function Ig(e,t,i,n){const s=Dn(i);let r=cu(e,t,s,n);return(!isFinite(r)||r<=0)&&kd(i,function(o){return r=cu(e,t,o,n),isFinite(r)&&r>0}),r}function Bb(e,t,i,n,s,r,o,a,l,c,h,u,f,d){const g=se(Math.round(i*e),Math.round(i*t),In);if(u||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(i,i);function m(v){return Math.round(v*i)/i}g.globalCompositeOperation="lighter";const _=ki();l.forEach(function(v,M,P){Od(_,v.extent)});let p;const x=i/n,w=(u?1:1+Math.pow(2,-24))/x;p=se(Math.round(Tt(_)*x),Math.round(ne(_)*x),In),u||(p.imageSmoothingEnabled=!1),l.forEach(function(v,M,P){if(v.image.width>0&&v.image.height>0){if(v.clipExtent){p.save();const F=(v.clipExtent[0]-_[0])*x,H=-(v.clipExtent[3]-_[3])*x,J=Tt(v.clipExtent)*x,W=ne(v.clipExtent)*x;p.rect(u?F:Math.round(F),u?H:Math.round(H),u?J:Math.round(F+J)-Math.round(F),u?W:Math.round(H+W)-Math.round(H)),p.clip()}const R=(v.extent[0]-_[0])*x,L=-(v.extent[3]-_[3])*x,S=Tt(v.extent)*x,B=ne(v.extent)*x;p.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,u?R:Math.round(R),u?L:Math.round(L),u?S:Math.round(R+S)-Math.round(R),u?B:Math.round(L+B)-Math.round(L)),v.clipExtent&&p.restore()}});const b=ci(o);return a.getTriangles().forEach(function(v,M,P){const R=v.source,L=v.target;let S=R[0][0],B=R[0][1],F=R[1][0],H=R[1][1],J=R[2][0],W=R[2][1];const X=m((L[0][0]-b[0])/r),j=m(-(L[0][1]-b[1])/r),Y=m((L[1][0]-b[0])/r),rt=m(-(L[1][1]-b[1])/r),Z=m((L[2][0]-b[0])/r),q=m(-(L[2][1]-b[1])/r),st=S,ot=B;S=0,B=0,F-=st,H-=ot,J-=st,W-=ot;const _t=[[F,H,0,0,Y-X],[J,W,0,0,Z-X],[0,0,F,H,rt-j],[0,0,J,W,q-j]],pt=E0(_t);if(!pt)return;if(g.save(),g.beginPath(),zb()||!u){g.moveTo(Y,rt);const Pt=4,re=X-Y,be=j-rt;for(let jt=0;jt<Pt;jt++)g.lineTo(Y+m((jt+1)*re/Pt),rt+m(jt*be/(Pt-1))),jt!=Pt-1&&g.lineTo(Y+m((jt+1)*re/Pt),rt+m((jt+1)*be/(Pt-1)));g.lineTo(Z,q)}else g.moveTo(Y,rt),g.lineTo(X,j),g.lineTo(Z,q);g.clip(),g.transform(pt[0],pt[2],pt[1],pt[3],X,j),g.translate(_[0]-st,_[3]-ot);let at;if(p)at=p.canvas,g.scale(w,-w);else{const Pt=l[0],re=Pt.extent;at=Pt.image,g.scale(Tt(re)/at.width,-ne(re)/at.height)}g.drawImage(at,0,0),g.restore()}),p&&(hc(p),In.push(p.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(v,M,P){const R=v.target,L=(R[0][0]-b[0])/r,S=-(R[0][1]-b[1])/r,B=(R[1][0]-b[0])/r,F=-(R[1][1]-b[1])/r,H=(R[2][0]-b[0])/r,J=-(R[2][1]-b[1])/r;g.beginPath(),g.moveTo(B,F),g.lineTo(L,S),g.lineTo(H,J),g.closePath(),g.stroke()}),g.restore()),g.canvas}function Go(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function cl(e,t,i,n,s,r,o){o=o??Go();const a=1/(e-t),l=1/(i-n),c=1/(s-r);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(e+t)*a,o[13]=(n+i)*l,o[14]=(r+s)*c,o[15]=1,o}function hu(e,t,i,n,s){return s=s??Go(),s[0]=e[0]*t,s[1]=e[1]*t,s[2]=e[2]*t,s[3]=e[3]*t,s[4]=e[4]*i,s[5]=e[5]*i,s[6]=e[6]*i,s[7]=e[7]*i,s[8]=e[8]*n,s[9]=e[9]*n,s[10]=e[10]*n,s[11]=e[11]*n,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s}function jb(e,t,i,n,s){s=s??Go();let r,o,a,l,c,h,u,f,d,g,m,_;return e===s?(s[12]=e[0]*t+e[4]*i+e[8]*n+e[12],s[13]=e[1]*t+e[5]*i+e[9]*n+e[13],s[14]=e[2]*t+e[6]*i+e[10]*n+e[14],s[15]=e[3]*t+e[7]*i+e[11]*n+e[15]):(r=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],u=e[6],f=e[7],d=e[8],g=e[9],m=e[10],_=e[11],s[0]=r,s[1]=o,s[2]=a,s[3]=l,s[4]=c,s[5]=h,s[6]=u,s[7]=f,s[8]=d,s[9]=g,s[10]=m,s[11]=_,s[12]=r*t+c*i+d*n+e[12],s[13]=o*t+h*i+g*n+e[13],s[14]=a*t+u*i+m*n+e[14],s[15]=l*t+f*i+_*n+e[15]),s}function Wb(e,t,i,n){return n=n??Go(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e,n[13]=t,n[14]=i,n[15]=1,n}const Ub=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Vb=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Hb{constructor(t){this.gl_=t,this.program_=hl(t,Vb,Ub),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,i,n,s,r,o,a,l,c,h,u,f,d){const g=this.gl_;l===void 0&&(l=s),c===void 0&&(c=r),o===void 0&&(o=i),a===void 0&&(a=n),h===void 0&&(h=o),u===void 0&&(u=a),f===void 0&&(f=g.canvas.width),d===void 0&&(d=g.canvas.height),g.bindTexture(g.TEXTURE_2D,t),g.useProgram(this.program_),g.bindBuffer(g.ARRAY_BUFFER,this.positionBuffer),g.enableVertexAttribArray(this.positionLocation),g.vertexAttribPointer(this.positionLocation,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,this.texcoordBuffer),g.enableVertexAttribArray(this.texcoordLocation),g.vertexAttribPointer(this.texcoordLocation,2,g.FLOAT,!1,0,0);let m=cl(0,f,0,d,-1,1);m=jb(m,l,c,0),m=hu(m,h,u,1),g.uniformMatrix4fv(this.matrixLocation,!1,m);let _=Wb(s/i,r/n,0);_=hu(_,o/i,a/n,1),g.uniformMatrix4fv(this.textureMatrixLocation,!1,_),g.uniform1i(this.textureLocation,0),g.drawArrays(g.TRIANGLES,0,this.positions.length/2)}}function uu(e,t,i){const n=e.createShader(t);if(n===null)throw new Error("Shader compilation failed");if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const s=e.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function hl(e,t,i){const n=e.createProgram(),s=uu(e,e.VERTEX_SHADER,i),r=uu(e,e.FRAGMENT_SHADER,t);if(n===null)throw new Error("Program creation failed");if(e.attachShader(n,s),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const Xb=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,Gb=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Yb=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Kb=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function $b(e,t,i,n){let s;return i.length?s=i.shift():lg?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("webgl",n)}function Zb(e){const t=e.canvas;t.width=1,t.height=1,e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}const fu=[];function qb(e,t,i,n,s,r,o,a,l,c,h,u,f,d){const g=Math.round(n*t),m=Math.round(n*i);e.canvas.width=g,e.canvas.height=m;let _,p;if(p=e.createTexture(),e.bindTexture(e.TEXTURE_2D,p),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),f?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,g,m,0,e.RGBA,h,null),_=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,_),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),_===null)throw new Error("Could not create framebuffer");if(p===null)throw new Error("Could not create texture");if(l.length===0)return{width:g,height:m,framebuffer:_,texture:p};const x=ki();l.forEach(function(S,B,F){Od(x,S.extent)});let w,b,v;const M=1/s;{if(w=e.createTexture(),p===null)throw new Error("Could not create texture");b=Math.round(Tt(x)*M),v=Math.round(ne(x)*M);const S=e.getParameter(e.MAX_TEXTURE_SIZE),B=Math.max(b,v),F=B>S?S/B:1,H=Math.round(b*F),J=Math.round(v*F);e.bindTexture(e.TEXTURE_2D,w),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),f?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,H,J,0,e.RGBA,h,null);const W=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,W),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,w,0);const X=new Hb(e);l.forEach(function(j,Y,rt){const Z=(j.extent[0]-x[0])*M*F,q=-(j.extent[3]-x[3])*M*F,st=Tt(j.extent)*M*F,ot=ne(j.extent)*M*F;if(e.bindFramebuffer(e.FRAMEBUFFER,W),e.viewport(0,0,H,J),j.clipExtent){const _t=(j.clipExtent[0]-x[0])*M*F,pt=-(j.clipExtent[3]-x[3])*M*F,at=Tt(j.clipExtent)*M*F,Pt=ne(j.clipExtent)*M*F;e.enable(e.SCISSOR_TEST),e.scissor(f?_t:Math.round(_t),f?pt:Math.round(pt),f?at:Math.round(_t+at)-Math.round(_t),f?Pt:Math.round(pt+Pt)-Math.round(pt))}X.drawImage(j.texture,j.width,j.height,c,c,j.width-2*c,j.height-2*c,f?Z:Math.round(Z),f?q:Math.round(q),f?st:Math.round(Z+st)-Math.round(Z),f?ot:Math.round(q+ot)-Math.round(q),H,J),e.disable(e.SCISSOR_TEST)}),e.deleteFramebuffer(W)}const P=ci(o),R=ci(x),L=S=>{const B=(S[0][0]-P[0])/r*n,F=-(S[0][1]-P[1])/r*n,H=(S[1][0]-P[0])/r*n,J=-(S[1][1]-P[1])/r*n,W=(S[2][0]-P[0])/r*n,X=-(S[2][1]-P[1])/r*n;return{u1:H,v1:J,u0:B,v0:F,u2:W,v2:X}};e.bindFramebuffer(e.FRAMEBUFFER,_),e.viewport(0,0,g,m);{const S=[],B=[],F=hl(e,Kb,Yb);e.useProgram(F);const H=e.getUniformLocation(F,"u_texture");e.bindTexture(e.TEXTURE_2D,w),e.uniform1i(H,0),a.getTriangles().forEach(function(Z,q,st){const ot=Z.source,_t=Z.target,{u1:pt,v1:at,u0:Pt,v0:re,u2:be,v2:jt}=L(_t),di=(ot[0][0]-R[0])/s/b,y=-(ot[0][1]-R[1])/s/v,E=(ot[1][0]-R[0])/s/b,T=-(ot[1][1]-R[1])/s/v,O=(ot[2][0]-R[0])/s/b,A=-(ot[2][1]-R[1])/s/v;S.push(pt,at,Pt,re,be,jt),B.push(E,T,di,y,O,A)});const J=cl(0,g,m,0,-1,1),W=e.getUniformLocation(F,"u_matrix");e.uniformMatrix4fv(W,!1,J);const X=e.getAttribLocation(F,"a_position"),j=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,j),e.bufferData(e.ARRAY_BUFFER,new Float32Array(S),e.STATIC_DRAW),e.vertexAttribPointer(X,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(X);const Y=e.getAttribLocation(F,"a_texcoord"),rt=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,rt),e.bufferData(e.ARRAY_BUFFER,new Float32Array(B),e.STATIC_DRAW),e.vertexAttribPointer(Y,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(Y),e.drawArrays(e.TRIANGLES,0,S.length/2)}if(u){const S=hl(e,Gb,Xb);e.useProgram(S);const B=cl(0,g,m,0,-1,1),F=e.getUniformLocation(S,"u_matrix");e.uniformMatrix4fv(F,!1,B);const H=Array.isArray(u)?u:[0,0,0,255],J=e.getUniformLocation(S,"u_val");e.uniform4fv(J,H);const W=e.getAttribLocation(S,"a_position"),X=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,X),e.vertexAttribPointer(W,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(W);const j=a.getTriangles().reduce(function(Y,rt){const Z=rt.target,{u1:q,v1:st,u0:ot,v0:_t,u2:pt,v2:at}=L(Z);return Y.concat([q,st,ot,_t,ot,_t,pt,at,pt,at,q,st])},[]);e.bufferData(e.ARRAY_BUFFER,new Float32Array(j),e.STATIC_DRAW),e.drawArrays(e.LINES,0,j.length/2)}return{width:g,height:m,framebuffer:_,texture:p}}class Jb extends ll{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=t.renderEdges!==void 0?t.renderEdges:!1,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const i=t.sourceProj,n=i.getExtent(),s=t.sourceTileGrid.getExtent();this.clipExtent_=i.canWrapX()?s?Oe(n,s):n:s;const r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?Oe(r,o):r;if(Ds(l)===0){this.state=V.EMPTY;return}n&&(a?a=Oe(a,n):a=n);const c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=t.targetProj,u=Ig(i,h,l,c);if(!isFinite(u)||u<=0){this.state=V.EMPTY;return}const f=t.errorThreshold!==void 0?t.errorThreshold:Sg;if(this.triangulation_=new Ag(i,h,l,a,u*f,c,t.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=V.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(u);let d=this.triangulation_.calculateSourceExtent();if(a&&(i.canWrapX()?(d[1]=Ft(d[1],a[1],a[3]),d[3]=Ft(d[3],a[1],a[3])):d=Oe(d,a)),!Ds(d))this.state=V.EMPTY;else{let g=0,m=0;i.canWrapX()&&(g=Tt(n),m=Math.floor((d[0]-n[0])/g)),Fd(d.slice(),i,!0).forEach(p=>{const x=this.sourceTileGrid_.getTileRangeForExtentAndZ(p,this.sourceZ_),w=t.getTileFunction;for(let b=x.minX;b<=x.maxX;b++)for(let v=x.minY;v<=x.maxY;v++){const M=w(this.sourceZ_,b,v,this.pixelRatio_);if(M){const P=m*g;this.sourceTiles_.push({tile:M,offset:P})}}++m}),this.sourceTiles_.length===0&&(this.state=V.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let i=!1;if(this.sourceTiles_.forEach(b=>{var q;const v=b.tile;if(!v||v.getState()!==V.LOADED)return;const M=v.getSize(),P=this.gutter_;let R;const L=Pb(v.getData());L?R=L:(i=!0,R=Ob(oo(v.getData())));const S=[M[0]+2*P,M[1]+2*P],B=R instanceof Float32Array,F=S[0]*S[1],H=B?Float32Array:Uint8ClampedArray,J=new H(R.buffer),W=H.BYTES_PER_ELEMENT,X=W*J.length/F,j=J.byteLength/S[1],Y=Math.floor(j/W/S[0]),rt=this.sourceTileGrid_.getTileCoordExtent(v.tileCoord);rt[0]+=b.offset,rt[2]+=b.offset;const Z=(q=this.clipExtent_)==null?void 0:q.slice();Z&&(Z[0]+=b.offset,Z[2]+=b.offset),t.push({extent:rt,clipExtent:Z,data:J,dataType:H,bytesPerPixel:X,pixelSize:S,bandCount:Y})}),this.sourceTiles_.length=0,t.length===0){this.state=V.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),r=typeof s=="number"?s:s[0],o=typeof s=="number"?s:s[1],a=r*this.pixelRatio_,l=o*this.pixelRatio_,c=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),f=t[0].bandCount,d=new t[0].dataType(f*a*l),g=$b(a,l,fu,{premultipliedAlpha:!1,antialias:!1});let m;const _=g.RGBA;let p;t[0].dataType==Float32Array?(p=g.FLOAT,g.getExtension("WEBGL_color_buffer_float"),g.getExtension("OES_texture_float"),g.getExtension("EXT_float_blend"),m=g.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(p=g.UNSIGNED_BYTE,m=this.interpolate);const x=4,w=Math.ceil(f/x);for(let b=w-1;b>=0;--b){const v=[];for(let H=0,J=t.length;H<J;++H){const W=t[H],X=W.pixelSize,j=X[0],Y=X[1],rt=new W.dataType(x*j*Y),Z=W.data;let q=b*x;for(let ot=0,_t=rt.length;ot<_t;ot+=x)rt[ot]=Z[q],rt[ot+1]=Z[q+1],rt[ot+2]=Z[q+2],rt[ot+3]=Z[q+3],q+=f;const st=g.createTexture();g.bindTexture(g.TEXTURE_2D,st),m?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,_,j,Y,0,_,p,rt),v.push({extent:W.extent,clipExtent:W.clipExtent,texture:st,width:j,height:Y})}const{framebuffer:M,width:P,height:R}=qb(g,r,o,this.pixelRatio_,h,c,u,this.triangulation_,v,this.gutter_,p,this.renderEdges_,m),L=P,S=R*x,B=new t[0].dataType(L*S);g.bindFramebuffer(g.FRAMEBUFFER,M),g.readPixels(0,0,P,R,g.RGBA,p,B);let F=b*x;for(let H=0,J=B.length;H<J;H+=x){const W=(L-1-(H/S|0))*S+H%S;d[F]=B[W],d[F+1]=B[W+1],d[F+2]=B[W+2],d[F+3]=B[W+3],F+=f}}if(Zb(g),fu.push(g.canvas),i){const b=se(r,o),v=new ImageData(d,r);b.putImageData(v,0,0),this.reprojData_=b.canvas}else this.reprojData_=d;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=V.LOADED,this.changed()}load(){if(this.state!==V.IDLE&&this.state!==V.ERROR)return;this.state=V.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n!==V.IDLE&&n!==V.LOADING)return;t++;const s=xt(i,et.CHANGE,()=>{const r=i.getState();(r==V.LOADED||r==V.ERROR||r==V.EMPTY)&&(Lt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i}){i.getState()==V.IDLE&&i.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}}class ul extends bc{constructor(t,i,n,s,r,o,a,l,c,h,u,f){super(r,V.IDLE,f),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?Oe(d,g):d;if(Ds(_)===0){this.state=V.EMPTY;return}const p=t.getExtent();p&&(m?m=Oe(m,p):m=p);const x=s.getResolution(this.wrappedTileCoord_[0]),w=Ig(t,n,_,x);if(!isFinite(w)||w<=0){this.state=V.EMPTY;return}const b=h!==void 0?h:Sg;if(this.triangulation_=new Ag(t,n,_,m,w*b,x),this.triangulation_.getTriangles().length===0){this.state=V.EMPTY;return}this.sourceZ_=i.getZForResolution(w);let v=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(v[1]=Ft(v[1],m[1],m[3]),v[3]=Ft(v[3],m[1],m[3])):v=Oe(v,m)),!Ds(v))this.state=V.EMPTY;else{let M=0,P=0;t.canWrapX()&&(M=Tt(p),P=Math.floor((v[0]-p[0])/M)),Fd(v.slice(),t,!0).forEach(L=>{const S=i.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let B=S.minX;B<=S.maxX;B++)for(let F=S.minY;F<=S.maxY;F++){const H=c(this.sourceZ_,B,F,a);if(H){const J=P*M;this.sourceTiles_.push({tile:H,offset:J})}}++P}),this.sourceTiles_.length===0&&(this.state=V.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(i=>{var s;const n=i.tile;if(n&&n.getState()==V.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;const o=(s=this.clipExtent_)==null?void 0:s.slice();o&&(o[0]+=i.offset,o[2]+=i.offset),t.push({extent:r,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=V.ERROR;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(i),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Bb(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=V.LOADED}this.changed()}load(){if(this.state==V.IDLE){this.state=V.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==V.IDLE||n==V.LOADING){t++;const s=xt(i,et.CHANGE,r=>{const o=i.getState();(o==V.LOADED||o==V.ERROR||o==V.EMPTY)&&(Lt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,s){i.getState()==V.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(hc(this.canvas_.getContext("2d")),In.push(this.canvas_),this.canvas_=null),super.release()}}class Ec{constructor(t,i,n,s){this.minX=t,this.maxX=i,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function fn(e,t,i,n,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=i,s.maxY=n,s):new Ec(e,t,i,n)}function ao(e,t,i,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=i,n):[e,t,i]}function Qb(e,t,i){return e+"/"+t+"/"+i}function t1(e){return e1(e[0],e[1],e[2])}function e1(e,t,i){return(t<<e)+i}function i1(e,t){const i=e[0],n=e[1],s=e[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const r=t.getFullTileRange(i);return r?r.containsXY(n,s):!0}function va(e,t,i,n){return`${e},${Qb(t,i,n)}`}function wa(e,t,i){if(!(i in e))return e[i]=new Set([t]),!0;const n=e[i],s=n.has(t);return s||n.add(t),!s}function n1(e,t,i){const n=e[i];return n?n.delete(t):!1}function du(e,t){const i=e.layerStatesArray[e.layerIndex];i.extent&&(t=Oe(t,Yi(i.extent,e.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(e.viewState.projection).getExtent();s&&(t=Oe(t,s))}return t}class s1 extends Ib{constructor(t,i){super(t),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ki(),this.tempTileRange_=new Ec(0,0,0,0),this.tempTileCoord_=ao(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new Fb(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,i,n,s){const r=this.tileCache_,a=this.getLayer().getSource(),l=va(a.getKey(),t,i,n);let c;if(r.containsKey(l))c=r.get(l);else{if(c=a.getTile(t,i,n,s.pixelRatio,s.viewState.projection),!c)return null;r.set(l,c)}return c}getTile(t,i,n,s){const r=this.getOrCreateTile(t,i,n,s);return r||null}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),s=pe(i.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Yl(r,s))return null;const o=i.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(i.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(s,h),f=this.getTile(h,u[1],u[2],i);if(!f||f.getState()!==V.LOADED)continue;const d=l.getOrigin(h),g=fe(l.getTileSize(h)),m=l.getResolution(h);let _;if(f instanceof Mg||f instanceof ul)_=f.getImage();else if(f instanceof ll){if(_=oo(f.getData()),!_)continue}else continue;const p=Math.floor(c*((s[0]-d[0])/m-u[1]*g[0])),x=Math.floor(c*((d[1]-s[1])/m-u[2]*g[1])),w=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(_,p+w,x+w)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(t,i,n,s,r){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=Yt(l);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],f=a.getMapInternal(),d=Math.max(n-r,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection));for(let g=n;g>=d;--g){const m=c.getTileRangeForExtentAndZ(i,g,this.tempTileRange_),_=c.getResolution(g);for(let p=m.minX;p<=m.maxX;++p)for(let x=m.minY;x<=m.maxY;++x){const w=this.getTile(g,p,x,t);if(!w||!wa(s,w,g))continue;const v=w.getKey();if(u[v]=!0,w.getState()===V.IDLE&&!t.tileQueue.isKeyQueued(v)){const M=ao(g,p,x,this.tempTileCoord_);t.tileQueue.enqueue([w,h,c.getTileCoordCenter(M),_])}}}}findStaleTile_(t,i){const n=this.tileCache_,s=t[0],r=t[1],o=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=va(a[l],s,r,o);if(n.containsKey(c)){const h=n.get(c);if(h.getState()===V.LOADED)return h.endTransition(Yt(this)),wa(i,h,s),!0}}return!1}findAltTiles_(t,i,n,s){const r=t.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!r)return!1;let o=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource().getKey();for(let h=r.minX;h<=r.maxX;++h)for(let u=r.minY;u<=r.maxY;++u){const f=va(c,n,h,u);let d=!1;if(a.containsKey(f)){const g=a.get(f);g.getState()===V.LOADED&&(wa(s,g,n),d=!0)}d||(o=!1)}return o}renderFrame(t,i){let n=!0;this.renderComplete=!0;const s=t.layerStatesArray[t.layerIndex],r=t.viewState,o=r.projection,a=r.resolution,l=r.center,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),f=u.getRevision(),d=u.getTileGridForProjection(o),g=d.getZForResolution(a,u.zDirection),m=d.getResolution(g),_=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let p=t.extent;const x=u.getTilePixelRatio(c);this.prepareContainer(t,i);const w=this.context.canvas.width,b=this.context.canvas.height,v=s.extent&&Yi(s.extent);v&&(p=Oe(p,Yi(s.extent)));const M=m*w/2/x,P=m*b/2/x,R=[l[0]-M,l[1]-P,l[0]+M,l[1]+P],L={};this.renderedTiles.length=0;const S=h.getPreload();if(t.nextExtent){const Z=d.getZForResolution(r.nextResolution,u.zDirection),q=du(t,t.nextExtent);this.enqueueTiles(t,q,Z,L,S)}const B=du(t,p);if(this.enqueueTiles(t,B,g,L,0),S>0&&setTimeout(()=>{this.enqueueTiles(t,B,g-1,L,S-1)},0),!(g in L))return this.container;const F=Yt(this),H=t.time;for(const Z of L[g]){const q=Z.getState();if((Z instanceof ul||Z instanceof Jb)&&q===V.EMPTY)continue;const st=Z.tileCoord;if(q===V.LOADED&&Z.getAlpha(F,H)===1){Z.endTransition(F);continue}if(q!==V.IDLE&&(n=!1),q!==V.ERROR&&(this.renderComplete=!1),this.findStaleTile_(st,L)){n1(L,Z,g),t.animate=!0;continue}if(this.findAltTiles_(d,st,g+1,L))continue;const pt=d.getMinZoom();for(let at=g-1;at>=pt&&!this.findAltTiles_(d,st,at,L);--at);}const J=m/a*c/x,W=this.getRenderContext(t);ks(this.tempTransform,w/2,b/2,J,J,0,-w/2,-b/2),s.extent&&this.clipUnrotated(W,t,v),u.getInterpolate()||(W.imageSmoothingEnabled=!1),this.preRender(W,t);const X=Object.keys(L).map(Number);X.sort(Ul);let j;const Y=[],rt=[];for(let Z=X.length-1;Z>=0;--Z){const q=X[Z],st=u.getTilePixelSize(q,c,o),_t=d.getResolution(q)/m,pt=st[0]*_t*J,at=st[1]*_t*J,Pt=d.getTileCoordForCoordAndZ(ci(R),q),re=d.getTileCoordExtent(Pt),be=pe(this.tempTransform,[x*(re[0]-R[0])/m,x*(R[3]-re[3])/m]),jt=x*u.getGutterForProjection(o);for(const di of L[q]){if(di.getState()!==V.LOADED)continue;const y=di.tileCoord,E=Pt[1]-y[1],T=Math.round(be[0]-(E-1)*pt),O=Pt[2]-y[2],A=Math.round(be[1]-(O-1)*at),I=Math.round(be[0]-E*pt),z=Math.round(be[1]-O*at),N=T-I,k=A-z,D=X.length===1;let $=!1;j=[I,z,I+N,z,I+N,z+k,I,z+k];for(let U=0,K=Y.length;U<K;++U)if(!D&&q<rt[U]){const G=Y[U];Js([I,z,I+N,z+k],[G[0],G[3],G[4],G[7]])&&($||(W.save(),$=!0),W.beginPath(),W.moveTo(j[0],j[1]),W.lineTo(j[2],j[3]),W.lineTo(j[4],j[5]),W.lineTo(j[6],j[7]),W.moveTo(G[6],G[7]),W.lineTo(G[4],G[5]),W.lineTo(G[2],G[3]),W.lineTo(G[0],G[1]),W.clip())}Y.push(j),rt.push(q),this.drawTile(di,t,I,z,N,k,jt,D),$&&W.restore(),this.renderedTiles.unshift(di),this.updateUsedTiles(t.usedTiles,u,di)}}if(this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Ja(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=c,this.postRender(this.context,t),s.extent&&W.restore(),W.imageSmoothingEnabled=!0,this.renderComplete){const Z=(q,st)=>{const ot=Yt(u),_t=st.wantedTiles[ot],pt=_t?Object.keys(_t).length:0;this.updateCacheSize(pt),this.tileCache_.expireCache()};t.postRenderFunctions.push(Z)}return!this.renderComplete&&!n&&(t.animate=!0),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,i,n,s,r,o,a,l){let c;if(t instanceof ll){if(c=oo(t.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(t);if(!c)return;const h=this.getRenderContext(i),u=Yt(this),f=i.layerStatesArray[i.layerIndex],d=f.opacity*(l?t.getAlpha(u,i.time):1),g=d!==h.globalAlpha;g&&(h.save(),h.globalAlpha=d),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),g&&h.restore(),d!==f.opacity?i.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,i,n){const s=Yt(i);s in t||(t[s]={}),t[s][n.getKey()]=!0}}class r1 extends Rb{constructor(t){super(t)}createRenderer(){return new s1(this,{cacheSize:this.getCacheSize()})}}const Ta={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class o1 extends ui{constructor(t){super(),this.projection=xe(t.projection),this.attributions_=gu(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,s){i.viewResolver=n,i.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=gu(t),this.changed()}setState(t){this.state_=t,this.changed()}}function gu(e){return e?typeof e=="function"?e:(Array.isArray(e)||(e=[e]),t=>e):null}const dn=[0,0,0],mi=5;class Pg{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Rt(Zp(this.resolutions_,(s,r)=>r-s),"`resolutions` must be sorted in descending order");let i;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!i)i=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Rt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ci(n)),Rt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Rt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Hl,Rt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((s,r)=>{const o=new Ec(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,i,n){const s=this.getTileRangeForExtentAndZ(t,i);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([i,r,a])}forEachTileCoordParentTileRange(t,i,n,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),r=fn(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),i(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return fn(r,r+1,o,o+1,i)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(i===s)return fn(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-s),c=Math.floor(r*l),h=Math.floor(o*l);if(i<s)return fn(c,c,h,h,n);const u=Math.floor(l*(r+1))-1,f=Math.floor(l*(o+1))-1;return fn(c,u,h,f,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,i,n)}getTileRangeForExtentAndZ(t,i,n){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,dn);const s=dn[1],r=dn[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,dn);const o=dn[1],a=dn[2];return fn(s,o,r,a,n)}getTileCoordCenter(t){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=fe(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*s[0]*n,i[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,i){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=fe(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,a=n[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return qs(o,a,l,c,i)}getTileCoordForCoordAndResolution(t,i,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,n)}getTileCoordForXYAndResolution_(t,i,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=fe(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-i)/n/c[1];return s?(h=hr(h,mi)-1,u=hr(u,mi)-1):(h=cr(h,mi),u=cr(u,mi)),ao(o,h,u,r)}getTileCoordForXYAndZ_(t,i,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=fe(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-i)/a/l[1];return s?(c=hr(c,mi)-1,h=hr(h,mi)-1):(c=cr(c,mi),h=cr(h,mi)),ao(n,c,h,r)}getTileCoordForCoordAndZ(t,i,n){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){const n=Vl(this.resolutions_,t,i||0);return Ft(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return tg(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const i=this.resolutions_.length,n=new Array(i);for(let s=this.minZoom;s<i;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}function Lg(e){let t=e.getDefaultTileGrid();return t||(t=h1(e),e.setDefaultTileGrid(t)),t}function a1(e,t,i){const n=t[0],s=e.getTileCoordCenter(t),r=vc(i);if(!Yl(r,s)){const o=Tt(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,e.getTileCoordForCoordAndZ(s,n)}return t}function l1(e,t,i,n){n=n!==void 0?n:"top-left";const s=Og(e,t,i);return new Pg({extent:e,origin:m0(e,n),resolutions:s,tileSize:i})}function c1(e){const t=e,i=t.extent||xe("EPSG:3857").getExtent(),n={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Og(i,t.maxZoom,t.tileSize,t.maxResolution)};return new Pg(n)}function Og(e,t,i,n){t=t!==void 0?t:e0,i=fe(i!==void 0?i:Hl);const s=ne(e),r=Tt(e);n=n>0?n:Math.max(r/i[0],s/i[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function h1(e,t,i,n){const s=vc(e);return l1(s,t,i,n)}function vc(e){e=xe(e);let t=e.getExtent();if(!t){const i=180*Xl.degrees/e.getMetersPerUnit();t=qs(-i,-i,i,i)}return t}class u1 extends o1{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const i=[256,256];this.tileGrid&&fe(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=t.key||Yt(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,n,s,r){return dt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Lg(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(i),o=fe(s.getTileSize(t),this.tmpSize);return r==1?o:Jy(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){const n=i!==void 0?i:this.getProjection(),s=i!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=a1(s,t,n)),i1(t,s)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class f1 extends Di{constructor(t,i){super(t),this.tile=i}}const d1=/\{z\}/g,g1=/\{x\}/g,m1=/\{y\}/g,_1=/\{-y\}/g;function p1(e,t,i,n,s){return e.replace(d1,t.toString()).replace(g1,i.toString()).replace(m1,n.toString()).replace(_1,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function y1(e){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(e);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(e.replace(i[0],String.fromCharCode(r)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(e),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)t.push(e.replace(i[0],s.toString()));return t}return t.push(e),t}function x1(e,t){return function(i,n,s){if(!i)return;let r;const o=i[0];if(t){const a=t.getFullTileRange(o);a&&(r=a.getHeight()-1)}return p1(e,o,i[1],i[2],r)}}function b1(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=x1(e[s],t);return E1(n)}function E1(e){return e.length===1?e[0]:function(t,i,n){if(!t)return;const s=t1(t),r=Mn(s,e.length);return e[r](t,i,n)}}class wc extends u1{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===wc.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const i=t.target,n=Yt(i),s=i.getState();let r;s==V.LOADING?(this.tileLoadingKeys_[n]=!0,r=Ta.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==V.ERROR?Ta.TILELOADERROR:s==V.LOADED?Ta.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new f1(r,i))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){const i=y1(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;const i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(b1(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,n){}}class v1 extends wc{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:w1,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Mg,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!aa(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const i=this.getProjection();if(this.tileGrid&&(!i||aa(i,t)))return this.tileGrid;const n=Yt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Lg(t)),this.tileGridForProjection[n]}createTile_(t,i,n,s,r,o){const a=[t,i,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,c!==void 0?V.IDLE:V.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(et.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,i,n,s,r){const o=this.getProjection();if(!o||!r||aa(o,r))return this.getTileInternal(t,i,n,s,o||r);const a=[t,i,n],l=this.getKey(),c=this.getTileGridForProjection(o),h=this.getTileGridForProjection(r),u=this.getTileCoordForTileUrlFunction(a,r),f=new ul(o,c,r,h,a,u,this.getTilePixelRatio(s),this.getGutter(),(d,g,m,_)=>this.getTileInternal(d,g,m,_,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=l,f}getTileInternal(t,i,n,s,r){const o=this.getKey();return this.createTile_(t,i,n,s,r,o)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,i){const n=xe(t);if(n){const s=Yt(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=i)}}}function w1(e,t){e.getImage().src=t}class T1 extends v1{constructor(t){t=t||{};const i=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:c1({extent:vc(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const R1='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class C1 extends T1{constructor(t){t=t||{};let i;t.attributions!==void 0?i=t.attributions:i=[R1];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const Tc=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},M1={name:"MapContainer",components:{},props:{},mounted(){new wb({target:this.$refs["map-root"],layers:[new r1({source:new C1})],view:new Ke({zoom:0,center:[0,0],constrainResolution:!0})})}},S1={ref:"map-root",style:{width:"100%",height:"100%"}};function A1(e,t,i,n,s,r){return Bl(),Td("div",S1,null,512)}const I1=Tc(M1,[["render",A1]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function nr(e){return e+.5|0}const wi=(e,t,i)=>Math.max(Math.min(e,i),t);function hs(e){return wi(nr(e*2.55),0,255)}function Mi(e){return wi(nr(e*255),0,255)}function oi(e){return wi(nr(e/2.55)/100,0,1)}function mu(e){return wi(nr(e*100),0,100)}const Ee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fl=[..."0123456789ABCDEF"],P1=e=>fl[e&15],L1=e=>fl[(e&240)>>4]+fl[e&15],yr=e=>(e&240)>>4===(e&15),O1=e=>yr(e.r)&&yr(e.g)&&yr(e.b)&&yr(e.a);function D1(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Ee[e[1]]*17,g:255&Ee[e[2]]*17,b:255&Ee[e[3]]*17,a:t===5?Ee[e[4]]*17:255}:(t===7||t===9)&&(i={r:Ee[e[1]]<<4|Ee[e[2]],g:Ee[e[3]]<<4|Ee[e[4]],b:Ee[e[5]]<<4|Ee[e[6]],a:t===9?Ee[e[7]]<<4|Ee[e[8]]:255})),i}const k1=(e,t)=>e<255?t(e):"";function F1(e){var t=O1(e)?P1:L1;return e?"#"+t(e.r)+t(e.g)+t(e.b)+k1(e.a,t):void 0}const N1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dg(e,t,i){const n=t*Math.min(i,1-i),s=(r,o=(r+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function z1(e,t,i){const n=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function B1(e,t,i){const n=Dg(e,1,.5);let s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function j1(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function Rc(e){const i=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(i,n,s),o=Math.min(i,n,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=j1(i,n,s,h,r),l=l*60+.5),[l|0,c||0,a]}function Cc(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Mi)}function Mc(e,t,i){return Cc(Dg,e,t,i)}function W1(e,t,i){return Cc(B1,e,t,i)}function U1(e,t,i){return Cc(z1,e,t,i)}function kg(e){return(e%360+360)%360}function V1(e){const t=N1.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?hs(+t[5]):Mi(+t[5]));const s=kg(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=W1(s,r,o):t[1]==="hsv"?n=U1(s,r,o):n=Mc(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}function H1(e,t){var i=Rc(e);i[0]=kg(i[0]+t),i=Mc(i),e.r=i[0],e.g=i[1],e.b=i[2]}function X1(e){if(!e)return;const t=Rc(e),i=t[0],n=mu(t[1]),s=mu(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${oi(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const _u={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function G1(){const e={},t=Object.keys(pu),i=Object.keys(_u);let n,s,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],s=0;s<i.length;s++)r=i[s],a=a.replace(r,_u[r]);r=parseInt(pu[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let xr;function Y1(e){xr||(xr=G1(),xr.transparent=[0,0,0,0]);const t=xr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const K1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $1(e){const t=K1.exec(e);let i=255,n,s,r;if(t){if(t[7]!==n){const o=+t[7];i=t[8]?hs(o):wi(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?hs(n):wi(n,0,255)),s=255&(t[4]?hs(s):wi(s,0,255)),r=255&(t[6]?hs(r):wi(r,0,255)),{r:n,g:s,b:r,a:i}}}function Z1(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${oi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ra=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,gn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function q1(e,t,i){const n=gn(oi(e.r)),s=gn(oi(e.g)),r=gn(oi(e.b));return{r:Mi(Ra(n+i*(gn(oi(t.r))-n))),g:Mi(Ra(s+i*(gn(oi(t.g))-s))),b:Mi(Ra(r+i*(gn(oi(t.b))-r))),a:e.a+i*(t.a-e.a)}}function br(e,t,i){if(e){let n=Rc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=Mc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Fg(e,t){return e&&Object.assign(t||{},e)}function yu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Mi(e[3]))):(t=Fg(e,{r:0,g:0,b:0,a:1}),t.a=Mi(t.a)),t}function J1(e){return e.charAt(0)==="r"?$1(e):V1(e)}class Ws{constructor(t){if(t instanceof Ws)return t;const i=typeof t;let n;i==="object"?n=yu(t):i==="string"&&(n=D1(t)||Y1(t)||J1(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Fg(this._rgb);return t&&(t.a=oi(t.a)),t}set rgb(t){this._rgb=yu(t)}rgbString(){return this._valid?Z1(this._rgb):void 0}hexString(){return this._valid?F1(this._rgb):void 0}hslString(){return this._valid?X1(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,s=t.rgb;let r;const o=i===r?.5:i,a=2*o-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*s.r+.5,n.g=255&c*n.g+r*s.g+.5,n.b=255&c*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=q1(this._rgb,t._rgb,i)),this}clone(){return new Ws(this.rgb)}alpha(t){return this._rgb.a=Mi(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=nr(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return br(this._rgb,2,t),this}darken(t){return br(this._rgb,2,-t),this}saturate(t){return br(this._rgb,1,t),this}desaturate(t){return br(this._rgb,1,-t),this}rotate(t){return H1(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Qe(){}const Q1=(()=>{let e=0;return()=>e++})();function It(e){return e==null}function zt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function gt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Se(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ve(e,t){return Se(e)?e:t}function wt(e,t){return typeof e>"u"?t:e}const tE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function vt(e,t,i,n){let s,r,o;if(zt(e))for(r=e.length,s=0;s<r;s++)t.call(i,e[s],s);else if(gt(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])}function lo(e,t){let i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],r=t[i],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function co(e){if(zt(e))return e.map(co);if(gt(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let s=0;for(;s<n;++s)t[i[s]]=co(e[i[s]]);return t}return e}function Ng(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function eE(e,t,i,n){if(!Ng(e))return;const s=t[e],r=i[e];gt(s)&&gt(r)?Us(s,r,n):t[e]=co(r)}function Us(e,t,i){const n=zt(t)?t:[t],s=n.length;if(!gt(e))return e;i=i||{};const r=i.merger||eE;let o;for(let a=0;a<s;++a){if(o=n[a],!gt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,i)}return e}function vs(e,t){return Us(e,t,{merger:iE})}function iE(e,t,i){if(!Ng(e))return;const n=t[e],s=i[e];gt(n)&&gt(s)?vs(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=co(s))}const xu={"":e=>e,x:e=>e.x,y:e=>e.y};function nE(e){const t=e.split("."),i=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function sE(e){const t=nE(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function Nn(e,t){return(xu[t]||(xu[t]=sE(t)))(e)}function Sc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vs=e=>typeof e<"u",Pi=e=>typeof e=="function",bu=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function rE(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const qt=Math.PI,Si=2*qt,ho=Number.POSITIVE_INFINITY,oE=qt/180,De=qt/2,ji=qt/4,Eu=qt*2/3,dl=Math.log10,Ai=Math.sign;function Nr(e,t,i){return Math.abs(e-t)<i}function vu(e){const t=Math.round(e);e=Nr(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(dl(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function aE(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,r)=>s-r).pop(),t}function uo(e){return!isNaN(parseFloat(e))&&isFinite(e)}function lE(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function cE(e,t,i){let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function $i(e){return e*(qt/180)}function hE(e){return e*(180/qt)}function wu(e){if(!Se(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function uE(e,t){const i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*qt&&(r+=Si),{angle:r,distance:s}}function fE(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Wi(e){return(e%Si+Si)%Si}function dE(e,t,i,n){const s=Wi(e),r=Wi(t),o=Wi(i),a=Wi(r-s),l=Wi(o-s),c=Wi(s-r),h=Wi(s-o);return s===r||s===o||n&&r===o||a>l&&c<h}function ke(e,t,i){return Math.max(t,Math.min(i,e))}function gE(e){return ke(e,-32768,32767)}function En(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Ac(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}const gl=(e,t,i,n)=>Ac(e,i,n?s=>{const r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),mE=(e,t,i)=>Ac(e,i,n=>e[n][t]>=i);function _E(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}const zg=["push","pop","shift","splice","unshift"];function pE(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),zg.forEach(i=>{const n="_onData"+Sc(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function Tu(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(zg.forEach(r=>{delete e[r]}),delete e._chartjs)}function Bg(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const jg=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Wg(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,jg.call(window,()=>{n=!1,e.apply(t,i)}))}}function yE(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const Ic=e=>e==="start"?"left":e==="end"?"right":"center",Xt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,xE=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t,Er=e=>e===0||e===1,Ru=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Si/i)),Cu=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Si/i)+1,ws={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*De)+1,easeOutSine:e=>Math.sin(e*De),easeInOutSine:e=>-.5*(Math.cos(qt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Er(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Er(e)?e:Ru(e,.075,.3),easeOutElastic:e=>Er(e)?e:Cu(e,.075,.3),easeInOutElastic(e){return Er(e)?e:e<.5?.5*Ru(e*2,.1125,.45):.5+.5*Cu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ws.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ws.easeInBounce(e*2)*.5:ws.easeOutBounce(e*2-1)*.5+.5};function Ug(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Mu(e){return Ug(e)?e:new Ws(e)}function Ca(e){return Ug(e)?e:new Ws(e).saturate(.5).darken(.1).hexString()}const bE=["x","y","borderWidth","radius","tension"],EE=["color","borderColor","backgroundColor"];function vE(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:EE},numbers:{type:"number",properties:bE}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function wE(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Su=new Map;function TE(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Su.get(i);return n||(n=new Intl.NumberFormat(e,t),Su.set(i,n)),n}function Vg(e,t,i){return TE(t,i).format(e)}const Hg={values(e){return zt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let s,r=e;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=RE(e,i)}const o=dl(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Vg(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(dl(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Hg.numeric.call(this,e,t,i):""}};function RE(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var Xg={formatters:Hg};function CE(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const en=Object.create(null),ml=Object.create(null);function Ts(e,t){if(!t)return e;const i=t.split(".");for(let n=0,s=i.length;n<s;++n){const r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function Ma(e,t,i){return typeof t=="string"?Us(Ts(e,t),i):Us(Ts(e,""),t)}class ME{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Ca(s.backgroundColor),this.hoverBorderColor=(n,s)=>Ca(s.borderColor),this.hoverColor=(n,s)=>Ca(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Ma(this,t,i)}get(t){return Ts(this,t)}describe(t,i){return Ma(ml,t,i)}override(t,i){return Ma(en,t,i)}route(t,i,n,s){const r=Ts(this,t),o=Ts(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=o[s];return gt(l)?Object.assign({},c,l):wt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var Dt=new ME({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vE,wE,CE]);function SE(e){return!e||It(e.size)||It(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Au(e,t,i,n,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n}function Ui(e,t,i){const n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function Iu(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Pu(e,t,i,n){Gg(e,t,i,n,null)}function Gg(e,t,i,n,s){let r,o,a,l,c,h,u,f;const d=t.pointStyle,g=t.rotation,m=t.radius;let _=(g||0)*oE;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(_),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),d){default:s?e.ellipse(i,n,s/2,m,0,0,Si):e.arc(i,n,m,0,Si),e.closePath();break;case"triangle":h=s?s/2:m,e.moveTo(i+Math.sin(_)*h,n-Math.cos(_)*m),_+=Eu,e.lineTo(i+Math.sin(_)*h,n-Math.cos(_)*m),_+=Eu,e.lineTo(i+Math.sin(_)*h,n-Math.cos(_)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(_+ji)*l,u=Math.cos(_+ji)*(s?s/2-c:l),a=Math.sin(_+ji)*l,f=Math.sin(_+ji)*(s?s/2-c:l),e.arc(i-u,n-a,c,_-qt,_-De),e.arc(i+f,n-o,c,_-De,_),e.arc(i+u,n+a,c,_,_+De),e.arc(i-f,n+o,c,_+De,_+qt),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,h=s?s/2:l,e.rect(i-h,n-l,2*h,2*l);break}_+=ji;case"rectRot":u=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,f=Math.sin(_)*(s?s/2:m),e.moveTo(i-u,n-a),e.lineTo(i+f,n-o),e.lineTo(i+u,n+a),e.lineTo(i-f,n+o),e.closePath();break;case"crossRot":_+=ji;case"cross":u=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,f=Math.sin(_)*(s?s/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o);break;case"star":u=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,f=Math.sin(_)*(s?s/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o),_+=ji,u=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,f=Math.sin(_)*(s?s/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o);break;case"line":o=s?s/2:Math.cos(_)*m,a=Math.sin(_)*m,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(_)*(s?s/2:m),n+Math.sin(_)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Yg(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Pc(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Lc(e){e.restore()}function AE(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),It(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function IE(e,t,i,n,s){if(s.strikethrough||s.underline){const r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function PE(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Hs(e,t,i,n,s,r={}){const o=zt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,AE(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&PE(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),It(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,i,n,r.maxWidth)),e.fillText(c,i,n,r.maxWidth),IE(e,i,n,c,r),n+=Number(s.lineHeight);e.restore()}function fo(e,t){const{x:i,y:n,w:s,h:r,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,1.5*qt,qt,!0),e.lineTo(i,n+r-o.bottomLeft),e.arc(i+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,qt,De,!0),e.lineTo(i+s-o.bottomRight,n+r),e.arc(i+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,De,0,!0),e.lineTo(i+s,n+o.topRight),e.arc(i+s-o.topRight,n+o.topRight,o.topRight,0,-De,!0),e.lineTo(i+o.topLeft,n)}const LE=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,OE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function DE(e,t){const i=(""+e).match(LE);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const kE=e=>+e||0;function Kg(e,t){const i={},n=gt(t),s=n?Object.keys(t):t,r=gt(e)?n?o=>wt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)i[o]=kE(r(o));return i}function $g(e){return Kg(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Pn(e){return Kg(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ae(e){const t=$g(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $t(e,t){e=e||{},t=t||Dt.font;let i=wt(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=wt(e.style,t.style);n&&!(""+n).match(OE)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:wt(e.family,t.family),lineHeight:DE(wt(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:wt(e.weight,t.weight),string:""};return s.string=SE(s),s}function vr(e,t,i,n){let s,r,o;for(s=0,r=e.length;s<r;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function FE(e,t,i){const{min:n,max:s}=e,r=tE(t,(s-n)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function Un(e,t){return Object.assign(Object.create(e),t)}function Oc(e,t=[""],i,n,s=()=>e[0]){const r=i||e;typeof n>"u"&&(n=Qg("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:a=>Oc([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return qg(a,l,()=>HE(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Ou(a).includes(l)},ownKeys(a){return Ou(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function zn(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Zg(e,n),setContext:r=>zn(e,r,i,n),override:r=>zn(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return qg(r,o,()=>zE(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Zg(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:Pi(i)?i:()=>i,isIndexable:Pi(n)?n:()=>n}}const NE=(e,t)=>e?e+Sc(t):t,Dc=(e,t)=>gt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function qg(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=i();return e[t]=n,n}function zE(e,t,i){const{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=e;let a=n[t];return Pi(a)&&o.isScriptable(t)&&(a=BE(t,a,e,i)),zt(a)&&a.length&&(a=jE(t,a,e,o.isIndexable)),Dc(t,a)&&(a=zn(a,s,r&&r[t],o)),a}function BE(e,t,i,n){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),Dc(e,l)&&(l=kc(s._scopes,s,e,l)),l}function jE(e,t,i,n){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(gt(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=kc(c,s,e,h);t.push(zn(u,r,o&&o[e],a))}}return t}function Jg(e,t,i){return Pi(e)?e(t,i):e}const WE=(e,t)=>e===!0?t:typeof e=="string"?Nn(t,e):void 0;function UE(e,t,i,n,s){for(const r of t){const o=WE(i,r);if(o){e.add(o);const a=Jg(o._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n<"u"&&i!==n)return null}return!1}function kc(e,t,i,n){const s=t._rootScopes,r=Jg(t._fallback,i,n),o=[...e,...s],a=new Set;a.add(n);let l=Lu(a,o,i,r||i,n);return l===null||typeof r<"u"&&r!==i&&(l=Lu(a,o,r,l,n),l===null)?!1:Oc(Array.from(a),[""],s,r,()=>VE(t,i,n))}function Lu(e,t,i,n,s){for(;i;)i=UE(e,t,i,n,s);return i}function VE(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];return zt(s)&&gt(i)?i:s||{}}function HE(e,t,i,n){let s;for(const r of t)if(s=Qg(NE(r,e),i),typeof s<"u")return Dc(e,s)?kc(i,n,e,s):s}function Qg(e,t){for(const i of t){if(!i)continue;const n=i[e];if(typeof n<"u")return n}}function Ou(e){let t=e._keys;return t||(t=e._keys=XE(e._scopes)),t}function XE(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function Fc(){return typeof window<"u"&&typeof document<"u"}function Nc(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function go(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const Yo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function GE(e,t){return Yo(e).getPropertyValue(t)}const YE=["top","right","bottom","left"];function Ji(e,t,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const r=YE[s];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const KE=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function $E(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:r}=n;let o=!1,a,l;if(KE(s,r,e.target))a=s,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Xi(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,s=Yo(i),r=s.boxSizing==="border-box",o=Ji(s,"padding"),a=Ji(s,"border","width"),{x:l,y:c,box:h}=$E(e,i),u=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:d,height:g}=t;return r&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/d*i.width/n),y:Math.round((c-f)/g*i.height/n)}}function ZE(e,t,i){let n,s;if(t===void 0||i===void 0){const r=e&&Nc(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Yo(r),l=Ji(a,"border","width"),c=Ji(a,"padding");t=o.width-c.width-l.width,i=o.height-c.height-l.height,n=go(a.maxWidth,r,"clientWidth"),s=go(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||ho,maxHeight:s||ho}}const wr=e=>Math.round(e*10)/10;function qE(e,t,i,n){const s=Yo(e),r=Ji(s,"margin"),o=go(s.maxWidth,e,"clientWidth")||ho,a=go(s.maxHeight,e,"clientHeight")||ho,l=ZE(e,t,i);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=Ji(s,"border","width"),d=Ji(s,"padding");c-=d.width+f.width,h-=d.height+f.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?c/n:h-r.height),c=wr(Math.min(c,o,l.maxWidth)),h=wr(Math.min(h,a,l.maxHeight)),c&&!h&&(h=wr(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=wr(Math.floor(h*n))),{width:c,height:h}}function Du(e,t,i){const n=t||1,s=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=n,o.height=s,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const JE=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Fc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function ku(e,t){const i=GE(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const QE=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},tv=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Ln(e,t,i){return e?QE(t,i):tv()}function tm(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function em(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class ev{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){const r=i.listeners[s],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=jg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ei=new ev;const Fu="transparent",iv={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=Mu(e||Fu),s=n.valid&&Mu(t||Fu);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class nv{constructor(t,i,n,s){const r=i[n];s=vr([t.to,s,r,t.from]);const o=vr([t.from,r,s]);this._active=!0,this._fn=t.fn||iv[t.type||typeof o],this._easing=ws[t.easing]||ws.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=vr([t.to,i,s,t.from]),this._from=vr([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=r;return}l=i/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class im{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!gt(t))return;const i=Object.keys(Dt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!gt(r))return;const o={};for(const a of i)o[a]=r[a];(zt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){const n=i.options,s=rv(t,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&sv(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){const n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}const h=i[c];let u=r[c];const f=n.get(c);if(u)if(f&&u.active()){u.update(f,h,a);continue}else u.cancel();if(!f||!f.duration){t[c]=h;continue}r[c]=u=new nv(f,t,c,h),s.push(u)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return ei.add(this._chart,n),!0}}function sv(e,t){const i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const r=e[n[s]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function rv(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Nu(e,t){const i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function ov(e,t,i){if(i===!1)return!1;const n=Nu(e,i),s=Nu(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function av(e){let t,i,n,s;return gt(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function nm(e,t){const i=[],n=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=n.length;s<r;++s)i.push(n[s].index);return i}function zu(e,t,i,n={}){const s=e.keys,r=n.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===i){if(h=!0,n.all)continue;break}c=e.values[l],Se(c)&&(r||t===0||Ai(t)===Ai(c))&&(t+=c)}return!h&&!n.all?0:t}function lv(e,t){const{iScale:i,vScale:n}=t,s=i.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:e[h]};return a}function Sa(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function cv(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function hv(e){const{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function uv(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Bu(e,t,i,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const r=e[s.index];if(i&&r>0||!i&&r<0)return s.index}return null}function ju(e,t){const{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,h=cv(r,o,n),u=t.length;let f;for(let d=0;d<u;++d){const g=t[d],{[l]:m,[c]:_}=g,p=g._stacks||(g._stacks={});f=p[c]=uv(s,h,m),f[a]=_,f._top=Bu(f,o,!0,n.type),f._bottom=Bu(f,o,!1,n.type);const x=f._visualValues||(f._visualValues={});x[a]=_}}function Aa(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function fv(e,t){return Un(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function dv(e,t,i){return Un(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Jn(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}const Ia=e=>e==="reset"||e==="none",Wu=(e,t)=>t?e:Object.assign({},e),gv=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:nm(i,!0),values:null};class Rs{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Sa(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(u,f,d,g)=>u==="x"?f:u==="r"?g:d,r=i.xAxisID=wt(n.xAxisID,Aa(t,"x")),o=i.yAxisID=wt(n.yAxisID,Aa(t,"y")),a=i.rAxisID=wt(n.rAxisID,Aa(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,r,o,a),h=i.vAxisID=s(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Tu(this._data,this),t._stacked&&Jn(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(gt(i)){const s=this._cachedMeta;this._data=lv(i,s)}else if(n!==i){if(n){Tu(n,this);const s=this._cachedMeta;Jn(s),s._parsed=[]}i&&Object.isExtensible(i)&&pE(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=i._stacked;i._stacked=Sa(i.vScale,i),i.stack!==n.stack&&(s=!0,Jn(i),i.stack=n.stack),this._resyncElements(t),(s||r!==i._stacked)&&(ju(this,i._parsed),i._stacked=Sa(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,u,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{zt(s[t])?f=this.parseArrayData(n,s,t,i):gt(s[t])?f=this.parseObjectData(n,s,t,i):f=this.parsePrimitiveData(n,s,t,i);const d=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<i;++h)n._parsed[h+t]=u=f[h],l&&(d()&&(l=!1),c=u);n._sorted=l}o&&ju(this,f)}parsePrimitiveData(t,i,n,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(s);let f,d,g;for(f=0,d=s;f<d;++f)g=f+n,u[f]={[a]:h||r.parse(c[g],g),[l]:o.parse(i[g],g)};return u}parseArrayData(t,i,n,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+n,u=i[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,i,n,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,u,f,d;for(h=0,u=s;h<u;++h)f=h+n,d=i[f],c[h]={x:r.parse(Nn(d,a),f),y:o.parse(Nn(d,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const s=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:nm(s,!0),values:i._stacks[t.axis]._visualValues};return zu(a,o,r.index,{mode:n})}updateRangeFromParsed(t,i,n,s){const r=n[i.axis];let o=r===null?NaN:r;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,o=zu(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,o=s.length,a=this._getOtherScale(t),l=gv(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=hv(a);let f,d;function g(){d=s[f];const m=d[a.axis];return!Se(d[t.axis])||h>m||u<m}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let s,r,o;for(s=0,r=i.length;s<r;++s)o=i[s][t.axis],Se(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,s=i.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=av(wt(this.options.clip,ov(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=s[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=dv(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=fv(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const s=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&Vs(n);if(a)return Wu(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),d=Object.keys(Dt.elements[t]),g=()=>this.getContext(n,s,i),m=c.resolveNamedOptions(f,d,g,u);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Wu(m,l))),m}_resolveAnimations(t,i,n){const s=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,i),f=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(f,this.getContext(t,n,i))}const c=new im(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Ia(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(i,r)||r!==s;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:o}}updateElement(t,i,n,s){Ia(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!Ia(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;const r=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,r=i.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,i,n=!0){const s=this._cachedMeta,r=s.data,o=t+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=o;a--)c[a]=c[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(r,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,i);n._stacked&&Jn(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ut(Rs,"defaults",{}),ut(Rs,"datasetElementType",null),ut(Rs,"dataElementType",null);function mv(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let s=0,r=i.length;s<r;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=Bg(n.sort((s,r)=>s-r))}return e._cache.$bar}function _v(e){const t=e.iScale,i=mv(t,e.type);let n=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Vs(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(s=0,r=i.length;s<r;++s)o=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return n}function pv(e,t,i,n){const s=i.barThickness;let r,o;return It(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function yv(e,t,i,n){const s=t.pixels,r=s[e];let o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:i.barPercentage,start:c}}function xv(e,t,i,n){const s=i.parse(e[0],n),r=i.parse(e[1],n),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function sm(e,t,i,n){return zt(e)?xv(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Uu(e,t,i,n){const s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,u,f;for(c=i,h=i+n;c<h;++c)f=t[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(sm(f,u,r,c));return l}function Pa(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function bv(e,t,i){return e!==0?Ai(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function Ev(e){let t,i,n,s,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:i,end:n,reverse:t,top:s,bottom:r}}function vv(e,t,i,n){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Ev(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=h:(r[Vu(h,o,a,l)]=!0,s=c)),r[Vu(s,o,a,l)]=!0,e.borderSkipped=r}function Vu(e,t,i,n){return n?(e=wv(e,t,i),e=Hu(e,i,t)):e=Hu(e,t,i),e}function wv(e,t,i){return e===t?i:e===i?t:e}function Hu(e,t,i){return e==="start"?t:e==="end"?i:e}function Tv(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class zr extends Rs{parsePrimitiveData(t,i,n,s){return Uu(t,i,n,s)}parseArrayData(t,i,n,s){return Uu(t,i,n,s)}parseObjectData(t,i,n,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let f,d,g,m;for(f=n,d=n+s;f<d;++f)m=i[f],g={},g[r.axis]=r.parse(Nn(m,c),f),u.push(sm(Nn(m,h),g,o,f));return u}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);const r=n._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:n,vScale:s}=i,r=this.getParsed(t),o=r._custom,a=Pa(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:f}=this._getSharedOptions(i,s);for(let d=i;d<i+n;d++){const g=this.getParsed(d),m=r||It(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),_=this._calculateBarIndexPixels(d,h),p=(g._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!p||Pa(g._custom)||o===p._top||o===p._bottom,x:c?m.head:_.center,y:c?_.center:m.head,height:c?_.size:Math.abs(m.size),width:c?Math.abs(m.size):_.size};f&&(x.options=u||this.resolveDataElementOptions(d,t[d].active?"active":s));const w=x.options||t[d].options;vv(x,w,p,o),Tv(x,w,h.ratio),this.updateElement(t[d],d,x,s)}}_getStacks(t,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(i),l=a&&a[n.axis],c=h=>{const u=h._parsed.find(d=>d[n.axis]===l),f=u&&u[h.vScale.axis];if(It(f)||isNaN(f))return!0};for(const h of s)if(!(i!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){const s=this._getStacks(t,n),r=i!==void 0?s.indexOf(i):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,i=this._cachedMeta,n=i.iScale,s=[];let r,o;for(r=0,o=i.data.length;r<o;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||_v(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=Pa(c);let u=l[i.axis],f=0,d=n?this.applyStack(i,l,n):u,g,m;d!==u&&(f=d-u,d=u),h&&(u=c.barStart,d=c.barEnd-c.barStart,u!==0&&Ai(u)!==Ai(c.barEnd)&&(f=0),f+=u);const _=!It(r)&&!h?r:f;let p=i.getPixelForValue(_);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(f+d):g=p,m=g-p,Math.abs(m)<o){m=bv(m,i,a)*o,u===a&&(p-=m/2);const x=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),b=Math.min(x,w),v=Math.max(x,w);p=Math.max(Math.min(p,v),b),g=p+m,n&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(p))}if(p===i.getPixelForValue(a)){const x=Ai(m)*i.getLineWidthForValue(a)/2;p+=x,m-=x}return{size:m,base:p,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){const n=i.scale,s=this.options,r=s.skipNull,o=wt(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=r?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?yv(t,i,s,c):pv(t,i,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length;let r=0;for(;r<s;++r)this.getParsed(r)[i.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}ut(zr,"id","bar"),ut(zr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ut(zr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Vi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zc{constructor(t){ut(this,"options");this.options=t||{}}static override(t){Object.assign(zc.prototype,t)}init(){}formats(){return Vi()}parse(){return Vi()}format(){return Vi()}add(){return Vi()}diff(){return Vi()}startOf(){return Vi()}endOf(){return Vi()}}var Rv={_date:zc};function Cv(e,t,i,n){const{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?mE:gl;if(n){if(s._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const u=l(r,t,i-h),f=l(r,t,i+h);return{lo:u.lo,hi:f.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function sr(e,t,i,n,s){const r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:f}=Cv(r[a],t,o,s);for(let d=u;d<=f;++d){const g=h[d];g.skip||n(g,c,d)}}}function Mv(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){const r=t?Math.abs(n.x-s.x):0,o=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function La(e,t,i,n,s){const r=[];return!s&&!e.isPointInArea(t)||sr(e,i,t,function(a,l,c){!s&&!Yg(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Sv(e,t,i,n){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:u}=uE(o,{x:t.x,y:t.y});dE(u,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return sr(e,i,t,r),s}function Av(e,t,i,n,s,r){let o=[];const a=Mv(i);let l=Number.POSITIVE_INFINITY;function c(h,u,f){const d=h.inRange(t.x,t.y,s);if(n&&!d)return;const g=h.getCenterPoint(s);if(!(!!r||e.isPointInArea(g))&&!d)return;const _=a(t,g);_<l?(o=[{element:h,datasetIndex:u,index:f}],l=_):_===l&&o.push({element:h,datasetIndex:u,index:f})}return sr(e,i,t,c),o}function Oa(e,t,i,n,s,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?Sv(e,t,i,s):Av(e,t,i,n,s,r)}function Xu(e,t,i,n,s){const r=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return sr(e,i,t,(l,c,h)=>{l[o]&&l[o](t[i],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:r}var Iv={evaluateInteractionItems:sr,modes:{index(e,t,i,n){const s=Xi(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?La(e,s,r,n,o):Oa(e,s,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,i,n){const s=Xi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?La(e,s,r,n,o):Oa(e,s,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,i,n){const s=Xi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return La(e,s,r,n,o)},nearest(e,t,i,n){const s=Xi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Oa(e,s,r,i.intersect,n,o)},x(e,t,i,n){const s=Xi(t,e);return Xu(e,s,"x",i.intersect,n)},y(e,t,i,n){const s=Xi(t,e);return Xu(e,s,"y",i.intersect,n)}}};const rm=["left","top","right","bottom"];function Qn(e,t){return e.filter(i=>i.pos===t)}function Gu(e,t){return e.filter(i=>rm.indexOf(i.pos)===-1&&i.box.axis===t)}function ts(e,t){return e.sort((i,n)=>{const s=t?n:i,r=t?i:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Pv(e){const t=[];let i,n,s,r,o,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function Lv(e){const t={};for(const i of e){const{stack:n,pos:s,stackWeight:r}=i;if(!n||!rm.includes(s))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Ov(e,t){const i=Lv(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=i[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return i}function Dv(e){const t=Pv(e),i=ts(t.filter(c=>c.box.fullSize),!0),n=ts(Qn(t,"left"),!0),s=ts(Qn(t,"right")),r=ts(Qn(t,"top"),!0),o=ts(Qn(t,"bottom")),a=Gu(t,"x"),l=Gu(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Qn(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function Yu(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function om(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function kv(e,t,i,n){const{pos:s,box:r}=i,o=e.maxPadding;if(!gt(s)){i.size&&(e[s]-=i.size);const u=n[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?r.height:r.width),i.size=u.size/u.count,e[s]+=i.size}r.getPadding&&om(o,r.getPadding());const a=Math.max(0,t.outerWidth-Yu(o,e,"left","right")),l=Math.max(0,t.outerHeight-Yu(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function Fv(e){const t=e.maxPadding;function i(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function Nv(e,t){const i=t.maxPadding;function n(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return n(e?["left","right"]:["top","bottom"])}function us(e,t,i,n){const s=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Nv(a.horizontal,t));const{same:u,other:f}=kv(t,i,a,n);c|=u&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&us(s,t,i,n)||h}function Tr(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function Ku(e,t,i,n){const s=i.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,f=c.size||l.height;Vs(c.start)&&(o=c.start),l.fullSize?Tr(l,s.left,o,i.outerWidth-s.right-s.left,f):Tr(l,t.left+c.placed,o,u,f),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,f=c.size||l.width;Vs(c.start)&&(r=c.start),l.fullSize?Tr(l,r,s.top,f,i.outerHeight-s.bottom-s.top):Tr(l,r,t.top+c.placed,f,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var Re={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const s=Ae(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),a=Dv(e.boxes),l=a.vertical,c=a.horizontal;vt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const h=l.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},s);om(f,Ae(n));const d=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),g=Ov(l.concat(c),u);us(a.fullSize,d,u,g),us(l,d,u,g),us(c,d,u,g)&&us(l,d,u,g),Fv(d),Ku(a.leftAndTop,d,u,g),d.x+=d.w,d.y+=d.h,Ku(a.rightAndBottom,d,u,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},vt(a.chartArea,m=>{const _=m.box;Object.assign(_,e.chartArea),_.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class am{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}}class zv extends am{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Br="$chartjs",Bv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$u=e=>e===null||e==="";function jv(e,t){const i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[Br]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",$u(s)){const r=ku(e,"width");r!==void 0&&(e.width=r)}if($u(n))if(e.style.height==="")e.height=e.width/(t||2);else{const r=ku(e,"height");r!==void 0&&(e.height=r)}return e}const lm=JE?{passive:!0}:!1;function Wv(e,t,i){e&&e.addEventListener(t,i,lm)}function Uv(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,lm)}function Vv(e,t){const i=Bv[e.type]||e.type,{x:n,y:s}=Xi(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function mo(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Hv(e,t,i){const n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||mo(a.addedNodes,n),o=o&&!mo(a.removedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function Xv(e,t,i){const n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||mo(a.removedNodes,n),o=o&&!mo(a.addedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Xs=new Map;let Zu=0;function cm(){const e=window.devicePixelRatio;e!==Zu&&(Zu=e,Xs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Gv(e,t){Xs.size||window.addEventListener("resize",cm),Xs.set(e,t)}function Yv(e){Xs.delete(e),Xs.size||window.removeEventListener("resize",cm)}function Kv(e,t,i){const n=e.canvas,s=n&&Nc(n);if(!s)return;const r=Wg((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),Gv(e,r),o}function Da(e,t,i){i&&i.disconnect(),t==="resize"&&Yv(e)}function $v(e,t,i){const n=e.canvas,s=Wg(r=>{e.ctx!==null&&i(Vv(r,e))},e);return Wv(n,t,s),s}class Zv extends am{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(jv(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[Br])return!1;const n=i[Br].initial;["height","width"].forEach(r=>{const o=n[r];It(o)?i.removeAttribute(r):i.setAttribute(r,o)});const s=n.style||{};return Object.keys(s).forEach(r=>{i.style[r]=s[r]}),i.width=i.width,delete i[Br],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const s=t.$proxies||(t.$proxies={}),o={attach:Hv,detach:Xv,resize:Kv}[i]||$v;s[i]=o(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Da,detach:Da,resize:Da}[i]||Uv)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return qE(t,i,n,s)}isAttached(t){const i=t&&Nc(t);return!!(i&&i.isConnected)}}function qv(e){return!Fc()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?zv:Zv}var Pr;let Vn=(Pr=class{constructor(){ut(this,"x");ut(this,"y");ut(this,"active",!1);ut(this,"options");ut(this,"$animations")}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return uo(this.x)&&uo(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}},ut(Pr,"defaults",{}),ut(Pr,"defaultRoutes"),Pr);function Jv(e,t){const i=e.options.ticks,n=Qv(e),s=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?ew(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return iw(t,c,r,o/s),c;const h=tw(r,t,s);if(o>0){let u,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(Rr(t,c,h,It(d)?0:a-d,a),u=0,f=o-1;u<f;u++)Rr(t,c,h,r[u],r[u+1]);return Rr(t,c,h,l,It(d)?t.length:l+d),c}return Rr(t,c,h),c}function Qv(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function tw(e,t,i){const n=nw(e),s=t.length/i;if(!n)return Math.max(s,1);const r=aE(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function ew(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function iw(e,t,i,n){let s=0,r=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}function Rr(e,t,i,n,s){const r=wt(n,0),o=Math.min(wt(s,e.length),e.length);let a=0,l,c,h;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),h=r;h<0;)a++,h=Math.round(r+a*i);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*i))}function nw(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const sw=e=>e==="left"?"right":e==="right"?"left":e,qu=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,Ju=(e,t)=>Math.min(t||e,e);function Qu(e,t){const i=[],n=e.length/t,s=e.length;let r=0;for(;r<s;r+=n)i.push(e[Math.floor(r)]);return i}function rw(e,t,i){const n=e.ticks.length,s=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function ow(e,t){vt(e,i=>{const n=i.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete i.data[n[r]];n.splice(0,s)}})}function es(e){return e.drawTicks?e.tickLength:0}function tf(e,t){if(!e.display)return 0;const i=$t(e.font,t),n=Ae(e.padding);return(zt(e.text)?e.text.length:1)*i.lineHeight+n.height}function aw(e,t){return Un(e,{scale:t,type:"scale"})}function lw(e,t,i){return Un(e,{tick:i,index:t,type:"tick"})}function cw(e,t,i){let n=Ic(e);return(i&&t!=="right"||!i&&t==="right")&&(n=sw(n)),n}function hw(e,t,i,n){const{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let u=0,f,d,g;const m=o-s,_=a-r;if(e.isHorizontal()){if(d=Xt(n,r,a),gt(i)){const p=Object.keys(i)[0],x=i[p];g=h[p].getPixelForValue(x)+m-t}else i==="center"?g=(c.bottom+c.top)/2+m-t:g=qu(e,i,t);f=a-r}else{if(gt(i)){const p=Object.keys(i)[0],x=i[p];d=h[p].getPixelForValue(x)-_+t}else i==="center"?d=(c.left+c.right)/2-_+t:d=qu(e,i,t);g=Xt(n,o,s),u=i==="left"?-De:De}return{titleX:d,titleY:g,maxWidth:f,rotation:u}}class Hn extends Vn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Ve(t,Number.POSITIVE_INFINITY),i=Ve(i,Number.NEGATIVE_INFINITY),n=Ve(n,Number.POSITIVE_INFINITY),s=Ve(s,Number.NEGATIVE_INFINITY),{min:Ve(t,n),max:Ve(i,s),minDefined:Se(t),maxDefined:Se(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,o.min)),r||(n=Math.max(n,o.max));return i=r&&i>n?n:i,n=s&&i>n?i:n,{min:Ve(i,Ve(n,i)),max:Ve(n,Ve(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=FE(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Qu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Jv(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=At(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=Ju(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,r=i.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!i.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),u=h.widest.width,f=h.highest.height,d=ke(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:d/(n-1),u+6>a&&(a=d/(n-(t.offset?.5:1)),l=this.maxHeight-es(t.grid)-i.padding-tf(t.title,this.chart.options.font),c=Math.sqrt(u*u+f*f),o=hE(Math.min(Math.asin(ke((h.highest.height+6)/a,-1,1)),Math.asin(ke(l/c,-1,1))-Math.asin(ke(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=tf(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=es(r)+l):(t.height=this.maxHeight,t.width=es(r)+l),n.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:f}=this._getLabelSizes(),d=n.padding*2,g=$i(this.labelRotation),m=Math.cos(g),_=Math.sin(g);if(a){const p=n.mirror?0:_*u.width+m*f.height;t.height=Math.min(this.maxHeight,t.height+p+d)}else{const p=n.mirror?0:m*u.width+_*f.height;t.width=Math.min(this.maxWidth,t.width+p+d)}this._calculatePadding(c,h,_,m)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=s*t.width,d=n*i.height):(f=n*t.height,d=s*i.width):r==="start"?d=i.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,d=i.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((d-u+o)*this.width/(this.width-u),0)}else{let h=i.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=i.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)It(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Qu(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/Ju(i,n));let c=0,h=0,u,f,d,g,m,_,p,x,w,b,v;for(u=0;u<i;u+=l){if(g=t[u].label,m=this._resolveTickFontOptions(u),s.font=_=m.string,p=r[_]=r[_]||{data:{},gc:[]},x=m.lineHeight,w=b=0,!It(g)&&!zt(g))w=Au(s,p.data,p.gc,w,g),b=x;else if(zt(g))for(f=0,d=g.length;f<d;++f)v=g[f],!It(v)&&!zt(v)&&(w=Au(s,p.data,p.gc,w,v),b+=x);o.push(w),a.push(b),c=Math.max(w,c),h=Math.max(b,h)}ow(r,i);const M=o.indexOf(c),P=a.indexOf(h),R=L=>({width:o[L]||0,height:a[L]||0});return{first:R(0),last:R(i-1),widest:R(M),highest:R(P),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return gE(this._alignToPixels?Ui(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=lw(this.getContext(),t,n))}return this.$context||(this.$context=aw(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=$i(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),f=es(r),d=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,_=m/2,p=function(X){return Ui(n,X,m)};let x,w,b,v,M,P,R,L,S,B,F,H;if(o==="top")x=p(this.bottom),P=this.bottom-f,L=x-_,B=p(t.top)+_,H=t.bottom;else if(o==="bottom")x=p(this.top),B=t.top,H=p(t.bottom)-_,P=x+_,L=this.top+f;else if(o==="left")x=p(this.right),M=this.right-f,R=x-_,S=p(t.left)+_,F=t.right;else if(o==="right")x=p(this.left),S=t.left,F=p(t.right)-_,M=x+_,R=this.left+f;else if(i==="x"){if(o==="center")x=p((t.top+t.bottom)/2+.5);else if(gt(o)){const X=Object.keys(o)[0],j=o[X];x=p(this.chart.scales[X].getPixelForValue(j))}B=t.top,H=t.bottom,P=x+_,L=P+f}else if(i==="y"){if(o==="center")x=p((t.left+t.right)/2);else if(gt(o)){const X=Object.keys(o)[0],j=o[X];x=p(this.chart.scales[X].getPixelForValue(j))}M=x-_,R=M-f,S=t.left,F=t.right}const J=wt(s.ticks.maxTicksLimit,u),W=Math.max(1,Math.ceil(u/J));for(w=0;w<u;w+=W){const X=this.getContext(w),j=r.setContext(X),Y=a.setContext(X),rt=j.lineWidth,Z=j.color,q=Y.dash||[],st=Y.dashOffset,ot=j.tickWidth,_t=j.tickColor,pt=j.tickBorderDash||[],at=j.tickBorderDashOffset;b=rw(this,w,l),b!==void 0&&(v=Ui(n,b,rt),c?M=R=S=F=v:P=L=B=H=v,d.push({tx1:M,ty1:P,tx2:R,ty2:L,x1:S,y1:B,x2:F,y2:H,width:rt,color:Z,borderDash:q,borderDashOffset:st,tickWidth:ot,tickColor:_t,tickBorderDash:pt,tickBorderDashOffset:at}))}return this._ticksLength=u,this._borderValue=x,d}_computeLabelItems(t){const i=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,f=es(n.grid),d=f+h,g=u?-h:d,m=-$i(this.labelRotation),_=[];let p,x,w,b,v,M,P,R,L,S,B,F,H="middle";if(s==="top")M=this.bottom-g,P=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+g,P=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(f);P=W.textAlign,v=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(f);P=W.textAlign,v=W.x}else if(i==="x"){if(s==="center")M=(t.top+t.bottom)/2+d;else if(gt(s)){const W=Object.keys(s)[0],X=s[W];M=this.chart.scales[W].getPixelForValue(X)+d}P=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")v=(t.left+t.right)/2-d;else if(gt(s)){const W=Object.keys(s)[0],X=s[W];v=this.chart.scales[W].getPixelForValue(X)}P=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const J=this._getLabelSizes();for(p=0,x=a.length;p<x;++p){w=a[p],b=w.label;const W=r.setContext(this.getContext(p));R=this.getPixelForTick(p)+r.labelOffset,L=this._resolveTickFontOptions(p),S=L.lineHeight,B=zt(b)?b.length:1;const X=B/2,j=W.color,Y=W.textStrokeColor,rt=W.textStrokeWidth;let Z=P;o?(v=R,P==="inner"&&(p===x-1?Z=this.options.reverse?"left":"right":p===0?Z=this.options.reverse?"right":"left":Z="center"),s==="top"?c==="near"||m!==0?F=-B*S+S/2:c==="center"?F=-J.highest.height/2-X*S+S:F=-J.highest.height+S/2:c==="near"||m!==0?F=S/2:c==="center"?F=J.highest.height/2-X*S:F=J.highest.height-B*S,u&&(F*=-1),m!==0&&!W.showLabelBackdrop&&(v+=S/2*Math.sin(m))):(M=R,F=(1-B)*S/2);let q;if(W.showLabelBackdrop){const st=Ae(W.backdropPadding),ot=J.heights[p],_t=J.widths[p];let pt=F-st.top,at=0-st.left;switch(H){case"middle":pt-=ot/2;break;case"bottom":pt-=ot;break}switch(P){case"center":at-=_t/2;break;case"right":at-=_t;break;case"inner":p===x-1?at-=_t:p>0&&(at-=_t/2);break}q={left:at,top:pt,width:_t+st.width,height:ot+st.height,color:W.backdropColor}}_.push({label:b,font:L,textOffset:F,options:{rotation:m,color:j,strokeColor:Y,strokeWidth:rt,textAlign:Z,textBaseline:H,translation:[v,M],backdrop:q}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-$i(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return i==="left"?s?(h=this.right+r,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):i==="right"?s?(h=this.left+r,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:s,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(r=0,o=s.length;r<o;++r){const l=s[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,f;this.isHorizontal()?(c=Ui(t,this.left,o)-o/2,h=Ui(t,this.right,a)+a/2,u=f=l):(u=Ui(t,this.top,o)-o/2,f=Ui(t,this.bottom,a)+a/2,c=h=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(c,u),i.lineTo(h,f),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Pc(n,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Hs(n,c,0,h,l,a)}s&&Lc(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const r=$t(n.font),o=Ae(n.padding),a=n.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||gt(i)?(l+=o.bottom,zt(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:f}=hw(this,l,i,a);Hs(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:f,textAlign:cw(a,i,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=wt(t.grid&&t.grid.z,-1),s=wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Hn.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return $t(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Cr{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;dw(i)&&(n=this.register(i));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,uw(t,o,n),this.override&&Dt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in Dt[s]&&(delete Dt[s][n],this.override&&delete en[n])}}function uw(e,t,i){const n=Us(Object.create(null),[i?Dt.get(i):{},Dt.get(t),e.defaults]);Dt.set(t,n),e.defaultRoutes&&fw(t,e.defaultRoutes),e.descriptors&&Dt.describe(t,e.descriptors)}function fw(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),s=n.pop(),r=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");Dt.route(r,s,l,a)})}function dw(e){return"id"in e&&"defaults"in e}class gw{constructor(){this.controllers=new Cr(Rs,"datasets",!0),this.elements=new Cr(Vn,"elements"),this.plugins=new Cr(Object,"plugins"),this.scales=new Cr(Hn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{const r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):vt(s,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){const s=Sc(t);At(n["before"+s],[],n),i[t](n),At(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Ge=new gw;class mw{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,s){s=s||{};for(const r of t){const o=r.plugin,a=o[n],l=[i,s,r.options];if(At(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){It(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,s=wt(n.options&&n.options.plugins,{}),r=_w(n);return s===!1&&!i?[]:yw(t,r,s,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}}function _w(e){const t={},i=[],n=Object.keys(Ge.plugins.items);for(let r=0;r<n.length;r++)i.push(Ge.getPlugin(n[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function pw(e,t){return!t&&e===!1?null:e===!0?{}:e}function yw(e,{plugins:t,localIds:i},n,s){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=pw(n[l],s);c!==null&&r.push({plugin:a,options:xw(e.config,{plugin:a,local:i[l]},c,o)})}return r}function xw(e,{plugin:t,local:i},n,s){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _l(e,t){const i=Dt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function bw(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Ew(e,t){return e===t?"_index_":"_value_"}function ef(e){if(e==="x"||e==="y"||e==="r")return e}function vw(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function pl(e,...t){if(ef(e))return e;for(const i of t){const n=i.axis||vw(i.position)||e.length>1&&ef(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function nf(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function ww(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return nf(e,"x",i[0])||nf(e,"y",i[0])}return{}}function Tw(e,t){const i=en[e.type]||{scales:{}},n=t.scales||{},s=_l(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!gt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=pl(o,a,ww(o,e),Dt.scales[a.type]),c=Ew(l,s),h=i.scales||{};r[o]=vs(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||_l(a,t),h=(en[a]||{}).scales||{};Object.keys(h).forEach(u=>{const f=bw(u,l),d=o[f+"AxisID"]||f;r[d]=r[d]||Object.create(null),vs(r[d],[{axis:f},n[d],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];vs(a,[Dt.scales[a.type],Dt.scale])}),r}function hm(e){const t=e.options||(e.options={});t.plugins=wt(t.plugins,{}),t.scales=Tw(e,t)}function um(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Rw(e){return e=e||{},e.data=um(e.data),hm(e),e}const sf=new Map,fm=new Set;function Mr(e,t){let i=sf.get(e);return i||(i=t(),sf.set(e,i),fm.add(i)),i}const is=(e,t,i)=>{const n=Nn(t,i);n!==void 0&&e.add(n)};class Cw{constructor(t){this._config=Rw(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=um(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),hm(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Mr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Mr(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Mr(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return Mr(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){const{options:s,type:r}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;const l=new Set;i.forEach(h=>{t&&(l.add(t),h.forEach(u=>is(l,t,u))),h.forEach(u=>is(l,s,u)),h.forEach(u=>is(l,en[r]||{},u)),h.forEach(u=>is(l,Dt,u)),h.forEach(u=>is(l,ml,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),fm.has(i)&&o.set(i,c),c}chartOptionScopes(){const{options:t,type:i}=this;return[t,en[i]||{},Dt.datasets[i]||{},{type:i},Dt,ml]}resolveNamedOptions(t,i,n,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=rf(this._resolverCache,t,s);let l=o;if(Sw(o,i)){r.$shared=!1,n=Pi(n)?n():n;const c=this.createResolver(t,n,a);l=zn(o,n,c)}for(const c of i)r[c]=l[c];return r}createResolver(t,i,n=[""],s){const{resolver:r}=rf(this._resolverCache,t,n);return gt(i)?zn(r,i,void 0,s):r}}function rf(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const s=i.join();let r=n.get(s);return r||(r={resolver:Oc(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,r)),r}const Mw=e=>gt(e)&&Object.getOwnPropertyNames(e).some(t=>Pi(e[t]));function Sw(e,t){const{isScriptable:i,isIndexable:n}=Zg(e);for(const s of t){const r=i(s),o=n(s),a=(o||r)&&e[s];if(r&&(Pi(a)||Mw(a))||o&&zt(a))return!0}return!1}var Aw="4.4.7";const Iw=["top","bottom","left","right","chartArea"];function of(e,t){return e==="top"||e==="bottom"||Iw.indexOf(e)===-1&&t==="x"}function af(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function lf(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),At(i&&i.onComplete,[e],t)}function Pw(e){const t=e.chart,i=t.options.animation;At(i&&i.onProgress,[e],t)}function dm(e){return Fc()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const jr={},cf=e=>{const t=dm(e);return Object.values(jr).filter(i=>i.canvas===t).pop()};function Lw(e,t,i){const n=Object.keys(e);for(const s of n){const r=+s;if(r>=t){const o=e[s];delete e[s],(i>0||r>t)&&(e[r+i]=o)}}}function Ow(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function Sr(e,t,i){return e.options.clip?e[i]:t[i]}function Dw(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:Sr(i,t,"left"),right:Sr(i,t,"right"),top:Sr(n,t,"top"),bottom:Sr(n,t,"bottom")}:t}var _i;let Ko=(_i=class{static register(...t){Ge.add(...t),hf()}static unregister(...t){Ge.remove(...t),hf()}constructor(t,i){const n=this.config=new Cw(i),s=dm(t),r=cf(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||qv(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Q1(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yE(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],jr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ei.listen(this,"complete",lf),ei.listen(this,"progress",Pw),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:r}=this;return It(t)?i&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ge}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Du(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Iu(this.canvas,this.ctx),this}stop(){return ei.stop(this),this}resize(t,i){ei.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,i,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Du(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};vt(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const a=i[o],l=pl(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),vt(r,o=>{const a=o.options,l=a.id,c=pl(l,a),h=wt(a.type,o.dtype);(a.position===void 0||of(a.position,c)!==of(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;if(l in n&&n[l].type===h)u=n[l];else{const f=Ge.getScale(h);u=new f({id:l,type:h,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),vt(s,(o,a)=>{o||delete n[a]}),vt(n,o=>{Re.configure(this,o,o.options),Re.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(af("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const r=i[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||_l(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=Ge.getController(a),{datasetElementType:c,dataElementType:h}=Dt.datasets[a];Object.assign(l,{dataElementType:Ge.getElement(h),datasetElementType:c&&Ge.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){vt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),f=!s&&r.indexOf(u)===-1;u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||vt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(af("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){vt(this.scales,t=>{Re.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!bu(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of i){const o=n==="_removeElements"?-r:r;Lw(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<i;r++)if(!bu(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Re.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],vt(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,Pi(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ei.has(this)?this.attached&&!ei.running(this)&&ei.start(this):(this.draw(),lf({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let s,r;for(s=0,r=i.length;s<r;++s){const o=i[s];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,s=!n.disabled,r=Dw(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&Pc(i,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),t.controller.draw(),s&&Lc(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Yg(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){const r=Iv.modes[i];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let s=n.filter(r=>r&&r._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Un(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const s=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Vs(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ei.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Iu(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete jr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};vt(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){vt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},vt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const s=n?"set":"remove";let r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!lo(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(i,t),a=n?t:r(t,i);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const r=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:s=[],options:r}=this,o=i,a=this._getActiveElements(t,s,n,o),l=rE(t),c=Ow(t,this._lastEvent,n,l);n&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const h=!lo(a,s);return(h||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,h}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},ut(_i,"defaults",Dt),ut(_i,"instances",jr),ut(_i,"overrides",en),ut(_i,"registry",Ge),ut(_i,"version",Aw),ut(_i,"getChart",cf),_i);function hf(){return vt(Ko.instances,e=>e._plugins.invalidate())}function gm(e,t){const{x:i,y:n,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,h,u;return e.horizontal?(u=o/2,a=Math.min(i,s),l=Math.max(i,s),c=n-u,h=n+u):(u=r/2,a=i-u,l=i+u,c=Math.min(n,s),h=Math.max(n,s)),{left:a,top:c,right:l,bottom:h}}function Ti(e,t,i,n){return e?0:ke(t,i,n)}function kw(e,t,i){const n=e.options.borderWidth,s=e.borderSkipped,r=$g(n);return{t:Ti(s.top,r.top,0,i),r:Ti(s.right,r.right,0,t),b:Ti(s.bottom,r.bottom,0,i),l:Ti(s.left,r.left,0,t)}}function Fw(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=Pn(s),o=Math.min(t,i),a=e.borderSkipped,l=n||gt(s);return{topLeft:Ti(!l||a.top||a.left,r.topLeft,0,o),topRight:Ti(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Ti(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ti(!l||a.bottom||a.right,r.bottomRight,0,o)}}function Nw(e){const t=gm(e),i=t.right-t.left,n=t.bottom-t.top,s=kw(e,i/2,n/2),r=Fw(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function ka(e,t,i,n){const s=t===null,r=i===null,a=e&&!(s&&r)&&gm(e,n);return a&&(s||En(t,a.left,a.right))&&(r||En(i,a.top,a.bottom))}function zw(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Bw(e,t){e.rect(t.x,t.y,t.w,t.h)}function Fa(e,t,i={}){const n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}class Wr extends Vn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=Nw(this),a=zw(o.radius)?fo:Bw;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Fa(o,i,r)),t.clip(),a(t,Fa(r,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Fa(r,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return ka(this,t,i,n)}inXRange(t,i){return ka(this,t,null,i)}inYRange(t,i){return ka(this,null,t,i)}getCenterPoint(t){const{x:i,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+s)/2:i,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ut(Wr,"id","bar"),ut(Wr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ut(Wr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const uf=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},jw=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class ff extends Vn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=At(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=$t(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=uf(n,r);let c,h;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let u=t;r.textAlign="left",r.textBaseline="middle";let f=-1,d=-h;return this.legendItems.forEach((g,m)=>{const _=n+i/2+r.measureText(g.text).width;(m===0||c[c.length-1]+_+2*a>o)&&(u+=h,c[c.length-(m>0?0:1)]=0,d+=h,f++),l[m]={left:0,top:d,row:f,width:_,height:s},c[c.length-1]+=_+a}),u}_fitCols(t,i,n,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,f=0,d=0,g=0,m=0;return this.legendItems.forEach((_,p)=>{const{itemWidth:x,itemHeight:w}=Ww(n,i,r,_,s);p>0&&d+w+2*a>h&&(u+=f+a,c.push({width:f,height:d}),g+=f+a,m++,f=d=0),l[p]={left:g,top:d,col:m,width:x,height:w},f=Math.max(f,x),d+=w+a}),u+=f,c.push({width:f,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Ln(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xt(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Xt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Xt(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Xt(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Pc(t,this),this._draw(),Lc(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,a=Dt.color,l=Ln(t.rtl,this.left,this.width),c=$t(o.font),{padding:h}=o,u=c.size,f=u/2;let d;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:_}=uf(o,u),p=function(M,P,R){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();const L=wt(R.lineWidth,1);if(s.fillStyle=wt(R.fillStyle,a),s.lineCap=wt(R.lineCap,"butt"),s.lineDashOffset=wt(R.lineDashOffset,0),s.lineJoin=wt(R.lineJoin,"miter"),s.lineWidth=L,s.strokeStyle=wt(R.strokeStyle,a),s.setLineDash(wt(R.lineDash,[])),o.usePointStyle){const S={radius:m*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:L},B=l.xPlus(M,g/2),F=P+f;Gg(s,S,B,F,o.pointStyleWidth&&g)}else{const S=P+Math.max((u-m)/2,0),B=l.leftForLtr(M,g),F=Pn(R.borderRadius);s.beginPath(),Object.values(F).some(H=>H!==0)?fo(s,{x:B,y:S,w:g,h:m,radius:F}):s.rect(B,S,g,m),s.fill(),L!==0&&s.stroke()}s.restore()},x=function(M,P,R){Hs(s,R.text,M,P+_/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?d={x:Xt(r,this.left+h,this.right-n[0]),y:this.top+h+b,line:0}:d={x:this.left+h,y:Xt(r,this.top+b+h,this.bottom-i[0].height),line:0},tm(this.ctx,t.textDirection);const v=_+h;this.legendItems.forEach((M,P)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const R=s.measureText(M.text).width,L=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),S=g+f+R;let B=d.x,F=d.y;l.setWidth(this.width),w?P>0&&B+S+h>this.right&&(F=d.y+=v,d.line++,B=d.x=Xt(r,this.left+h,this.right-n[d.line])):P>0&&F+v>this.bottom&&(B=d.x=B+i[d.line].width+h,d.line++,F=d.y=Xt(r,this.top+b+h,this.bottom-i[d.line].height));const H=l.x(B);if(p(H,F,M),B=xE(L,B+g+f,w?B+S:this.right,t.rtl),x(l.x(B),F,M),w)d.x+=S+h;else if(typeof M.text!="string"){const J=c.lineHeight;d.y+=mm(M,J)+h}else d.y+=v}),em(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=$t(i.font),s=Ae(i.padding);if(!i.display)return;const r=Ln(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let h,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,u=Xt(t.align,u,this.right-f);else{const g=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);h=c+Xt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=Xt(a,u,u+f);o.textAlign=r.textAlign(Ic(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,Hs(o,i.text,d,h,n)}_computeTitleHeight(){const t=this.options.title,i=$t(t.font),n=Ae(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,r;if(En(t,this.left,this.right)&&En(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],En(t,s.left,s.left+s.width)&&En(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!Hw(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=jw(s,n);s&&!r&&At(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&At(i.onHover,[t,n,this],this)}else n&&At(i.onClick,[t,n,this],this)}}function Ww(e,t,i,n,s){const r=Uw(n,e,t,i),o=Vw(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Uw(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+n.measureText(s).width}function Vw(e,t,i){let n=e;return typeof t.text!="string"&&(n=mm(t,i)),n}function mm(e,t){const i=e.text?e.text.length:0;return t*i}function Hw(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Xw={id:"legend",_element:ff,start(e,t,i){const n=e.legend=new ff({ctx:e.ctx,options:i,chart:e});Re.configure(e,n,i),Re.addBox(e,n)},stop(e){Re.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;Re.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),h=Ae(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class _m extends Vn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const s=zt(n.text)?n.text.length:1;this._padding=Ae(n.padding);const r=s*$t(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Xt(a,n,r),u=i+t,c=r-n):(o.position==="left"?(h=n+t,u=Xt(a,s,i),l=qt*-.5):(h=r-t,u=Xt(a,i,s),l=qt*.5),c=s-i),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=$t(i.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Hs(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:Ic(i.align),textBaseline:"middle",translation:[o,a]})}}function Gw(e,t){const i=new _m({ctx:e.ctx,options:t,chart:e});Re.configure(e,i,t),Re.addBox(e,i),e.titleBlock=i}var Yw={id:"title",_element:_m,start(e,t,i){Gw(e,i)},stop(e){const t=e.titleBlock;Re.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;Re.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fs={average(e){if(!e.length)return!1;let t,i,n=new Set,s=0,r=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),s+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=fE(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function He(e,t){return t&&(zt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ii(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Kw(e,t){const{element:i,datasetIndex:n,index:s}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function df(e,t){const i=e.chart.ctx,{body:n,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=$t(t.bodyFont),c=$t(t.titleFont),h=$t(t.footerFont),u=r.length,f=s.length,d=n.length,g=Ae(t.padding);let m=g.height,_=0,p=n.reduce((b,v)=>b+v.before.length+v.lines.length+v.after.length,0);if(p+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),p){const b=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*b+(p-d)*l.lineHeight+(p-1)*t.bodySpacing}f&&(m+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let x=0;const w=function(b){_=Math.max(_,i.measureText(b).width+x)};return i.save(),i.font=c.string,vt(e.title,w),i.font=l.string,vt(e.beforeBody.concat(e.afterBody),w),x=t.displayColors?o+2+t.boxPadding:0,vt(n,b=>{vt(b.before,w),vt(b.lines,w),vt(b.after,w)}),x=0,i.font=h.string,vt(e.footer,w),i.restore(),_+=g.width,{width:_,height:m}}function $w(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function Zw(e,t,i,n){const{x:s,width:r}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function qw(e,t,i,n){const{x:s,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),Zw(c,e,t,i)&&(c="center"),c}function gf(e,t,i){const n=i.yAlign||t.yAlign||$w(e,i);return{xAlign:i.xAlign||t.xAlign||qw(e,t,i,n),yAlign:n}}function Jw(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function Qw(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function mf(e,t,i,n){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=s+r,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:d}=Pn(o);let g=Jw(t,a);const m=Qw(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,f)+s:a==="right"&&(g+=Math.max(u,d)+s),{x:ke(g,0,n.width-t.width),y:ke(m,0,n.height-t.height)}}function Ar(e,t,i){const n=Ae(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function _f(e){return He([],ii(e))}function tT(e,t,i){return Un(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function pf(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const pm={beforeTitle:Qe,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:Qe,beforeBody:Qe,beforeLabel:Qe,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return It(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Qe,afterBody:Qe,beforeFooter:Qe,footer:Qe,afterFooter:Qe};function ae(e,t,i,n){const s=e[t].call(i,n);return typeof s>"u"?pm[t].call(i,n):s}class yl extends Vn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,r=new im(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=tT(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,s=ae(n,"beforeTitle",this,t),r=ae(n,"title",this,t),o=ae(n,"afterTitle",this,t);let a=[];return a=He(a,ii(s)),a=He(a,ii(r)),a=He(a,ii(o)),a}getBeforeBody(t,i){return _f(ae(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,s=[];return vt(t,r=>{const o={before:[],lines:[],after:[]},a=pf(n,r);He(o.before,ii(ae(a,"beforeLabel",this,r))),He(o.lines,ae(a,"label",this,r)),He(o.after,ii(ae(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,i){return _f(ae(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,s=ae(n,"beforeFooter",this,t),r=ae(n,"footer",this,t),o=ae(n,"afterFooter",this,t);let a=[];return a=He(a,ii(s)),a=He(a,ii(r)),a=He(a,ii(o)),a}_createItems(t){const i=this._active,n=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(Kw(this.chart,i[l]));return t.filter&&(a=a.filter((h,u,f)=>t.filter(h,u,f,n))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,n))),vt(a,h=>{const u=pf(t.callbacks,h);s.push(ae(u,"labelColor",this,h)),r.push(ae(u,"labelPointStyle",this,h)),o.push(ae(u,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const n=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=fs[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=df(this,n),c=Object.assign({},a,l),h=gf(this.chart,n,c),u=mf(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){const r=this.getCaretPosition(t,n,s);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,n){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=Pn(a),{x:f,y:d}=t,{width:g,height:m}=i;let _,p,x,w,b,v;return r==="center"?(b=d+m/2,s==="left"?(_=f,p=_-o,w=b+o,v=b-o):(_=f+g,p=_+o,w=b-o,v=b+o),x=_):(s==="left"?p=f+Math.max(l,h)+o:s==="right"?p=f+g-Math.max(c,u)-o:p=this.caretX,r==="top"?(w=d,b=w-o,_=p-o,x=p+o):(w=d+m,b=w+o,_=p+o,x=p-o),v=w),{x1:_,x2:p,x3:x,y1:w,y2:b,y3:v}}drawTitle(t,i,n){const s=this.title,r=s.length;let o,a,l;if(r){const c=Ln(n.rtl,this.x,this.width);for(t.x=Ar(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",o=$t(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,h=$t(r.bodyFont),u=Ar(this,"left",r),f=s.x(u),d=l<h.lineHeight?(h.lineHeight-l)/2:0,g=i.y+d;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(f,c)+c/2,p=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Pu(t,m,_,p),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Pu(t,m,_,p)}else{t.lineWidth=gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(f,c),_=s.leftForLtr(s.xPlus(f,1),c-2),p=Pn(o.borderRadius);Object.values(p).some(x=>x!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,fo(t,{x:m,y:g,w:c,h:l,radius:p}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),fo(t,{x:_,y:g+1,w:c-2,h:l-2,radius:p}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(_,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,u=$t(n.bodyFont);let f=u.lineHeight,d=0;const g=Ln(n.rtl,this.x,this.width),m=function(R){i.fillText(R,g.x(t.x+d),t.y+f/2),t.y+=f+r},_=g.textAlign(o);let p,x,w,b,v,M,P;for(i.textAlign=o,i.textBaseline="middle",i.font=u.string,t.x=Ar(this,_,n),i.fillStyle=n.bodyColor,vt(this.beforeBody,m),d=a&&_!=="right"?o==="center"?c/2+h:c+2+h:0,b=0,M=s.length;b<M;++b){for(p=s[b],x=this.labelTextColors[b],i.fillStyle=x,vt(p.before,m),w=p.lines,a&&w.length&&(this._drawColorBox(i,t,b,g,n),f=Math.max(u.lineHeight,l)),v=0,P=w.length;v<P;++v)m(w[v]),f=u.lineHeight;vt(p.after,m)}d=0,f=u.lineHeight,vt(this.afterBody,m),t.y-=r}drawFooter(t,i,n){const s=this.footer,r=s.length;let o,a;if(r){const l=Ln(n.rtl,this.x,this.width);for(t.x=Ar(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",o=$t(n.footerFont),i.fillStyle=n.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:u,topRight:f,bottomLeft:d,bottomRight:g}=Pn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+u,l),o==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-f,l),i.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+h-g),i.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+d,l+h),i.quadraticCurveTo(a,l+h,a,l+h-d),o==="center"&&r==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const o=fs[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=df(this,t),l=Object.assign({},o,this._size),c=gf(i,t,l),h=mf(t,l,c,i);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ae(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,i),tm(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),em(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!lo(n,s),o=this._positionChanged(s,i);(r||o)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,n),a=this._positionChanged(o,t),l=i||!lo(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:n,caretY:s,options:r}=this,o=fs[r.position].call(this,t,i);return o!==!1&&(n!==o.x||s!==o.y)}}ut(yl,"positioners",fs);var eT={id:"tooltip",_element:yl,positioners:fs,afterInit(e,t,i){i&&(e.tooltip=new yl({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const iT=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function nT(e,t,i,n){const s=e.indexOf(t);if(s===-1)return iT(e,t,i,n);const r=e.lastIndexOf(t);return s!==r?i:s}const sT=(e,t)=>e===null?null:ke(Math.round(e),0,t);function yf(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class xl extends Hn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:r}of i)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(It(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:nT(n,t,wt(i,t),this._addedLabels),sT(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=i;o++)s.push({value:o});return s}getLabelForValue(t){return yf.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ut(xl,"id","category"),ut(xl,"defaults",{ticks:{callback:yf}});function rT(e,t){const i=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:f}=e,d=r||1,g=h-1,{min:m,max:_}=t,p=!It(o),x=!It(a),w=!It(c),b=(_-m)/(u+1);let v=vu((_-m)/g/d)*d,M,P,R,L;if(v<1e-14&&!p&&!x)return[{value:m},{value:_}];L=Math.ceil(_/v)-Math.floor(m/v),L>g&&(v=vu(L*v/g/d)*d),It(l)||(M=Math.pow(10,l),v=Math.ceil(v*M)/M),s==="ticks"?(P=Math.floor(m/v)*v,R=Math.ceil(_/v)*v):(P=m,R=_),p&&x&&r&&lE((a-o)/r,v/1e3)?(L=Math.round(Math.min((a-o)/v,h)),v=(a-o)/L,P=o,R=a):w?(P=p?o:P,R=x?a:R,L=c-1,v=(R-P)/L):(L=(R-P)/v,Nr(L,Math.round(L),v/1e3)?L=Math.round(L):L=Math.ceil(L));const S=Math.max(wu(v),wu(P));M=Math.pow(10,It(l)?S:l),P=Math.round(P*M)/M,R=Math.round(R*M)/M;let B=0;for(p&&(f&&P!==o?(i.push({value:o}),P<o&&B++,Nr(Math.round((P+B*v)*M)/M,o,xf(o,b,e))&&B++):P<o&&B++);B<L;++B){const F=Math.round((P+B*v)*M)/M;if(x&&F>a)break;i.push({value:F})}return x&&f&&R!==a?i.length&&Nr(i[i.length-1].value,a,xf(a,b,e))?i[i.length-1].value=a:i.push({value:a}):(!x||R===a)&&i.push({value:R}),i}function xf(e,t,{horizontal:i,minRotation:n}){const s=$i(n),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class oT extends Hn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return It(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=i?s:l,a=l=>r=n?r:l;if(t){const l=Ai(s),c=Ai(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=rT(s,r);return t.bounds==="ticks"&&cE(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return Vg(t,this.chart.options.locale,this.options.ticks.format)}}class bl extends oT{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Se(t)?t:0,this.max=Se(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=$i(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ut(bl,"id","linear"),ut(bl,"defaults",{ticks:{callback:Xg.formatters.numeric}});const $o={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},he=Object.keys($o);function bf(e,t){return e-t}function Ef(e,t){if(It(t))return null;const i=e._adapter,{parser:n,round:s,isoWeekday:r}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),Se(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(uo(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,s)),+o)}function vf(e,t,i,n){const s=he.length;for(let r=he.indexOf(e);r<s-1;++r){const o=$o[he[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return he[r]}return he[s-1]}function aT(e,t,i,n,s){for(let r=he.length-1;r>=he.indexOf(i);r--){const o=he[r];if($o[o].common&&e._adapter.diff(s,n,o)>=t-1)return o}return he[i?he.indexOf(i):0]}function lT(e){for(let t=he.indexOf(e)+1,i=he.length;t<i;++t)if($o[he[t]].common)return he[t]}function wf(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:s}=Ac(i,t),r=i[n]>=t?i[n]:i[s];e[r]=!0}}function cT(e,t,i,n){const s=e._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function Tf(e,t,i){const n=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,n.push({value:a,major:!1});return r===0||!i?n:cT(e,n,s,i)}class _o extends Hn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),s=this._adapter=new Rv._date(t.adapters.date);s.init(i),vs(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Ef(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Se(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),r=Se(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=_E(s,r,o);return this._unit=i.unit||(n.autoSkip?vf(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):aT(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:lT(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Tf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=ke(i,0,o),n=ke(n,0,o),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||vf(r.minUnit,i,n,this._getLabelCapacity(i)),a=wt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=uo(l)||l===!0,h={};let u=i,f,d;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(n,i,o)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=u,d=0;f<n;f=+t.add(f,a,o),d++)wf(h,f,g);return(f===n||s.bounds==="ticks"||d===1)&&wf(h,f,g),Object.keys(h).sort(bf).map(m=>+m)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const s=this.options.time.displayFormats,r=this._unit,o=i||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,n,s){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,i,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],f=n[i],d=c&&u&&f&&f.major;return this._adapter.format(t,s||(d?u:h))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,s=$i(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Tf(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Ef(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Bg(t.sort(bf))}}ut(_o,"id","time"),ut(_o,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ir(e,t,i){let n=0,s=e.length-1,r,o,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=gl(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=gl(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[s]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Rf extends _o{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Ir(i,this.min),this._tableRange=Ir(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ir(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Ir(this._table,n*this._tableRange+this._minPos,!0)}}ut(Rf,"id","timeseries"),ut(Rf,"defaults",_o.defaults);const ym={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},hT={ariaLabel:{type:String},ariaDescribedby:{type:String}},uT={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ym,...hT},fT=Sd[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function mn(e){return Gs(e)?ft(e):e}function dT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Gs(t)?new Proxy(e,{}):e}function gT(e,t){const i=e.options;i&&t&&Object.assign(i,t)}function xm(e,t){e.labels=t}function bm(e,t,i){const n=[];e.datasets=t.map(s=>{const r=e.datasets.find(o=>o[i]===s[i]);return!r||!s.data||n.includes(r)?{...s}:(n.push(r),Object.assign(r,s),r)})}function mT(e,t){const i={labels:[],datasets:[]};return xm(i,e.labels),bm(i,e.datasets,t),i}const _T=td({props:uT,setup(e,t){let{expose:i,slots:n}=t;const s=o_(null),r=Xf(null);i({chart:r});const o=()=>{if(!s.value)return;const{type:c,data:h,options:u,plugins:f,datasetIdKey:d}=e,g=mT(h,d),m=dT(g,h);r.value=new Ko(s.value,{type:c,data:m,options:{...u},plugins:f})},a=()=>{const c=ft(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return sd(o),Nl(a),Or([()=>e.options,()=>e.data],(c,h)=>{let[u,f]=c,[d,g]=h;const m=ft(r.value);if(!m)return;let _=!1;if(u){const p=mn(u),x=mn(d);p&&p!==x&&(gT(m,p),_=!0)}if(f){const p=mn(f.labels),x=mn(g.labels),w=mn(f.datasets),b=mn(g.datasets);p!==x&&(xm(m.config.data,p),_=!0),w&&w!==b&&(bm(m.config.data,w,e.datasetIdKey),_=!0)}_&&$f(()=>{l(m)})},{deep:!0}),()=>$a("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:s},[$a("p",{},[n.default?n.default():""])])}});function pT(e,t){return Ko.register(t),td({props:ym,setup(i,n){let{expose:s}=n;const r=Xf(null),o=a=>{r.value=a==null?void 0:a.chart};return s({chart:r}),()=>$a(_T,fT({ref:o},{type:e,...i}))}})}const yT=pT("bar",zr),Cf={data:[{portcode:64710,Name:"Llançà",lat:42.37104,lon:3.16146,kg:19858.449999999993,eu:543569.4000000003},{portcode:64700,Name:"Port de la Selva",lat:42.34149,lon:3.20344,kg:356.75,eu:12982.619999999997},{portcode:64600,Name:"Roses",lat:42.25628,lon:3.18176,kg:25494.50000000002,eu:618064.2699999996},{portcode:64500,Name:"Palamós",lat:41.84491,lon:3.12768,kg:23617.97000000002,eu:621233.7600000006},{portcode:64410,Name:"Blanes",lat:41.67523,lon:2.79073,kg:18285.800000000003,eu:422681.3299999995},{portcode:64300,Name:"Arenys de Mar",lat:41.58005,lon:2.55946,kg:8775.129999999997,eu:203301.70999999993},{portcode:64200,Name:"Barcelona",lat:41.36063,lon:2.15793,kg:15328.070000000012,eu:382940.04},{portcode:64100,Name:"Vilanova i la Geltrú",lat:41.2163,lon:1.73175,kg:10855.049999999983,eu:361978.0400000005},{portcode:63330,Name:"Torredembarra",lat:41.13504,lon:1.40082,kg:664.0999999999995,eu:23189.800000000007},{portcode:63300,Name:"Tarragona",lat:41.11151,lon:1.24818,kg:14359.300000000014,eu:512473.4700000003},{portcode:63320,Name:"Cambrils",lat:41.06598,lon:1.0615,kg:53.73000000000001,eu:2380.1399999999985},{portcode:63210,Name:"L'Ametlla de Mar",lat:40.88185,lon:.80008,kg:1148.7900000000002,eu:52201.98000000004},{portcode:63220,Name:"L'Ampolla",lat:40.81151,lon:.7094,kg:145.15,eu:5921.69},{portcode:63100,Name:"La Ràpita",lat:40.62009,lon:.59658,kg:4158.99,eu:152190.26999999996},{portcode:63110,Name:"Les Cases d'Alcanar",lat:40.55272,lon:.53077,kg:96.74999999999999,eu:4709.549999999999}]};Ko.register(xl,bl,Wr,Yw,eT,Xw);const xT={name:"App",components:{Bar:yT},data(){return{data:{labels:Cf.data.map(e=>e.Name),datasets:[{data:Cf.data.map(e=>e.kg)}]},options:{responsive:!0,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{title:{text:"Species landings (Kg)",display:!0}}},maintainAspectRatio:!1}}}};function bT(e,t,i,n,s,r){const o=Ua("Bar");return Bl(),hp(o,{data:s.data,options:s.options},null,8,["data","options"])}const ET=Tc(xT,[["render",bT]]),vT={name:"AppMap",components:{MapComponent:I1,LandingsPortChartComponent:ET}},wT={id:"app"},TT={class:"cell cell-map"},RT={class:"cell cell-edit"};function CT(e,t,i,n,s,r){const o=Ua("MapComponent"),a=Ua("LandingsPortChartComponent");return Bl(),Td("div",wT,[Es("div",TT,[t[0]||(t[0]=Ya(" Map item ")),ue(o)]),Es("div",RT,[t[1]||(t[1]=Ya(" Landings by port ")),ue(a)]),t[2]||(t[2]=Es("div",{class:"cell cell-inspect"}," Landings yearly evolution ",-1))])}const MT=Tc(vT,[["render",CT]]),ST=Gp(MT);ST.mount("#app");
