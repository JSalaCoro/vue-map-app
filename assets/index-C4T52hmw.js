var em=Object.defineProperty;var im=(e,t,i)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var tt=(e,t,i)=>im(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Wl(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const St={},Pn=[],Ze=()=>{},nm=()=>!1,jo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hl=e=>e.startsWith("onUpdate:"),te=Object.assign,Ul=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},sm=Object.prototype.hasOwnProperty,Et=(e,t)=>sm.call(e,t),rt=Array.isArray,Rs=e=>Wo(e)==="[object Map]",rm=e=>Wo(e)==="[object Set]",st=e=>typeof e=="function",Wt=e=>typeof e=="string",Zn=e=>typeof e=="symbol",kt=e=>e!==null&&typeof e=="object",Jd=e=>(kt(e)||st(e))&&st(e.then)&&st(e.catch),om=Object.prototype.toString,Wo=e=>om.call(e),am=e=>Wo(e).slice(8,-1),lm=e=>Wo(e)==="[object Object]",Vl=e=>Wt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cs=Wl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ho=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},cm=/-(\w)/g,Ie=Ho(e=>e.replace(cm,(t,i)=>i?i.toUpperCase():"")),hm=/\B([A-Z])/g,hn=Ho(e=>e.replace(hm,"-$1").toLowerCase()),Uo=Ho(e=>e.charAt(0).toUpperCase()+e.slice(1)),_a=Ho(e=>e?`on${Uo(e)}`:""),Pi=(e,t)=>!Object.is(e,t),ya=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Qd=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},um=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let dh;const Vo=()=>dh||(dh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xl(e){if(rt(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=Wt(n)?pm(n):Xl(n);if(s)for(const r in s)t[r]=s[r]}return t}else if(Wt(e)||kt(e))return e}const dm=/;(?![^(]*\))/g,fm=/:([^]+)/,gm=/\/\*[^]*?\*\//g;function pm(e){const t={};return e.replace(gm,"").split(dm).forEach(i=>{if(i){const n=i.split(fm);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Gl(e){let t="";if(Wt(e))t=e;else if(rt(e))for(let i=0;i<e.length;i++){const n=Gl(e[i]);n&&(t+=n+" ")}else if(kt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const mm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_m=Wl(mm);function tf(e){return!!e||e===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xe;class ym{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xe,!t&&xe&&(this.index=(xe.scopes||(xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=xe;try{return xe=this,t()}finally{xe=i}}}on(){xe=this}off(){xe=this.parent}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function xm(){return xe}let Mt;const xa=new WeakSet;class ef{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xe&&xe.active&&xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xa.has(this)&&(xa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||sf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fh(this),rf(this);const t=Mt,i=Fe;Mt=this,Fe=!0;try{return this.fn()}finally{of(this),Mt=t,Fe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)$l(t);this.deps=this.depsTail=void 0,fh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rl(this)&&this.run()}get dirty(){return rl(this)}}let nf=0,Ms,Ss;function sf(e,t=!1){if(e.flags|=8,t){e.next=Ss,Ss=e;return}e.next=Ms,Ms=e}function Yl(){nf++}function Kl(){if(--nf>0)return;if(Ss){let t=Ss;for(Ss=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;Ms;){let t=Ms;for(Ms=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function rf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function of(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),$l(n),bm(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function rl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(af(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function af(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Bs))return;e.globalVersion=Bs;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!rl(e)){e.flags&=-3;return}const i=Mt,n=Fe;Mt=e,Fe=!0;try{rf(e);const s=e.fn(e._value);(t.version===0||Pi(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Mt=i,Fe=n,of(e),e.flags&=-3}}function $l(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)$l(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function bm(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Fe=!0;const lf=[];function Ni(){lf.push(Fe),Fe=!1}function zi(){const e=lf.pop();Fe=e===void 0?!0:e}function fh(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Mt;Mt=void 0;try{t()}finally{Mt=i}}}let Bs=0;class Em{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zl{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Mt||!Fe||Mt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Mt)i=this.activeLink=new Em(Mt,this),Mt.deps?(i.prevDep=Mt.depsTail,Mt.depsTail.nextDep=i,Mt.depsTail=i):Mt.deps=Mt.depsTail=i,cf(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=Mt.depsTail,i.nextDep=void 0,Mt.depsTail.nextDep=i,Mt.depsTail=i,Mt.deps===i&&(Mt.deps=n)}return i}trigger(t){this.version++,Bs++,this.notify(t)}notify(t){Yl();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Kl()}}}function cf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)cf(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const ol=new WeakMap,sn=Symbol(""),al=Symbol(""),js=Symbol("");function Kt(e,t,i){if(Fe&&Mt){let n=ol.get(e);n||ol.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new Zl),s.map=n,s.key=i),s.track()}}function ci(e,t,i,n,s,r){const o=ol.get(e);if(!o){Bs++;return}const a=l=>{l&&l.trigger()};if(Yl(),t==="clear")o.forEach(a);else{const l=rt(e),c=l&&Vl(i);if(l&&i==="length"){const h=Number(n);o.forEach((u,d)=>{(d==="length"||d===js||!Zn(d)&&d>=h)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(js)),t){case"add":l?c&&a(o.get("length")):(a(o.get(sn)),Rs(e)&&a(o.get(al)));break;case"delete":l||(a(o.get(sn)),Rs(e)&&a(o.get(al)));break;case"set":Rs(e)&&a(o.get(sn));break}}Kl()}function gn(e){const t=ft(e);return t===e?t:(Kt(t,"iterate",js),Ne(e)?t:t.map(ie))}function ql(e){return Kt(e=ft(e),"iterate",js),e}const vm={__proto__:null,[Symbol.iterator](){return ba(this,Symbol.iterator,ie)},concat(...e){return gn(this).concat(...e.map(t=>rt(t)?gn(t):t))},entries(){return ba(this,"entries",e=>(e[1]=ie(e[1]),e))},every(e,t){return ti(this,"every",e,t,void 0,arguments)},filter(e,t){return ti(this,"filter",e,t,i=>i.map(ie),arguments)},find(e,t){return ti(this,"find",e,t,ie,arguments)},findIndex(e,t){return ti(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ti(this,"findLast",e,t,ie,arguments)},findLastIndex(e,t){return ti(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ti(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ea(this,"includes",e)},indexOf(...e){return Ea(this,"indexOf",e)},join(e){return gn(this).join(e)},lastIndexOf(...e){return Ea(this,"lastIndexOf",e)},map(e,t){return ti(this,"map",e,t,void 0,arguments)},pop(){return ns(this,"pop")},push(...e){return ns(this,"push",e)},reduce(e,...t){return gh(this,"reduce",e,t)},reduceRight(e,...t){return gh(this,"reduceRight",e,t)},shift(){return ns(this,"shift")},some(e,t){return ti(this,"some",e,t,void 0,arguments)},splice(...e){return ns(this,"splice",e)},toReversed(){return gn(this).toReversed()},toSorted(e){return gn(this).toSorted(e)},toSpliced(...e){return gn(this).toSpliced(...e)},unshift(...e){return ns(this,"unshift",e)},values(){return ba(this,"values",ie)}};function ba(e,t,i){const n=ql(e),s=n[t]();return n!==e&&!Ne(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const wm=Array.prototype;function ti(e,t,i,n,s,r){const o=ql(e),a=o!==e&&!Ne(e),l=o[t];if(l!==wm[t]){const u=l.apply(e,r);return a?ie(u):u}let c=i;o!==e&&(a?c=function(u,d){return i.call(this,ie(u),d,e)}:i.length>2&&(c=function(u,d){return i.call(this,u,d,e)}));const h=l.call(o,c,n);return a&&s?s(h):h}function gh(e,t,i,n){const s=ql(e);let r=i;return s!==e&&(Ne(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,ie(a),l,e)}),s[t](r,...n)}function Ea(e,t,i){const n=ft(e);Kt(n,"iterate",js);const s=n[t](...i);return(s===-1||s===!1)&&lr(i[0])?(i[0]=ft(i[0]),n[t](...i)):s}function ns(e,t,i=[]){Ni(),Yl();const n=ft(e)[t].apply(e,i);return Kl(),zi(),n}const Tm=Wl("__proto__,__v_isRef,__isVue"),hf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Zn));function Rm(e){Zn(e)||(e=String(e));const t=ft(this);return Kt(t,"has",e),t.hasOwnProperty(e)}class uf{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?km:pf:r?gf:ff).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=rt(t);if(!s){let l;if(o&&(l=vm[i]))return l;if(i==="hasOwnProperty")return Rm}const a=Reflect.get(t,i,Qt(t)?t:n);return(Zn(i)?hf.has(i):Tm(i))||(s||Kt(t,"get",i),r)?a:Qt(a)?o&&Vl(i)?a:a.value:kt(a)?s?mf(a):Ql(a):a}}class df extends uf{constructor(t=!1){super(!1,t)}set(t,i,n,s){let r=t[i];if(!this._isShallow){const l=an(r);if(!Ne(n)&&!an(n)&&(r=ft(r),n=ft(n)),!rt(t)&&Qt(r)&&!Qt(n))return l?!1:(r.value=n,!0)}const o=rt(t)&&Vl(i)?Number(i)<t.length:Et(t,i),a=Reflect.set(t,i,n,Qt(t)?t:s);return t===ft(s)&&(o?Pi(n,r)&&ci(t,"set",i,n):ci(t,"add",i,n)),a}deleteProperty(t,i){const n=Et(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&ci(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Zn(i)||!hf.has(i))&&Kt(t,"has",i),n}ownKeys(t){return Kt(t,"iterate",rt(t)?"length":sn),Reflect.ownKeys(t)}}class Cm extends uf{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Mm=new df,Sm=new Cm,Im=new df(!0);const ll=e=>e,Tr=e=>Reflect.getPrototypeOf(e);function Am(e,t,i){return function(...n){const s=this.__v_raw,r=ft(s),o=Rs(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...n),h=i?ll:t?cl:ie;return!t&&Kt(r,"iterate",l?al:sn),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function Rr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Pm(e,t){const i={get(s){const r=this.__v_raw,o=ft(r),a=ft(s);e||(Pi(s,a)&&Kt(o,"get",s),Kt(o,"get",a));const{has:l}=Tr(o),c=t?ll:e?cl:ie;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Kt(ft(s),"iterate",sn),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=ft(r),a=ft(s);return e||(Pi(s,a)&&Kt(o,"has",s),Kt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=ft(a),c=t?ll:e?cl:ie;return!e&&Kt(l,"iterate",sn),a.forEach((h,u)=>s.call(r,c(h),c(u),o))}};return te(i,e?{add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear")}:{add(s){!t&&!Ne(s)&&!an(s)&&(s=ft(s));const r=ft(this);return Tr(r).has.call(r,s)||(r.add(s),ci(r,"add",s,s)),this},set(s,r){!t&&!Ne(r)&&!an(r)&&(r=ft(r));const o=ft(this),{has:a,get:l}=Tr(o);let c=a.call(o,s);c||(s=ft(s),c=a.call(o,s));const h=l.call(o,s);return o.set(s,r),c?Pi(r,h)&&ci(o,"set",s,r):ci(o,"add",s,r),this},delete(s){const r=ft(this),{has:o,get:a}=Tr(r);let l=o.call(r,s);l||(s=ft(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&ci(r,"delete",s,void 0),c},clear(){const s=ft(this),r=s.size!==0,o=s.clear();return r&&ci(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=Am(s,e,t)}),i}function Jl(e,t){const i=Pm(e,t);return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Et(i,s)&&s in n?i:n,s,r)}const Lm={get:Jl(!1,!1)},Om={get:Jl(!1,!0)},Dm={get:Jl(!0,!1)};const ff=new WeakMap,gf=new WeakMap,pf=new WeakMap,km=new WeakMap;function Fm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nm(e){return e.__v_skip||!Object.isExtensible(e)?0:Fm(am(e))}function Ql(e){return an(e)?e:tc(e,!1,Mm,Lm,ff)}function zm(e){return tc(e,!1,Im,Om,gf)}function mf(e){return tc(e,!0,Sm,Dm,pf)}function tc(e,t,i,n,s){if(!kt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=Nm(e);if(o===0)return e;const a=new Proxy(e,o===2?n:i);return s.set(e,a),a}function Is(e){return an(e)?Is(e.__v_raw):!!(e&&e.__v_isReactive)}function an(e){return!!(e&&e.__v_isReadonly)}function Ne(e){return!!(e&&e.__v_isShallow)}function lr(e){return e?!!e.__v_raw:!1}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function Bm(e){return!Et(e,"__v_skip")&&Object.isExtensible(e)&&Qd(e,"__v_skip",!0),e}const ie=e=>kt(e)?Ql(e):e,cl=e=>kt(e)?mf(e):e;function Qt(e){return e?e.__v_isRef===!0:!1}function jm(e){return yf(e,!1)}function _f(e){return yf(e,!0)}function yf(e,t){return Qt(e)?e:new Wm(e,t)}class Wm{constructor(t,i){this.dep=new Zl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:ft(t),this._value=i?t:ie(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||Ne(t)||an(t);t=n?t:ft(t),Pi(t,i)&&(this._rawValue=t,this._value=n?t:ie(t),this.dep.trigger())}}function Hm(e){return Qt(e)?e.value:e}const Um={get:(e,t,i)=>t==="__v_raw"?e:Hm(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Qt(s)&&!Qt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function xf(e){return Is(e)?e:new Proxy(e,Um)}class Vm{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Zl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Mt!==this)return sf(this,!0),!0}get value(){const t=this.dep.track();return af(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xm(e,t,i=!1){let n,s;return st(e)?n=e:(n=e.get,s=e.set),new Vm(n,s,i)}const Cr={},lo=new WeakMap;let Ki;function Gm(e,t=!1,i=Ki){if(i){let n=lo.get(i);n||lo.set(i,n=[]),n.push(e)}}function Ym(e,t,i=St){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,c=b=>s?b:Ne(b)||s===!1||s===0?Mi(b,1):Mi(b);let h,u,d,f,g=!1,p=!1;if(Qt(e)?(u=()=>e.value,g=Ne(e)):Is(e)?(u=()=>c(e),g=!0):rt(e)?(p=!0,g=e.some(b=>Is(b)||Ne(b)),u=()=>e.map(b=>{if(Qt(b))return b.value;if(Is(b))return c(b);if(st(b))return l?l(b,2):b()})):st(e)?t?u=l?()=>l(e,2):e:u=()=>{if(d){Ni();try{d()}finally{zi()}}const b=Ki;Ki=h;try{return l?l(e,3,[f]):e(f)}finally{Ki=b}}:u=Ze,t&&s){const b=u,E=s===!0?1/0:s;u=()=>Mi(b(),E)}const m=xm(),_=()=>{h.stop(),m&&m.active&&Ul(m.effects,h)};if(r&&t){const b=t;t=(...E)=>{b(...E),_()}}let y=p?new Array(e.length).fill(Cr):Cr;const w=b=>{if(!(!(h.flags&1)||!h.dirty&&!b))if(t){const E=h.run();if(s||g||(p?E.some((R,S)=>Pi(R,y[S])):Pi(E,y))){d&&d();const R=Ki;Ki=h;try{const S=[E,y===Cr?void 0:p&&y[0]===Cr?[]:y,f];l?l(t,3,S):t(...S),y=E}finally{Ki=R}}}else h.run()};return a&&a(w),h=new ef(u),h.scheduler=o?()=>o(w,!1):w,f=b=>Gm(b,!1,h),d=h.onStop=()=>{const b=lo.get(h);if(b){if(l)l(b,4);else for(const E of b)E();lo.delete(h)}},t?n?w(!0):y=h.run():o?o(w.bind(null,!0),!0):h.run(),_.pause=h.pause.bind(h),_.resume=h.resume.bind(h),_.stop=_,_}function Mi(e,t=1/0,i){if(t<=0||!kt(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Qt(e))Mi(e.value,t,i);else if(rt(e))for(let n=0;n<e.length;n++)Mi(e[n],t,i);else if(rm(e)||Rs(e))e.forEach(n=>{Mi(n,t,i)});else if(lm(e)){for(const n in e)Mi(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Mi(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cr(e,t,i,n){try{return n?e(...n):e()}catch(s){Xo(s,t,i)}}function Qe(e,t,i,n){if(st(e)){const s=cr(e,t,i,n);return s&&Jd(s)&&s.catch(r=>{Xo(r,t,i)}),s}if(rt(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Qe(e[r],t,i,n));return s}}function Xo(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||St;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,l,c)===!1)return}a=a.parent}if(r){Ni(),cr(r,null,10,[e,l,c]),zi();return}}Km(e,i,s,n,o)}function Km(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const ne=[];let Xe=-1;const Ln=[];let Ti=null,Rn=0;const bf=Promise.resolve();let co=null;function Ef(e){const t=co||bf;return e?t.then(this?e.bind(this):e):t}function $m(e){let t=Xe+1,i=ne.length;for(;t<i;){const n=t+i>>>1,s=ne[n],r=Ws(s);r<e||r===e&&s.flags&2?t=n+1:i=n}return t}function ec(e){if(!(e.flags&1)){const t=Ws(e),i=ne[ne.length-1];!i||!(e.flags&2)&&t>=Ws(i)?ne.push(e):ne.splice($m(t),0,e),e.flags|=1,vf()}}function vf(){co||(co=bf.then(Tf))}function Zm(e){rt(e)?Ln.push(...e):Ti&&e.id===-1?Ti.splice(Rn+1,0,e):e.flags&1||(Ln.push(e),e.flags|=1),vf()}function ph(e,t,i=Xe+1){for(;i<ne.length;i++){const n=ne[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ne.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function wf(e){if(Ln.length){const t=[...new Set(Ln)].sort((i,n)=>Ws(i)-Ws(n));if(Ln.length=0,Ti){Ti.push(...t);return}for(Ti=t,Rn=0;Rn<Ti.length;Rn++){const i=Ti[Rn];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ti=null,Rn=0}}const Ws=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Tf(e){try{for(Xe=0;Xe<ne.length;Xe++){const t=ne[Xe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),cr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xe<ne.length;Xe++){const t=ne[Xe];t&&(t.flags&=-2)}Xe=-1,ne.length=0,wf(),co=null,(ne.length||Ln.length)&&Tf()}}let De=null,Rf=null;function ho(e){const t=De;return De=e,Rf=e&&e.type.__scopeId||null,t}function qm(e,t=De,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Rh(-1);const r=ho(t);let o;try{o=e(...s)}finally{ho(r),n._d&&Rh(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Wi(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Ni(),Qe(l,i,8,[e.el,a,e,t]),zi())}}const Jm=Symbol("_vte"),Qm=e=>e.__isTeleport;function ic(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ic(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Cf(e,t){return st(e)?te({name:e.name},t,{setup:e}):e}function Mf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function uo(e,t,i,n,s=!1){if(rt(e)){e.forEach((g,p)=>uo(g,t&&(rt(t)?t[p]:t),i,n,s));return}if(As(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&uo(e,t,i,n.component.subTree);return}const r=n.shapeFlag&4?ac(n.component):n.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,h=a.refs===St?a.refs={}:a.refs,u=a.setupState,d=ft(u),f=u===St?()=>!1:g=>Et(d,g);if(c!=null&&c!==l&&(Wt(c)?(h[c]=null,f(c)&&(u[c]=null)):Qt(c)&&(c.value=null)),st(l))cr(l,a,12,[o,h]);else{const g=Wt(l),p=Qt(l);if(g||p){const m=()=>{if(e.f){const _=g?f(l)?u[l]:h[l]:l.value;s?rt(_)&&Ul(_,r):rt(_)?_.includes(r)||_.push(r):g?(h[l]=[r],f(l)&&(u[l]=h[l])):(l.value=[r],e.k&&(h[e.k]=l.value))}else g?(h[l]=o,f(l)&&(u[l]=o)):p&&(l.value=o,e.k&&(h[e.k]=o))};o?(m.id=-1,ye(m,i)):m()}}}Vo().requestIdleCallback;Vo().cancelIdleCallback;const As=e=>!!e.type.__asyncLoader,Sf=e=>e.type.__isKeepAlive;function t_(e,t){If(e,"a",t)}function e_(e,t){If(e,"da",t)}function If(e,t,i=Zt){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Go(t,n,i),i){let s=i.parent;for(;s&&s.parent;)Sf(s.parent.vnode)&&i_(n,t,i,s),s=s.parent}}function i_(e,t,i,n){const s=Go(t,e,n,!0);nc(()=>{Ul(n[t],s)},i)}function Go(e,t,i=Zt,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ni();const a=ur(i),l=Qe(t,i,e,o);return a(),zi(),l});return n?s.unshift(r):s.push(r),r}}const fi=e=>(t,i=Zt)=>{(!Vs||e==="sp")&&Go(e,(...n)=>t(...n),i)},n_=fi("bm"),Af=fi("m"),s_=fi("bu"),r_=fi("u"),o_=fi("bum"),nc=fi("um"),a_=fi("sp"),l_=fi("rtg"),c_=fi("rtc");function h_(e,t=Zt){Go("ec",e,t)}const u_="components";function qi(e,t){return f_(u_,e,!0,t)||e}const d_=Symbol.for("v-ndc");function f_(e,t,i=!0,n=!1){const s=De||Zt;if(s){const r=s.type;{const a=e0(r,!1);if(a&&(a===t||a===Ie(t)||a===Uo(Ie(t))))return r}const o=mh(s[e]||r[e],t)||mh(s.appContext[e],t);return!o&&n?r:o}}function mh(e,t){return e&&(e[t]||e[Ie(t)]||e[Uo(Ie(t))])}const hl=e=>e?Jf(e)?ac(e):hl(e.parent):null,Ps=te(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hl(e.parent),$root:e=>hl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Lf(e),$forceUpdate:e=>e.f||(e.f=()=>{ec(e.update)}),$nextTick:e=>e.n||(e.n=Ef.bind(e.proxy)),$watch:e=>k_.bind(e)}),va=(e,t)=>e!==St&&!e.__isScriptSetup&&Et(e,t),g_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(va(n,t))return o[t]=1,n[t];if(s!==St&&Et(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Et(c,t))return o[t]=3,r[t];if(i!==St&&Et(i,t))return o[t]=4,i[t];ul&&(o[t]=0)}}const h=Ps[t];let u,d;if(h)return t==="$attrs"&&Kt(e.attrs,"get",""),h(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(i!==St&&Et(i,t))return o[t]=4,i[t];if(d=l.config.globalProperties,Et(d,t))return d[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return va(s,t)?(s[t]=i,!0):n!==St&&Et(n,t)?(n[t]=i,!0):Et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||e!==St&&Et(e,o)||va(t,o)||(a=r[0])&&Et(a,o)||Et(n,o)||Et(Ps,o)||Et(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Et(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function _h(e){return rt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let ul=!0;function p_(e){const t=Lf(e),i=e.proxy,n=e.ctx;ul=!1,t.beforeCreate&&yh(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:_,beforeUnmount:y,destroyed:w,unmounted:b,render:E,renderTracked:R,renderTriggered:S,errorCaptured:T,serverPrefetch:A,expose:I,inheritAttrs:k,components:N,directives:V,filters:Q}=t;if(c&&m_(c,n,null),o)for(const j in o){const Y=o[j];st(Y)&&(n[j]=Y.bind(i))}if(s){const j=s.call(i,i);kt(j)&&(e.data=Ql(j))}if(ul=!0,r)for(const j in r){const Y=r[j],at=st(Y)?Y.bind(i,i):st(Y.get)?Y.get.bind(i,i):Ze,q=!st(Y)&&st(Y.set)?Y.set.bind(i):Ze,J=n0({get:at,set:q});Object.defineProperty(n,j,{enumerable:!0,configurable:!0,get:()=>J.value,set:ot=>J.value=ot})}if(a)for(const j in a)Pf(a[j],n,i,j);if(l){const j=st(l)?l.call(i):l;Reflect.ownKeys(j).forEach(Y=>{v_(Y,j[Y])})}h&&yh(h,e,"c");function X(j,Y){rt(Y)?Y.forEach(at=>j(at.bind(i))):Y&&j(Y.bind(i))}if(X(n_,u),X(Af,d),X(s_,f),X(r_,g),X(t_,p),X(e_,m),X(h_,T),X(c_,R),X(l_,S),X(o_,y),X(nc,b),X(a_,A),rt(I))if(I.length){const j=e.exposed||(e.exposed={});I.forEach(Y=>{Object.defineProperty(j,Y,{get:()=>i[Y],set:at=>i[Y]=at})})}else e.exposed||(e.exposed={});E&&e.render===Ze&&(e.render=E),k!=null&&(e.inheritAttrs=k),N&&(e.components=N),V&&(e.directives=V),A&&Mf(e)}function m_(e,t,i=Ze){rt(e)&&(e=dl(e));for(const n in e){const s=e[n];let r;kt(s)?"default"in s?r=Jr(s.from||n,s.default,!0):r=Jr(s.from||n):r=Jr(s),Qt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function yh(e,t,i){Qe(rt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Pf(e,t,i,n){let s=n.includes(".")?Gf(i,n):()=>i[n];if(Wt(e)){const r=t[e];st(r)&&Qr(s,r)}else if(st(e))Qr(s,e.bind(i));else if(kt(e))if(rt(e))e.forEach(r=>Pf(r,t,i,n));else{const r=st(e.handler)?e.handler.bind(i):t[e.handler];st(r)&&Qr(s,r,e)}}function Lf(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(c=>fo(l,c,o,!0)),fo(l,t,o)),kt(t)&&r.set(t,l),l}function fo(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&fo(e,r,i,!0),s&&s.forEach(o=>fo(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=__[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const __={data:xh,props:bh,emits:bh,methods:gs,computed:gs,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:gs,directives:gs,watch:x_,provide:xh,inject:y_};function xh(e,t){return t?e?function(){return te(st(e)?e.call(this,this):e,st(t)?t.call(this,this):t)}:t:e}function y_(e,t){return gs(dl(e),dl(t))}function dl(e){if(rt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ee(e,t){return e?[...new Set([].concat(e,t))]:t}function gs(e,t){return e?te(Object.create(null),e,t):t}function bh(e,t){return e?rt(e)&&rt(t)?[...new Set([...e,...t])]:te(Object.create(null),_h(e),_h(t??{})):t}function x_(e,t){if(!e)return t;if(!t)return e;const i=te(Object.create(null),e);for(const n in t)i[n]=ee(e[n],t[n]);return i}function Of(){return{app:null,config:{isNativeTag:nm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let b_=0;function E_(e,t){return function(n,s=null){st(n)||(n=te({},n)),s!=null&&!kt(s)&&(s=null);const r=Of(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:b_++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:tg,get config(){return r.config},set config(h){},use(h,...u){return o.has(h)||(h&&st(h.install)?(o.add(h),h.install(c,...u)):st(h)&&(o.add(h),h(c,...u))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,u){return u?(r.components[h]=u,c):r.components[h]},directive(h,u){return u?(r.directives[h]=u,c):r.directives[h]},mount(h,u,d){if(!l){const f=c._ceVNode||qt(n,s);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),e(f,h,d),l=!0,c._container=h,h.__vue_app__=c,ac(f.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Qe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,u){return r.provides[h]=u,c},runWithContext(h){const u=On;On=c;try{return h()}finally{On=u}}};return c}}let On=null;function v_(e,t){if(Zt){let i=Zt.provides;const n=Zt.parent&&Zt.parent.provides;n===i&&(i=Zt.provides=Object.create(n)),i[e]=t}}function Jr(e,t,i=!1){const n=Zt||De;if(n||On){const s=On?On._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&st(t)?t.call(n&&n.proxy):t}}const Df={},kf=()=>Object.create(Df),Ff=e=>Object.getPrototypeOf(e)===Df;function w_(e,t,i,n=!1){const s={},r=kf();e.propsDefaults=Object.create(null),Nf(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:zm(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function T_(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=ft(s),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(Yo(e.emitsOptions,d))continue;const f=t[d];if(l)if(Et(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const g=Ie(d);s[g]=fl(l,a,g,f,e,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{Nf(e,t,s,r)&&(c=!0);let h;for(const u in a)(!t||!Et(t,u)&&((h=hn(u))===u||!Et(t,h)))&&(l?i&&(i[u]!==void 0||i[h]!==void 0)&&(s[u]=fl(l,a,u,void 0,e,!0)):delete s[u]);if(r!==a)for(const u in r)(!t||!Et(t,u))&&(delete r[u],c=!0)}c&&ci(e.attrs,"set","")}function Nf(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Cs(l))continue;const c=t[l];let h;s&&Et(s,h=Ie(l))?!r||!r.includes(h)?i[h]=c:(a||(a={}))[h]=c:Yo(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=ft(i),c=a||St;for(let h=0;h<r.length;h++){const u=r[h];i[u]=fl(s,l,u,c[u],e,!Et(c,u))}}return o}function fl(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=Et(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&st(l)){const{propsDefaults:c}=s;if(i in c)n=c[i];else{const h=ur(s);n=c[i]=l.call(null,t),h()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===hn(i))&&(n=!0))}return n}const R_=new WeakMap;function zf(e,t,i=!1){const n=i?R_:t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!st(e)){const h=u=>{l=!0;const[d,f]=zf(u,t,!0);te(o,d),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return kt(e)&&n.set(e,Pn),Pn;if(rt(r))for(let h=0;h<r.length;h++){const u=Ie(r[h]);Eh(u)&&(o[u]=St)}else if(r)for(const h in r){const u=Ie(h);if(Eh(u)){const d=r[h],f=o[u]=rt(d)||st(d)?{type:d}:te({},d),g=f.type;let p=!1,m=!0;if(rt(g))for(let _=0;_<g.length;++_){const y=g[_],w=st(y)&&y.name;if(w==="Boolean"){p=!0;break}else w==="String"&&(m=!1)}else p=st(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||Et(f,"default"))&&a.push(u)}}const c=[o,a];return kt(e)&&n.set(e,c),c}function Eh(e){return e[0]!=="$"&&!Cs(e)}const Bf=e=>e[0]==="_"||e==="$stable",sc=e=>rt(e)?e.map(Ye):[Ye(e)],C_=(e,t,i)=>{if(t._n)return t;const n=qm((...s)=>sc(t(...s)),i);return n._c=!1,n},jf=(e,t,i)=>{const n=e._ctx;for(const s in e){if(Bf(s))continue;const r=e[s];if(st(r))t[s]=C_(s,r,n);else if(r!=null){const o=sc(r);t[s]=()=>o}}},Wf=(e,t)=>{const i=sc(t);e.slots.default=()=>i},Hf=(e,t,i)=>{for(const n in t)(i||n!=="_")&&(e[n]=t[n])},M_=(e,t,i)=>{const n=e.slots=kf();if(e.vnode.shapeFlag&32){const s=t._;s?(Hf(n,t,i),i&&Qd(n,"_",s,!0)):jf(t,n)}else t&&Wf(e,t)},S_=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=St;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:Hf(s,t,i):(r=!t.$stable,jf(t,s)),o=t}else t&&(Wf(e,t),o={default:1});if(r)for(const a in s)!Bf(a)&&o[a]==null&&delete s[a]},ye=H_;function I_(e){return A_(e)}function A_(e,t){const i=Vo();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=Ze,insertStaticContent:g}=e,p=(x,v,C,O=null,P=null,L=null,B=void 0,z=null,F=!!v.dynamicChildren)=>{if(x===v)return;x&&!ss(x,v)&&(O=Pt(x),ot(x,P,L,!0),x=null),v.patchFlag===-2&&(F=!1,v.dynamicChildren=null);const{type:D,ref:Z,shapeFlag:H}=v;switch(D){case Ko:m(x,v,C,O);break;case Hs:_(x,v,C,O);break;case Ta:x==null&&y(v,C,O,B);break;case oi:N(x,v,C,O,P,L,B,z,F);break;default:H&1?E(x,v,C,O,P,L,B,z,F):H&6?V(x,v,C,O,P,L,B,z,F):(H&64||H&128)&&D.process(x,v,C,O,P,L,B,z,F,Ht)}Z!=null&&P&&uo(Z,x&&x.ref,L,v||x,!v)},m=(x,v,C,O)=>{if(x==null)n(v.el=a(v.children),C,O);else{const P=v.el=x.el;v.children!==x.children&&c(P,v.children)}},_=(x,v,C,O)=>{x==null?n(v.el=l(v.children||""),C,O):v.el=x.el},y=(x,v,C,O)=>{[x.el,x.anchor]=g(x.children,v,C,O,x.el,x.anchor)},w=({el:x,anchor:v},C,O)=>{let P;for(;x&&x!==v;)P=d(x),n(x,C,O),x=P;n(v,C,O)},b=({el:x,anchor:v})=>{let C;for(;x&&x!==v;)C=d(x),s(x),x=C;s(v)},E=(x,v,C,O,P,L,B,z,F)=>{v.type==="svg"?B="svg":v.type==="math"&&(B="mathml"),x==null?R(v,C,O,P,L,B,z,F):A(x,v,P,L,B,z,F)},R=(x,v,C,O,P,L,B,z)=>{let F,D;const{props:Z,shapeFlag:H,transition:K,dirs:G}=x;if(F=x.el=o(x.type,L,Z&&Z.is,Z),H&8?h(F,x.children):H&16&&T(x.children,F,null,O,P,wa(x,L),B,z),G&&Wi(x,null,O,"created"),S(F,x,x.scopeId,B,O),Z){for(const Ct in Z)Ct!=="value"&&!Cs(Ct)&&r(F,Ct,null,Z[Ct],L,O);"value"in Z&&r(F,"value",null,Z.value,L),(D=Z.onVnodeBeforeMount)&&He(D,O,x)}G&&Wi(x,null,O,"beforeMount");const dt=P_(P,K);dt&&K.beforeEnter(F),n(F,v,C),((D=Z&&Z.onVnodeMounted)||dt||G)&&ye(()=>{D&&He(D,O,x),dt&&K.enter(F),G&&Wi(x,null,O,"mounted")},P)},S=(x,v,C,O,P)=>{if(C&&f(x,C),O)for(let L=0;L<O.length;L++)f(x,O[L]);if(P){let L=P.subTree;if(v===L||Kf(L.type)&&(L.ssContent===v||L.ssFallback===v)){const B=P.vnode;S(x,B,B.scopeId,B.slotScopeIds,P.parent)}}},T=(x,v,C,O,P,L,B,z,F=0)=>{for(let D=F;D<x.length;D++){const Z=x[D]=z?Ri(x[D]):Ye(x[D]);p(null,Z,v,C,O,P,L,B,z)}},A=(x,v,C,O,P,L,B)=>{const z=v.el=x.el;let{patchFlag:F,dynamicChildren:D,dirs:Z}=v;F|=x.patchFlag&16;const H=x.props||St,K=v.props||St;let G;if(C&&Hi(C,!1),(G=K.onVnodeBeforeUpdate)&&He(G,C,v,x),Z&&Wi(v,x,C,"beforeUpdate"),C&&Hi(C,!0),(H.innerHTML&&K.innerHTML==null||H.textContent&&K.textContent==null)&&h(z,""),D?I(x.dynamicChildren,D,z,C,O,wa(v,P),L):B||Y(x,v,z,null,C,O,wa(v,P),L,!1),F>0){if(F&16)k(z,H,K,C,P);else if(F&2&&H.class!==K.class&&r(z,"class",null,K.class,P),F&4&&r(z,"style",H.style,K.style,P),F&8){const dt=v.dynamicProps;for(let Ct=0;Ct<dt.length;Ct++){const vt=dt[Ct],me=H[vt],ae=K[vt];(ae!==me||vt==="value")&&r(z,vt,me,ae,P,C)}}F&1&&x.children!==v.children&&h(z,v.children)}else!B&&D==null&&k(z,H,K,C,P);((G=K.onVnodeUpdated)||Z)&&ye(()=>{G&&He(G,C,v,x),Z&&Wi(v,x,C,"updated")},O)},I=(x,v,C,O,P,L,B)=>{for(let z=0;z<v.length;z++){const F=x[z],D=v[z],Z=F.el&&(F.type===oi||!ss(F,D)||F.shapeFlag&70)?u(F.el):C;p(F,D,Z,null,O,P,L,B,!0)}},k=(x,v,C,O,P)=>{if(v!==C){if(v!==St)for(const L in v)!Cs(L)&&!(L in C)&&r(x,L,v[L],null,P,O);for(const L in C){if(Cs(L))continue;const B=C[L],z=v[L];B!==z&&L!=="value"&&r(x,L,z,B,P,O)}"value"in C&&r(x,"value",v.value,C.value,P)}},N=(x,v,C,O,P,L,B,z,F)=>{const D=v.el=x?x.el:a(""),Z=v.anchor=x?x.anchor:a("");let{patchFlag:H,dynamicChildren:K,slotScopeIds:G}=v;G&&(z=z?z.concat(G):G),x==null?(n(D,C,O),n(Z,C,O),T(v.children||[],C,Z,P,L,B,z,F)):H>0&&H&64&&K&&x.dynamicChildren?(I(x.dynamicChildren,K,C,P,L,B,z),(v.key!=null||P&&v===P.subTree)&&Uf(x,v,!0)):Y(x,v,C,Z,P,L,B,z,F)},V=(x,v,C,O,P,L,B,z,F)=>{v.slotScopeIds=z,x==null?v.shapeFlag&512?P.ctx.activate(v,C,O,B,F):Q(v,C,O,P,L,B,F):W(x,v,F)},Q=(x,v,C,O,P,L,B)=>{const z=x.component=Z_(x,O,P);if(Sf(x)&&(z.ctx.renderer=Ht),q_(z,!1,B),z.asyncDep){if(P&&P.registerDep(z,X,B),!x.el){const F=z.subTree=qt(Hs);_(null,F,v,C)}}else X(z,x,v,C,P,L,B)},W=(x,v,C)=>{const O=v.component=x.component;if(j_(x,v,C))if(O.asyncDep&&!O.asyncResolved){j(O,v,C);return}else O.next=v,O.update();else v.el=x.el,O.vnode=v},X=(x,v,C,O,P,L,B)=>{const z=()=>{if(x.isMounted){let{next:H,bu:K,u:G,parent:dt,vnode:Ct}=x;{const je=Vf(x);if(je){H&&(H.el=Ct.el,j(x,H,B)),je.asyncDep.then(()=>{x.isUnmounted||z()});return}}let vt=H,me;Hi(x,!1),H?(H.el=Ct.el,j(x,H,B)):H=Ct,K&&ya(K),(me=H.props&&H.props.onVnodeBeforeUpdate)&&He(me,dt,H,Ct),Hi(x,!0);const ae=wh(x),Be=x.subTree;x.subTree=ae,p(Be,ae,u(Be.el),Pt(Be),x,P,L),H.el=ae.el,vt===null&&W_(x,ae.el),G&&ye(G,P),(me=H.props&&H.props.onVnodeUpdated)&&ye(()=>He(me,dt,H,Ct),P)}else{let H;const{el:K,props:G}=v,{bm:dt,m:Ct,parent:vt,root:me,type:ae}=x,Be=As(v);Hi(x,!1),dt&&ya(dt),!Be&&(H=G&&G.onVnodeBeforeMount)&&He(H,vt,v),Hi(x,!0);{me.ce&&me.ce._injectChildStyle(ae);const je=x.subTree=wh(x);p(null,je,C,O,x,P,L),v.el=je.el}if(Ct&&ye(Ct,P),!Be&&(H=G&&G.onVnodeMounted)){const je=v;ye(()=>He(H,vt,je),P)}(v.shapeFlag&256||vt&&As(vt.vnode)&&vt.vnode.shapeFlag&256)&&x.a&&ye(x.a,P),x.isMounted=!0,v=C=O=null}};x.scope.on();const F=x.effect=new ef(z);x.scope.off();const D=x.update=F.run.bind(F),Z=x.job=F.runIfDirty.bind(F);Z.i=x,Z.id=x.uid,F.scheduler=()=>ec(Z),Hi(x,!0),D()},j=(x,v,C)=>{v.component=x;const O=x.vnode.props;x.vnode=v,x.next=null,T_(x,v.props,O,C),S_(x,v.children,C),Ni(),ph(x),zi()},Y=(x,v,C,O,P,L,B,z,F=!1)=>{const D=x&&x.children,Z=x?x.shapeFlag:0,H=v.children,{patchFlag:K,shapeFlag:G}=v;if(K>0){if(K&128){q(D,H,C,O,P,L,B,z,F);return}else if(K&256){at(D,H,C,O,P,L,B,z,F);return}}G&8?(Z&16&&ct(D,P,L),H!==D&&h(C,H)):Z&16?G&16?q(D,H,C,O,P,L,B,z,F):ct(D,P,L,!0):(Z&8&&h(C,""),G&16&&T(H,C,O,P,L,B,z,F))},at=(x,v,C,O,P,L,B,z,F)=>{x=x||Pn,v=v||Pn;const D=x.length,Z=v.length,H=Math.min(D,Z);let K;for(K=0;K<H;K++){const G=v[K]=F?Ri(v[K]):Ye(v[K]);p(x[K],G,C,null,P,L,B,z,F)}D>Z?ct(x,P,L,!0,!1,H):T(v,C,O,P,L,B,z,F,H)},q=(x,v,C,O,P,L,B,z,F)=>{let D=0;const Z=v.length;let H=x.length-1,K=Z-1;for(;D<=H&&D<=K;){const G=x[D],dt=v[D]=F?Ri(v[D]):Ye(v[D]);if(ss(G,dt))p(G,dt,C,null,P,L,B,z,F);else break;D++}for(;D<=H&&D<=K;){const G=x[H],dt=v[K]=F?Ri(v[K]):Ye(v[K]);if(ss(G,dt))p(G,dt,C,null,P,L,B,z,F);else break;H--,K--}if(D>H){if(D<=K){const G=K+1,dt=G<Z?v[G].el:O;for(;D<=K;)p(null,v[D]=F?Ri(v[D]):Ye(v[D]),C,dt,P,L,B,z,F),D++}}else if(D>K)for(;D<=H;)ot(x[D],P,L,!0),D++;else{const G=D,dt=D,Ct=new Map;for(D=dt;D<=K;D++){const _e=v[D]=F?Ri(v[D]):Ye(v[D]);_e.key!=null&&Ct.set(_e.key,D)}let vt,me=0;const ae=K-dt+1;let Be=!1,je=0;const is=new Array(ae);for(D=0;D<ae;D++)is[D]=0;for(D=G;D<=H;D++){const _e=x[D];if(me>=ae){ot(_e,P,L,!0);continue}let We;if(_e.key!=null)We=Ct.get(_e.key);else for(vt=dt;vt<=K;vt++)if(is[vt-dt]===0&&ss(_e,v[vt])){We=vt;break}We===void 0?ot(_e,P,L,!0):(is[We-dt]=D+1,We>=je?je=We:Be=!0,p(_e,v[We],C,null,P,L,B,z,F),me++)}const hh=Be?L_(is):Pn;for(vt=hh.length-1,D=ae-1;D>=0;D--){const _e=dt+D,We=v[_e],uh=_e+1<Z?v[_e+1].el:O;is[D]===0?p(null,We,C,uh,P,L,B,z,F):Be&&(vt<0||D!==hh[vt]?J(We,C,uh,2):vt--)}}},J=(x,v,C,O,P=null)=>{const{el:L,type:B,transition:z,children:F,shapeFlag:D}=x;if(D&6){J(x.component.subTree,v,C,O);return}if(D&128){x.suspense.move(v,C,O);return}if(D&64){B.move(x,v,C,Ht);return}if(B===oi){n(L,v,C);for(let H=0;H<F.length;H++)J(F[H],v,C,O);n(x.anchor,v,C);return}if(B===Ta){w(x,v,C);return}if(O!==2&&D&1&&z)if(O===0)z.beforeEnter(L),n(L,v,C),ye(()=>z.enter(L),P);else{const{leave:H,delayLeave:K,afterLeave:G}=z,dt=()=>n(L,v,C),Ct=()=>{H(L,()=>{dt(),G&&G()})};K?K(L,dt,Ct):Ct()}else n(L,v,C)},ot=(x,v,C,O=!1,P=!1)=>{const{type:L,props:B,ref:z,children:F,dynamicChildren:D,shapeFlag:Z,patchFlag:H,dirs:K,cacheIndex:G}=x;if(H===-2&&(P=!1),z!=null&&uo(z,null,C,x,!0),G!=null&&(v.renderCache[G]=void 0),Z&256){v.ctx.deactivate(x);return}const dt=Z&1&&K,Ct=!As(x);let vt;if(Ct&&(vt=B&&B.onVnodeBeforeUnmount)&&He(vt,v,x),Z&6)bt(x.component,C,O);else{if(Z&128){x.suspense.unmount(C,O);return}dt&&Wi(x,null,v,"beforeUnmount"),Z&64?x.type.remove(x,v,C,Ht,O):D&&!D.hasOnce&&(L!==oi||H>0&&H&64)?ct(D,v,C,!1,!0):(L===oi&&H&384||!P&&Z&16)&&ct(F,v,C),O&&lt(x)}(Ct&&(vt=B&&B.onVnodeUnmounted)||dt)&&ye(()=>{vt&&He(vt,v,x),dt&&Wi(x,null,v,"unmounted")},C)},lt=x=>{const{type:v,el:C,anchor:O,transition:P}=x;if(v===oi){xt(C,O);return}if(v===Ta){b(x);return}const L=()=>{s(C),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(x.shapeFlag&1&&P&&!P.persisted){const{leave:B,delayLeave:z}=P,F=()=>B(C,L);z?z(x.el,L,F):F()}else L()},xt=(x,v)=>{let C;for(;x!==v;)C=d(x),s(x),x=C;s(v)},bt=(x,v,C)=>{const{bum:O,scope:P,job:L,subTree:B,um:z,m:F,a:D}=x;vh(F),vh(D),O&&ya(O),P.stop(),L&&(L.flags|=8,ot(B,x,v,C)),z&&ye(z,v),ye(()=>{x.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},ct=(x,v,C,O=!1,P=!1,L=0)=>{for(let B=L;B<x.length;B++)ot(x[B],v,C,O,P)},Pt=x=>{if(x.shapeFlag&6)return Pt(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const v=d(x.anchor||x.el),C=v&&v[Jm];return C?d(C):v};let oe=!1;const we=(x,v,C)=>{x==null?v._vnode&&ot(v._vnode,null,null,!0):p(v._vnode||null,x,v,null,null,null,C),v._vnode=x,oe||(oe=!0,ph(),wf(),oe=!1)},Ht={p,um:ot,m:J,r:lt,mt:Q,mc:T,pc:Y,pbc:I,n:Pt,o:e};return{render:we,hydrate:void 0,createApp:E_(we)}}function wa({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Hi({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function P_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Uf(e,t,i=!1){const n=e.children,s=t.children;if(rt(n)&&rt(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Ri(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&Uf(o,a)),a.type===Ko&&(a.el=o.el)}}function L_(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(s=i[i.length-1],e[s]<c){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<c?r=a+1:o=a;c<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function Vf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Vf(t)}function vh(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const O_=Symbol.for("v-scx"),D_=()=>Jr(O_);function Qr(e,t,i){return Xf(e,t,i)}function Xf(e,t,i=St){const{immediate:n,deep:s,flush:r,once:o}=i,a=te({},i),l=t&&n||!t&&r!=="post";let c;if(Vs){if(r==="sync"){const f=D_();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ze,f.resume=Ze,f.pause=Ze,f}}const h=Zt;a.call=(f,g,p)=>Qe(f,h,g,p);let u=!1;r==="post"?a.scheduler=f=>{ye(f,h&&h.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():ec(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const d=Ym(e,t,a);return Vs&&(c?c.push(d):l&&d()),d}function k_(e,t,i){const n=this.proxy,s=Wt(e)?e.includes(".")?Gf(n,e):()=>n[e]:e.bind(n,n);let r;st(t)?r=t:(r=t.handler,i=t);const o=ur(this),a=Xf(s,r.bind(n),i);return o(),a}function Gf(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const F_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ie(t)}Modifiers`]||e[`${hn(t)}Modifiers`];function N_(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||St;let s=i;const r=t.startsWith("update:"),o=r&&F_(n,t.slice(7));o&&(o.trim&&(s=i.map(h=>Wt(h)?h.trim():h)),o.number&&(s=i.map(um)));let a,l=n[a=_a(t)]||n[a=_a(Ie(t))];!l&&r&&(l=n[a=_a(hn(t))]),l&&Qe(l,e,6,s);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Qe(c,e,6,s)}}function Yf(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!st(e)){const l=c=>{const h=Yf(c,t,!0);h&&(a=!0,te(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(kt(e)&&n.set(e,null),null):(rt(r)?r.forEach(l=>o[l]=null):te(o,r),kt(e)&&n.set(e,o),o)}function Yo(e,t){return!e||!jo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(e,t[0].toLowerCase()+t.slice(1))||Et(e,hn(t))||Et(e,t))}function wh(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:d,setupState:f,ctx:g,inheritAttrs:p}=e,m=ho(e);let _,y;try{if(i.shapeFlag&4){const b=s||n,E=b;_=Ye(c.call(E,b,h,u,f,d,g)),y=a}else{const b=t;_=Ye(b.length>1?b(u,{attrs:a,slots:o,emit:l}):b(u,null)),y=t.props?a:z_(a)}}catch(b){Ls.length=0,Xo(b,e,1),_=qt(Hs)}let w=_;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:E}=w;b.length&&E&7&&(r&&b.some(Hl)&&(y=B_(y,r)),w=Un(w,y,!1,!0))}return i.dirs&&(w=Un(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&ic(w,i.transition),_=w,ho(m),_}const z_=e=>{let t;for(const i in e)(i==="class"||i==="style"||jo(i))&&((t||(t={}))[i]=e[i]);return t},B_=(e,t)=>{const i={};for(const n in e)(!Hl(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function j_(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Th(n,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==n[d]&&!Yo(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Th(n,o,c):!0:!!o;return!1}function Th(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!Yo(i,r))return!0}return!1}function W_({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const Kf=e=>e.__isSuspense;function H_(e,t){t&&t.pendingBranch?rt(e)?t.effects.push(...e):t.effects.push(e):Zm(e)}const oi=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),Hs=Symbol.for("v-cmt"),Ta=Symbol.for("v-stc"),Ls=[];let be=null;function hr(e=!1){Ls.push(be=e?null:[])}function U_(){Ls.pop(),be=Ls[Ls.length-1]||null}let Us=1;function Rh(e,t=!1){Us+=e,e<0&&be&&t&&(be.hasOnce=!0)}function $f(e){return e.dynamicChildren=Us>0?be||Pn:null,U_(),Us>0&&be&&be.push(e),e}function Zf(e,t,i,n,s,r){return $f(In(e,t,i,n,s,r,!0))}function rc(e,t,i,n,s){return $f(qt(e,t,i,n,s,!0))}function go(e){return e?e.__v_isVNode===!0:!1}function ss(e,t){return e.type===t.type&&e.key===t.key}const qf=({key:e})=>e??null,to=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Wt(e)||Qt(e)||st(e)?{i:De,r:e,k:t,f:!!i}:e:null);function In(e,t=null,i=null,n=0,s=null,r=e===oi?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qf(t),ref:t&&to(t),scopeId:Rf,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:De};return a?(oc(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Wt(i)?8:16),Us>0&&!o&&be&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&be.push(l),l}const qt=V_;function V_(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===d_)&&(e=Hs),go(e)){const a=Un(e,t,!0);return i&&oc(a,i),Us>0&&!r&&be&&(a.shapeFlag&6?be[be.indexOf(e)]=a:be.push(a)),a.patchFlag=-2,a}if(i0(e)&&(e=e.__vccOpts),t){t=X_(t);let{class:a,style:l}=t;a&&!Wt(a)&&(t.class=Gl(a)),kt(l)&&(lr(l)&&!rt(l)&&(l=te({},l)),t.style=Xl(l))}const o=Wt(e)?1:Kf(e)?128:Qm(e)?64:kt(e)?4:st(e)?2:0;return In(e,t,i,n,s,o,r,!0)}function X_(e){return e?lr(e)||Ff(e)?te({},e):e:null}function Un(e,t,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Y_(s||{},t):s,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&qf(c),ref:t&&t.ref?i&&r?rt(r)?r.concat(to(t)):[r,to(t)]:to(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oi?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Un(e.ssContent),ssFallback:e.ssFallback&&Un(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&ic(h,l.clone(h)),h}function G_(e=" ",t=0){return qt(Ko,null,e,t)}function Ye(e){return e==null||typeof e=="boolean"?qt(Hs):rt(e)?qt(oi,null,e.slice()):go(e)?Ri(e):qt(Ko,null,String(e))}function Ri(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Un(e)}function oc(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(rt(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),oc(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!Ff(t)?t._ctx=De:s===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else st(t)?(t={default:t,_ctx:De},i=32):(t=String(t),n&64?(i=16,t=[G_(t)]):i=8);e.children=t,e.shapeFlag|=i}function Y_(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Gl([t.class,n.class]));else if(s==="style")t.style=Xl([t.style,n.style]);else if(jo(s)){const r=t[s],o=n[s];o&&r!==o&&!(rt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function He(e,t,i,n=null){Qe(e,t,7,[i,n])}const K_=Of();let $_=0;function Z_(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||K_,r={uid:$_++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ym(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zf(n,s),emitsOptions:Yf(n,s),emit:null,emitted:null,propsDefaults:St,inheritAttrs:n.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=N_.bind(null,r),e.ce&&e.ce(r),r}let Zt=null,po,gl;{const e=Vo(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};po=t("__VUE_INSTANCE_SETTERS__",i=>Zt=i),gl=t("__VUE_SSR_SETTERS__",i=>Vs=i)}const ur=e=>{const t=Zt;return po(e),e.scope.on(),()=>{e.scope.off(),po(t)}},Ch=()=>{Zt&&Zt.scope.off(),po(null)};function Jf(e){return e.vnode.shapeFlag&4}let Vs=!1;function q_(e,t=!1,i=!1){t&&gl(t);const{props:n,children:s}=e.vnode,r=Jf(e);w_(e,n,r,t),M_(e,s,i);const o=r?J_(e,t):void 0;return t&&gl(!1),o}function J_(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,g_);const{setup:n}=i;if(n){Ni();const s=e.setupContext=n.length>1?t0(e):null,r=ur(e),o=cr(n,e,0,[e.props,s]),a=Jd(o);if(zi(),r(),(a||e.sp)&&!As(e)&&Mf(e),a){if(o.then(Ch,Ch),t)return o.then(l=>{Mh(e,l)}).catch(l=>{Xo(l,e,0)});e.asyncDep=o}else Mh(e,o)}else Qf(e)}function Mh(e,t,i){st(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:kt(t)&&(e.setupState=xf(t)),Qf(e)}function Qf(e,t,i){const n=e.type;e.render||(e.render=n.render||Ze);{const s=ur(e);Ni();try{p_(e)}finally{zi(),s()}}}const Q_={get(e,t){return Kt(e,"get",""),e[t]}};function t0(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Q_),slots:e.slots,emit:e.emit,expose:t}}function ac(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xf(Bm(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Ps)return Ps[i](e)},has(t,i){return i in t||i in Ps}})):e.proxy}function e0(e,t=!0){return st(e)?e.displayName||e.name:e.name||t&&e.__name}function i0(e){return st(e)&&"__vccOpts"in e}const n0=(e,t)=>Xm(e,t,Vs);function pl(e,t,i){const n=arguments.length;return n===2?kt(t)&&!rt(t)?go(t)?qt(e,null,[t]):qt(e,t):qt(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&go(i)&&(i=[i]),qt(e,t,i))}const tg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ml;const Sh=typeof window<"u"&&window.trustedTypes;if(Sh)try{ml=Sh.createPolicy("vue",{createHTML:e=>e})}catch{}const eg=ml?e=>ml.createHTML(e):e=>e,s0="http://www.w3.org/2000/svg",r0="http://www.w3.org/1998/Math/MathML",ri=typeof document<"u"?document:null,Ih=ri&&ri.createElement("template"),o0={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?ri.createElementNS(s0,e):t==="mathml"?ri.createElementNS(r0,e):i?ri.createElement(e,{is:i}):ri.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>ri.createTextNode(e),createComment:e=>ri.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ri.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Ih.innerHTML=eg(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Ih.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},a0=Symbol("_vtc");function l0(e,t,i){const n=e[a0];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Ah=Symbol("_vod"),c0=Symbol("_vsh"),h0=Symbol(""),u0=/(^|;)\s*display\s*:/;function d0(e,t,i){const n=e.style,s=Wt(i);let r=!1;if(i&&!s){if(t)if(Wt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&eo(n,a,"")}else for(const o in t)i[o]==null&&eo(n,o,"");for(const o in i)o==="display"&&(r=!0),eo(n,o,i[o])}else if(s){if(t!==i){const o=n[h0];o&&(i+=";"+o),n.cssText=i,r=u0.test(i)}}else t&&e.removeAttribute("style");Ah in e&&(e[Ah]=r?n.display:"",e[c0]&&(n.display="none"))}const Ph=/\s*!important$/;function eo(e,t,i){if(rt(i))i.forEach(n=>eo(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=f0(e,t);Ph.test(i)?e.setProperty(hn(n),i.replace(Ph,""),"important"):e[n]=i}}const Lh=["Webkit","Moz","ms"],Ra={};function f0(e,t){const i=Ra[t];if(i)return i;let n=Ie(t);if(n!=="filter"&&n in e)return Ra[t]=n;n=Uo(n);for(let s=0;s<Lh.length;s++){const r=Lh[s]+n;if(r in e)return Ra[t]=r}return t}const Oh="http://www.w3.org/1999/xlink";function Dh(e,t,i,n,s,r=_m(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Oh,t.slice(6,t.length)):e.setAttributeNS(Oh,t,i):i==null||r&&!tf(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Zn(i)?String(i):i)}function kh(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?eg(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=tf(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(s||t)}function g0(e,t,i,n){e.addEventListener(t,i,n)}function p0(e,t,i,n){e.removeEventListener(t,i,n)}const Fh=Symbol("_vei");function m0(e,t,i,n,s=null){const r=e[Fh]||(e[Fh]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=_0(t);if(n){const c=r[t]=b0(n,s);g0(e,a,c,l)}else o&&(p0(e,a,o,l),r[t]=void 0)}}const Nh=/(?:Once|Passive|Capture)$/;function _0(e){let t;if(Nh.test(e)){t={};let n;for(;n=e.match(Nh);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hn(e.slice(2)),t]}let Ca=0;const y0=Promise.resolve(),x0=()=>Ca||(y0.then(()=>Ca=0),Ca=Date.now());function b0(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Qe(E0(n,i.value),t,5,[n])};return i.value=e,i.attached=x0(),i}function E0(e,t){if(rt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const zh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,v0=(e,t,i,n,s,r)=>{const o=s==="svg";t==="class"?l0(e,n,o):t==="style"?d0(e,i,n):jo(t)?Hl(t)||m0(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):w0(e,t,n,o))?(kh(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Dh(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Wt(n))?kh(e,Ie(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Dh(e,t,n,o))};function w0(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&zh(t)&&st(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return zh(t)&&Wt(i)?!1:t in e}const T0=te({patchProp:v0},o0);let Bh;function R0(){return Bh||(Bh=I_(T0))}const C0=(...e)=>{const t=R0().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=S0(n);if(!s)return;const r=t._component;!st(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,M0(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function M0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function S0(e){return Wt(e)?document.querySelector(e):e}class gi{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Xs={PROPERTYCHANGE:"propertychange"};class $o{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function lc(e,t){return e>t?1:e<t?-1:0}function Zo(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if(typeof i=="function"){for(let s=1;s<n;++s){const r=e[s];if(r===t)return s;if(r<t)return i(t,e[s-1],r)>0?s-1:s}return n-1}if(i>0){for(let s=1;s<n;++s)if(e[s]<t)return s-1;return n-1}if(i<0){for(let s=1;s<n;++s)if(e[s]<=t)return s;return n-1}for(let s=1;s<n;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return n-1}function I0(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let s=0;s<n;s++)e[e.length]=i[s]}function qo(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function A0(e,t,i){const n=t;return e.every(function(s,r){if(r===0)return!0;const o=n(e[r-1],s);return!(o>0||o===0)})}function mo(){return!0}function Jo(){return!1}function _o(){}function P0(e){let t,i,n;return function(){const s=Array.prototype.slice.call(arguments);return(!i||this!==n||!qo(s,i))&&(n=this,i=s,t=e.apply(this,arguments)),t}}function ig(e){function t(){let i;try{i=e()}catch(n){return Promise.reject(n)}return i instanceof Promise?i:Promise.resolve(i)}return t()}function Qo(e){for(const t in e)delete e[t]}function ng(e){let t;for(t in e)return!1;return!t}class dr extends $o{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(i)||s.push(i)}dispatchEvent(t){const i=typeof t=="string",n=i?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=i?new gi(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,_o);delete o[n]}return l}disposeInternal(){this.listeners_&&Qo(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const s=n.indexOf(i);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=_o,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}const it={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function yt(e,t,i,n,s){if(s){const o=i;i=function(){e.removeEventListener(t,i),o.apply(n??this,arguments)}}else n&&n!==e&&(i=i.bind(n));const r={target:e,type:t,listener:i};return e.addEventListener(t,i),r}function yo(e,t,i,n){return yt(e,t,i,n,!0)}function Lt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Qo(e))}class fr extends dr{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(it.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=yt(this,t[r],i);return s}return yt(this,t,i)}onceInternal(t,i){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=yo(this,t[r],i)}else n=yo(this,t,i);return i.ol_key=n,n}unInternal(t,i){const n=i.ol_key;if(n)L0(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],i);else this.removeEventListener(t,i)}}fr.prototype.on;fr.prototype.once;fr.prototype.un;function L0(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)Lt(e[t]);else Lt(e)}function gt(){throw new Error("Unimplemented abstract method.")}let O0=0;function $t(e){return e.ol_uid||(e.ol_uid=String(++O0))}class jh extends gi{constructor(t,i,n){super(t),this.key=i,this.oldValue=n}}class pi extends fr{constructor(t){super(),this.on,this.once,this.un,$t(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,i){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new jh(n,t,i)),n=Xs.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new jh(n,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,n){const s=this.values_||(this.values_={});if(n)s[t]=i;else{const r=s[t];s[t]=i,r!==i&&this.notify(t,r)}}setProperties(t,i){for(const n in t)this.set(n,t[n],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],ng(this.values_)&&(this.values_=null),i||this.notify(t,n)}}}const ce={ANIMATING:0,INTERACTING:1},Le={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},D0=42,cc=256,hc={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class uc{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||hc[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const gr=6378137,An=Math.PI*gr,k0=[-An,-An,An,An],F0=[-180,-85,180,85],Mr=gr*Math.log(Math.tan(Math.PI/2));class pn extends uc{constructor(t){super({code:t,units:"m",extent:k0,global:!0,worldExtent:F0,getPointResolution:function(i,n){return i/Math.cosh(n[1]/gr)}})}}const Wh=[new pn("EPSG:3857"),new pn("EPSG:102100"),new pn("EPSG:102113"),new pn("EPSG:900913"),new pn("http://www.opengis.net/def/crs/EPSG/0/3857"),new pn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function N0(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let r=0;r<s;r+=n){t[r]=An*e[r]/180;let o=gr*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));o>Mr?o=Mr:o<-Mr&&(o=-Mr),t[r+1]=o}return t}function z0(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let r=0;r<s;r+=n)t[r]=180*e[r]/An,t[r+1]=360*Math.atan(Math.exp(e[r+1]/gr))/Math.PI-90;return t}const B0=6378137,Hh=[-180,-90,180,90],j0=Math.PI*B0/180;class Ui extends uc{constructor(t,i){super({code:t,units:"degrees",extent:Hh,axisOrientation:i,global:!0,metersPerUnit:j0,worldExtent:Hh})}}const Uh=[new Ui("CRS:84"),new Ui("EPSG:4326","neu"),new Ui("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ui("urn:ogc:def:crs:OGC:2:84"),new Ui("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ui("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ui("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let _l={};function W0(e){return _l[e]||_l[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function H0(e,t){_l[e]=t}let Dn={};function Gs(e,t,i){const n=e.getCode(),s=t.getCode();n in Dn||(Dn[n]={}),Dn[n][s]=i}function Ma(e,t){return e in Dn&&t in Dn[e]?Dn[e][t]:null}const Ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Vh(e){const t=Bi();for(let i=0,n=e.length;i<n;++i)io(t,e[i]);return t}function U0(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function sg(e,t,i){let n,s;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,i<e[1]?s=e[1]-i:e[3]<i?s=i-e[3]:s=0,n*n+s*s}function ta(e,t){return rg(e,t[0],t[1])}function xo(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function rg(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function Xh(e,t){const i=e[0],n=e[1],s=e[2],r=e[3],o=t[0],a=t[1];let l=Ut.UNKNOWN;return o<i?l=l|Ut.LEFT:o>s&&(l=l|Ut.RIGHT),a<n?l=l|Ut.BELOW:a>r&&(l=l|Ut.ABOVE),l===Ut.UNKNOWN&&(l=Ut.INTERSECTING),l}function Bi(){return[1/0,1/0,-1/0,-1/0]}function pr(e,t,i,n,s){return s?(s[0]=e,s[1]=t,s[2]=i,s[3]=n,s):[e,t,i,n]}function ea(e){return pr(1/0,1/0,-1/0,-1/0,e)}function V0(e,t){const i=e[0],n=e[1];return pr(i,n,i,n,t)}function X0(e,t,i,n,s){const r=ea(s);return ag(r,e,t,i,n)}function bo(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function og(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function io(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function ag(e,t,i,n,s){for(;i<n;i+=s)G0(e,t[i],t[i+1]);return e}function G0(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function lg(e,t){let i;return i=t(ia(e)),i||(i=t(na(e)),i)||(i=t(sa(e)),i)||(i=t(di(e)),i)?i:!1}function Ys(e){let t=0;return qn(e)||(t=pt(e)*Bt(e)),t}function ia(e){return[e[0],e[1]]}function na(e){return[e[2],e[1]]}function Di(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function Y0(e,t){let i;if(t==="bottom-left")i=ia(e);else if(t==="bottom-right")i=na(e);else if(t==="top-left")i=di(e);else if(t==="top-right")i=sa(e);else throw new Error("Invalid corner");return i}function Eo(e,t,i,n,s){const[r,o,a,l,c,h,u,d]=K0(e,t,i,n);return pr(Math.min(r,a,c,u),Math.min(o,l,h,d),Math.max(r,a,c,u),Math.max(o,l,h,d),s)}function K0(e,t,i,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=s*o,c=s*a,h=r*o,u=r*a,d=e[0],f=e[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function Bt(e){return e[3]-e[1]}function Ee(e,t,i){const n=i||Bi();return un(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):ea(n),n}function di(e){return[e[0],e[3]]}function sa(e){return[e[2],e[3]]}function pt(e){return e[2]-e[0]}function un(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function qn(e){return e[2]<e[0]||e[3]<e[1]}function $0(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function Z0(e,t,i){let n=!1;const s=Xh(e,t),r=Xh(e,i);if(s===Ut.INTERSECTING||r===Ut.INTERSECTING)n=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],h=t[0],u=t[1],d=i[0],f=i[1],g=(f-u)/(d-h);let p,m;r&Ut.ABOVE&&!(s&Ut.ABOVE)&&(p=d-(f-c)/g,n=p>=o&&p<=l),!n&&r&Ut.RIGHT&&!(s&Ut.RIGHT)&&(m=f-(d-l)*g,n=m>=a&&m<=c),!n&&r&Ut.BELOW&&!(s&Ut.BELOW)&&(p=d-(f-a)/g,n=p>=o&&p<=l),!n&&r&Ut.LEFT&&!(s&Ut.LEFT)&&(m=f-(d-o)*g,n=m>=a&&m<=c)}return n}function q0(e,t){const i=t.getExtent(),n=Di(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const s=pt(i),o=Math.floor((n[0]-i[0])/s)*s;e[0]-=o,e[2]-=o}return e}function cg(e,t,i){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];q0(e,t);const s=pt(n);if(pt(e)>s,e[0]<n[0])return[[e[0]+s,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-s,e[3]]]}return[e]}function Ft(e,t,i){return Math.min(Math.max(e,t),i)}function J0(e,t,i,n,s,r){const o=s-i,a=r-n;if(o!==0||a!==0){const l=((e-i)*o+(t-n)*a)/(o*o+a*a);l>1?(i=s,n=r):l>0&&(i+=o*l,n+=a*l)}return kn(e,t,i,n)}function kn(e,t,i,n){const s=i-e,r=n-t;return s*s+r*r}function Q0(e){const t=e.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(e[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(e[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=e[s];e[s]=e[n],e[n]=o;for(let a=n+1;a<t;a++){const l=-e[a][n]/e[n][n];for(let c=n;c<t+1;c++)n==c?e[a][c]=0:e[a][c]+=l*e[n][c]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let s=n-1;s>=0;s--)e[s][t]-=e[s][n]*i[n]}return i}function Gh(e){return e*180/Math.PI}function Li(e){return e*Math.PI/180}function Fn(e,t){const i=e%t;return i*t<0?i+t:i}function ty(e,t,i){return e+i*(t-e)}function hg(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function Sr(e,t){return Math.floor(hg(e,t))}function Si(e,t){return Math.ceil(hg(e,t))}function yl(e,t,i){if(e>=t&&e<i)return e;const n=i-t;return((e-t)%n+n)%n+t}function ey(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function vo(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function dc(e,t){const i=Math.cos(t),n=Math.sin(t),s=e[0]*i-e[1]*n,r=e[1]*i+e[0]*n;return e[0]=s,e[1]=r,e}function iy(e,t){return e[0]*=t,e[1]*=t,e}function ny(e,t){if(t.canWrapX()){const i=pt(t.getExtent()),n=sy(e,t,i);n&&(e[0]-=n*i)}return e}function sy(e,t,i){const n=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||pt(n),s=Math.floor((e[0]-n[0])/i)),s}const ry=63710088e-1;function Yh(e,t,i){i=i||ry;const n=Li(e[1]),s=Li(t[1]),r=(s-n)/2,o=Li(t[0]-e[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const wo=.9996,Se=.00669438,ra=Se*Se,oa=ra*Se,Ji=Se/(1-Se),Kh=Math.sqrt(1-Se),Vn=(1-Kh)/(1+Kh),ug=Vn*Vn,fc=ug*Vn,gc=fc*Vn,dg=gc*Vn,fg=1-Se/4-3*ra/64-5*oa/256,oy=3*Se/8+3*ra/32+45*oa/1024,ay=15*ra/256+45*oa/1024,ly=35*oa/3072,cy=3/2*Vn-27/32*fc+269/512*dg,hy=21/16*ug-55/32*gc,uy=151/96*fc-417/128*dg,dy=1097/512*gc,To=6378137;function fy(e,t,i){const n=e-5e5,o=(i.north?t:t-1e7)/wo/(To*fg),a=o+cy*Math.sin(2*o)+hy*Math.sin(4*o)+uy*Math.sin(6*o)+dy*Math.sin(8*o),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,d=u*u,f=d*d,g=1-Se*c,p=Math.sqrt(1-Se*c),m=To/p,_=(1-Se)/g,y=Ji*h**2,w=y*y,b=n/(m*wo),E=b*b,R=E*b,S=R*b,T=S*b,A=T*b,I=a-u/_*(E/2-S/24*(5+3*d+10*y-4*w-9*Ji))+A/720*(61+90*d+298*y+45*f-252*Ji-3*w);let k=(b-R/6*(1+2*d+y)+T/120*(5-2*y+28*d-3*w+8*Ji+24*f))/h;return k=yl(k+Li(gg(i.number)),-Math.PI,Math.PI),[Gh(k),Gh(I)]}const $h=-80,Zh=84,gy=-180,py=180;function my(e,t,i){e=yl(e,gy,py),t<$h?t=$h:t>Zh&&(t=Zh);const n=Li(t),s=Math.sin(n),r=Math.cos(n),o=s/r,a=o*o,l=a*a,c=Li(e),h=gg(i.number),u=Li(h),d=To/Math.sqrt(1-Se*s**2),f=Ji*r**2,g=r*yl(c-u,-Math.PI,Math.PI),p=g*g,m=p*g,_=m*g,y=_*g,w=y*g,b=To*(fg*n-oy*Math.sin(2*n)+ay*Math.sin(4*n)-ly*Math.sin(6*n)),E=wo*d*(g+m/6*(1-a+f)+y/120*(5-18*a+l+72*f-58*Ji))+5e5;let R=wo*(b+d*o*(p/2+_/24*(5-a+9*f+4*f**2)+w/720*(61-58*a+l+600*f-330*Ji)));return i.north||(R+=1e7),[E,R]}function gg(e){return(e-1)*6-180+3}const _y=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function pg(e){let t=0;for(const s of _y){const r=e.match(s);if(r){t=parseInt(r[1]);break}}if(!t)return null;let i=0,n=!1;return t>32700&&t<32761?i=t-32700:t>32600&&t<32661&&(n=!0,i=t-32600),i?{number:i,north:n}:null}function qh(e,t){return function(i,n,s,r){const o=i.length;s=s>1?s:2,r=r??s,n||(s>2?n=i.slice():n=new Array(o));for(let a=0;a<o;a+=r){const l=i[a],c=i[a+1],h=e(l,c,t);n[a]=h[0],n[a+1]=h[1]}return n}}function yy(e){return pg(e)?new uc({code:e,units:"m"}):null}function xy(e){const t=pg(e.getCode());return t?{forward:qh(my,t),inverse:qh(fy,t)}:null}function mg(...e){console.warn(...e)}const by=[xy],Ey=[yy];let xl=!0;function vy(e){xl=!1}function pc(e,t){if(t!==void 0){for(let i=0,n=e.length;i<n;++i)t[i]=e[i];t=t}else t=e.slice();return t}function bl(e){H0(e.getCode(),e),Gs(e,e,pc)}function wy(e){e.forEach(bl)}function pe(e){if(typeof e!="string")return e;const t=W0(e);if(t)return t;for(const i of Ey){const n=i(e);if(n)return n}return null}function Jh(e,t,i,n){e=pe(e);let s;const r=e.getPointResolutionFunc();if(r)s=r(t,i);else{const o=e.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=_c(e,pe("EPSG:4326"));if(!a&&o!=="degrees")s=t*e.getMetersPerUnit();else{let c=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];c=a(c,c,2);const h=Yh(c.slice(0,2),c.slice(2,4)),u=Yh(c.slice(4,6),c.slice(6,8));s=(h+u)/2}const l=e.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Qh(e){wy(e),e.forEach(function(t){e.forEach(function(i){t!==i&&Gs(t,i,pc)})})}function Ty(e,t,i,n){e.forEach(function(s){t.forEach(function(r){Gs(s,r,i),Gs(r,s,n)})})}function mc(e,t){return e?typeof e=="string"?pe(e):e:pe(t)}function Ry(e){return function(t,i,n,s){const r=t.length;n=n!==void 0?n:2,s=s??n,i=i!==void 0?i:new Array(r);for(let o=0;o<r;o+=s){const a=e(t.slice(o,o+n)),l=a.length;for(let c=0,h=s;c<h;++c)i[o+c]=c>=l?t[o+c]:a[c]}return i}}function Os(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||_c(e,t)===pc)&&i}function _c(e,t){const i=e.getCode(),n=t.getCode();let s=Ma(i,n);if(s)return s;let r=null,o=null;for(const l of by)r||(r=l(e)),o||(o=l(t));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)s=Sa(r.inverse,o.forward);else{const l=Ma(i,a);l&&(s=Sa(l,o.forward))}else{const l=Ma(a,n);l&&(s=Sa(r.inverse,l))}return s&&(bl(e),bl(t),Gs(e,t,s)),s}function Sa(e,t){return function(i,n,s,r){return n=e(i,n,s,r),t(n,n,s,r)}}function Ro(e,t){const i=pe(e),n=pe(t);return _c(i,n)}function _g(e,t,i){const n=Ro(t,i);if(!n){const s=pe(t).getCode(),r=pe(i).getCode();throw new Error(`No transform available between ${s} and ${r}`)}return n(e,void 0,e.length)}function El(e,t){return e}function ii(e,t){return xl&&!vo(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(xl=!1,mg("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function Cy(e,t){return e}function hi(e,t){return e}function My(){Qh(Wh),Qh(Uh),Ty(Uh,Wh,N0,z0)}My();function Rt(e,t){if(!e)throw new Error(t)}function tu(e,t,i){return function(n,s,r,o,a){if(!n)return;if(!s&&!t)return n;const l=t?0:r[0]*s,c=t?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let d=e[0]+l/2+h,f=e[2]-l/2+h,g=e[1]+c/2+u,p=e[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=Ft(n[0],d,f),_=Ft(n[1],g,p);if(o&&i&&s){const y=30*s;m+=-y*Math.log(1+Math.max(0,d-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-f)/y),_+=-y*Math.log(1+Math.max(0,g-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-p)/y)}return[m,_]}}function Sy(e){return e}function yc(e,t,i,n){const s=pt(t)/i[0],r=Bt(t)/i[1];return n?Math.min(e,Math.max(s,r)):Math.min(e,Math.min(s,r))}function xc(e,t,i){let n=Math.min(e,t);const s=50;return n*=Math.log(1+s*Math.max(0,e/t-1))/s+1,i&&(n=Math.max(n,i),n/=Math.log(1+s*Math.max(0,i/e-1))/s+1),Ft(n,i/2,t*2)}function Iy(e,t,i,n){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=e[0],c=e[e.length-1],h=i?yc(l,i,o,n):l;if(a)return t?xc(s,h,c):Ft(s,c,h);const u=Math.min(h,s),d=Math.floor(Zo(e,u,r));return e[d]>h&&d<e.length-1?e[d+1]:e[d]}}}function Ay(e,t,i,n,s,r){return n=n!==void 0?n:!0,i=i!==void 0?i:0,function(o,a,l,c){if(o!==void 0){const h=s?yc(t,s,l,r):t;if(c)return n?xc(o,h,i):Ft(o,i,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(e)-u),f=-a*(.5-u)+.5,g=Math.min(h,o),p=Math.floor(Math.log(t/g)/Math.log(e)+f),m=Math.max(d,p),_=t/Math.pow(e,m);return Ft(_,i,h)}}}function eu(e,t,i,n,s){return i=i!==void 0?i:!0,function(r,o,a,l){if(r!==void 0){const c=n?yc(e,n,a,s):e;return!i||!l?Ft(r,t,c):xc(r,c,t)}}}function bc(e){if(e!==void 0)return 0}function iu(e){if(e!==void 0)return e}function Py(e){const t=2*Math.PI/e;return function(i,n){if(n)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i}}function Ly(e){const t=Li(5);return function(i,n){return n||i===void 0?i:Math.abs(i)<=t?0:i}}function yg(e){return Math.pow(e,3)}function Jn(e){return 1-yg(1-e)}function Oy(e){return 3*e*e-2*e*e*e}function Dy(e){return e}new Array(6);function Nn(){return[1,0,0,1,0,0]}function he(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function Xn(e,t,i,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return e[0]=n*c,e[1]=s*l,e[2]=-n*l,e[3]=s*c,e[4]=o*n*c-a*n*l+t,e[5]=o*s*l+a*s*c+i,e}function xg(e,t){const i=ky(t);Rt(i!==0,"Transformation matrix cannot be inverted");const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/i,e[1]=-s/i,e[2]=-r/i,e[3]=n/i,e[4]=(r*l-o*a)/i,e[5]=-(n*l-s*a)/i,e}function ky(e){return e[0]*e[3]-e[1]*e[2]}const nu=[1e6,1e6,1e6,1e6,2,2];function Fy(e){return"matrix("+e.map((i,n)=>Math.round(i*nu[n])/nu[n]).join(", ")+")"}function Ny(e,t,i,n,s,r,o){r=r||[],o=o||2;let a=0;for(let l=t;l<i;l+=n){const c=e[l],h=e[l+1];r[a++]=s[0]*c+s[2]*h+s[4],r[a++]=s[1]*c+s[3]*h+s[5];for(let u=2;u<o;u++)r[a++]=e[l+u]}return r&&r.length!=a&&(r.length=a),r}function zy(e,t,i,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let d=t;d<i;d+=n){const f=e[d]-c,g=e[d+1]-h;o[u++]=c+f*a-g*l,o[u++]=h+f*l+g*a;for(let p=d+2;p<d+n;++p)o[u++]=e[p]}return o&&o.length!=u&&(o.length=u),o}function By(e,t,i,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<i;u+=n){const d=e[u]-l,f=e[u+1]-c;a[h++]=l+s*d,a[h++]=c+r*f;for(let g=u+2;g<u+n;++g)a[h++]=e[g]}return a&&a.length!=h&&(a.length=h),a}function jy(e,t,i,n,s,r,o){o=o||[];let a=0;for(let l=t;l<i;l+=n){o[a++]=e[l]+s,o[a++]=e[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const su=Nn();class Wy extends pi{constructor(){super(),this.extent_=Bi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=P0((t,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return gt()}closestPointXY(t,i,n,s){return gt()}containsXY(t,i){const n=this.getClosestPoint([t,i]);return n[0]===t&&n[1]===i}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return gt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&ea(i),this.extentRevision_=this.getRevision()}return $0(this.extent_,t)}rotate(t,i){gt()}scale(t,i,n){gt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return gt()}getType(){return gt()}applyTransform(t){gt()}intersectsExtent(t){return gt()}translate(t,i){gt()}transform(t,i){const n=pe(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=Bt(c)/Bt(l);Xn(su,c[0],c[3],h,-h,0,0,0);const u=Ny(r,0,r.length,a,su,o),d=Ro(n,i);return d?d(u,u,a):u}:Ro(n,i);return this.applyTransform(s),this}}class Ec extends Wy{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return X0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return gt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=ru(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){gt()}setLayout(t,i,n){let s;if(t)s=ru(t);else{for(let r=0;r<n;++r){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}s=i.length,t=Hy(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();zy(n,0,n.length,s,t,i,n),this.changed()}}scale(t,i,n){i===void 0&&(i=t),n||(n=Di(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();By(s,0,s.length,r,t,i,n,s),this.changed()}}translate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();jy(n,0,n.length,s,t,i,n),this.changed()}}}function Hy(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function ru(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function ou(e,t,i,n,s,r,o){const a=e[t],l=e[t+1],c=e[i]-a,h=e[i+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((s-a)*c+(r-l)*h)/(c*c+h*h);if(d>1)u=i;else if(d>0){for(let f=0;f<n;++f)o[f]=ty(e[t+f],e[i+f],d);o.length=n;return}else u=t}for(let d=0;d<n;++d)o[d]=e[u+d];o.length=n}function bg(e,t,i,n,s){let r=e[t],o=e[t+1];for(t+=n;t<i;t+=n){const a=e[t],l=e[t+1],c=kn(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function Uy(e,t,i,n,s){for(let r=0,o=i.length;r<o;++r){const a=i[r];s=bg(e,t,a,n,s),t=a}return s}function Eg(e,t,i,n,s,r,o,a,l,c,h){if(t==i)return c;let u,d;if(s===0){if(d=kn(o,a,e[t],e[t+1]),d<c){for(u=0;u<n;++u)l[u]=e[t+u];return l.length=n,d}return c}h=h||[NaN,NaN];let f=t+n;for(;f<i;)if(ou(e,f-n,f,n,o,a,h),d=kn(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(ou(e,i-n,t,n,o,a,h),d=kn(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function Vy(e,t,i,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const f=i[u];c=Eg(e,t,f,n,s,r,o,a,l,c,h),t=f}return c}function Xy(e,t,i,n){for(let s=0,r=i.length;s<r;++s)e[t++]=i[s];return t}function vg(e,t,i,n){for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0;a<n;++a)e[t++]=o[a]}return t}function Gy(e,t,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=vg(e,t,i[o],n);s[r++]=l,t=l}return s.length=r,s}function Yy(e,t,i,n,s,r,o){const a=(i-t)/n;if(a<3){for(;t<i;t+=n)r[o++]=e[t],r[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,i-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const g=e[d],p=e[d+1],m=e[u],_=e[u+1];for(let y=d+n;y<u;y+=n){const w=e[y],b=e[y+1],E=J0(w,b,g,p,m,_);E>f&&(h=y,f=E)}f>s&&(l[(h-t)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=e[t+u*n],r[o++]=e[t+u*n+1]);return o}function mn(e,t){return t*Math.round(e/t)}function Ky(e,t,i,n,s,r,o){if(t==i)return o;let a=mn(e[t],s),l=mn(e[t+1],s);t+=n,r[o++]=a,r[o++]=l;let c,h;do if(c=mn(e[t],s),h=mn(e[t+1],s),t+=n,t==i)return r[o++]=c,r[o++]=h,o;while(c==a&&h==l);for(;t<i;){const u=mn(e[t],s),d=mn(e[t+1],s);if(t+=n,u==c&&d==h)continue;const f=c-a,g=h-l,p=u-a,m=d-l;if(f*m==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=u,h=d;continue}r[o++]=c,r[o++]=h,a=c,l=h,c=u,h=d}return r[o++]=c,r[o++]=h,o}function $y(e,t,i,n,s,r,o,a){for(let l=0,c=i.length;l<c;++l){const h=i[l];o=Ky(e,t,h,n,s,r,o),a.push(o),t=h}return o}function wg(e,t,i,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<i;o+=n)s[r++]=e.slice(o,o+n);return s.length=r,s}function Zy(e,t,i,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o];s[r++]=wg(e,t,l,n,s[r]),t=l}return s.length=r,s}function Tg(e,t,i,n){let s=0;const r=e[i-n],o=e[i-n+1];let a=0,l=0;for(;t<i;t+=n){const c=e[t]-r,h=e[t+1]-o;s+=l*c-a*h,a=c,l=h}return s/2}function qy(e,t,i,n){let s=0;for(let r=0,o=i.length;r<o;++r){const a=i[r];s+=Tg(e,t,a,n),t=a}return s}class Ks extends Ec{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new Ks(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,n,s){return s<sg(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,s))}getArea(){return Tg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const i=[];return i.length=Yy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new Ks(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vg(this.flatCoordinates,0,t,this.stride),this.changed()}}class vc extends Ec{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){const t=new vc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,s){const r=this.flatCoordinates,o=kn(t,i,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return V0(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return rg(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xy(this.flatCoordinates,0,t,this.stride),this.changed()}}function Jy(e,t,i,n,s){return!lg(s,function(o){return!Qi(e,t,i,n,o[0],o[1])})}function Qi(e,t,i,n,s,r){let o=0,a=e[i-n],l=e[i-n+1];for(;t<i;t+=n){const c=e[t],h=e[t+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function Rg(e,t,i,n,s,r){if(i.length===0||!Qi(e,t,i[0],n,s,r))return!1;for(let o=1,a=i.length;o<a;++o)if(Qi(e,i[o-1],i[o],n,s,r))return!1;return!0}function Qy(e,t,i,n,s,r,o){let a,l,c,h,u,d,f;const g=s[r+1],p=[];for(let y=0,w=i.length;y<w;++y){const b=i[y];for(h=e[b-n],d=e[b-n+1],a=t;a<b;a+=n)u=e[a],f=e[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(u-h)+h,p.push(c)),h=u,d=f}let m=NaN,_=-1/0;for(p.sort(lc),h=p[0],a=1,l=p.length;a<l;++a){u=p[a];const y=Math.abs(u-h);y>_&&(c=(h+u)/2,Rg(e,t,i,n,c,g)&&(m=c,_=y)),h=u}return isNaN(m)&&(m=s[r]),[m,g,_]}function tx(e,t,i,n,s){let r;for(t+=n;t<i;t+=n)if(r=s(e.slice(t-n,t),e.slice(t,t+n)),r)return r;return!1}function Cg(e,t,i,n,s){const r=ag(Bi(),e,t,i,n);return un(s,r)?xo(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:tx(e,t,i,n,function(o,a){return Z0(s,o,a)}):!1}function Mg(e,t,i,n,s){return!!(Cg(e,t,i,n,s)||Qi(e,t,i,n,s[0],s[1])||Qi(e,t,i,n,s[0],s[3])||Qi(e,t,i,n,s[2],s[1])||Qi(e,t,i,n,s[2],s[3]))}function ex(e,t,i,n,s){if(!Mg(e,t,i[0],n,s))return!1;if(i.length===1)return!0;for(let r=1,o=i.length;r<o;++r)if(Jy(e,i[r-1],i[r],n,s)&&!Cg(e,i[r-1],i[r],n,s))return!1;return!0}function ix(e,t,i,n){for(;t<i-n;){for(let s=0;s<n;++s){const r=e[t+s];e[t+s]=e[i-n+s],e[i-n+s]=r}t+=n,i-=n}}function Sg(e,t,i,n){let s=0,r=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const a=e[t],l=e[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function nx(e,t,i,n,s){s=s!==void 0?s:!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=Sg(e,t,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function au(e,t,i,n,s){s=s!==void 0?s:!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=Sg(e,t,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&ix(e,t,a,n),t=a}return t}class $s extends Ec{constructor(t,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,t),this.ends_=n):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?I0(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new $s(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,s){return s<sg(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Uy(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vy(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,s))}containsXY(t,i){return Rg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return qy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),au(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,Zy(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Di(this.getExtent());this.flatInteriorPoint_=Qy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vc(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ks(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,i=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Ks(i.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;nx(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=au(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=$y(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new $s(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return ex(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Gy(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function lu(e){if(qn(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],i=e[1],n=e[2],s=e[3],r=[t,i,t,s,n,s,n,i,t,i];return new $s(r,"XY",[r.length])}const Ia=0;class Ke extends pi{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=mc(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&vy(),t.center&&(t.center=ii(t.center,this.projection_)),t.extent&&(t.extent=hi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const i=Object.assign({},t);for(const a in Le)delete i[a];this.setProperties(i,!0);const n=rx(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=sx(t),r=n.constraint,o=ox(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];i=i||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-i[3]+i[1]-s[1]),a=r/2*(s[0]-i[0]+i[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let n=0;n<i.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=ii(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ii(s.anchor,this.getProjection())),i[n]=s}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===i){n&&Ir(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<i;++s){const h=arguments[s],u={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Oy,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=Fn(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}ax(u)?u.complete=!0:r+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(ce.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ce.ANIMATING]>0}getInteracting(){return this.hints_[ce.INTERACTING]>0}cancelAnimations(){this.setHint(ce.ANIMATING,-this.hints_[ce.ANIMATING]);let t;for(let i=0,n=this.animations_.length;i<n;++i){const s=this.animations_[i];if(s[0].callback&&Ir(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let i=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(g-d),_=f+u*(p-f);this.targetCenter_=[m,_]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?Fn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),i=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(ce.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Ir(o,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-i[0],s[1]-i[1]],dc(n,t-this.getRotation()),ey(n,i)),n}calculateCenterZoom(t,i){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=i[0]-t*(i[0]-s[0])/r,a=i[1]-t*(i[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(t){const i=this.viewportSize_;if(t){const n=i[0],s=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&El(t,this.getProjection())}getCenterInternal(){return this.get(Le.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const i=this.calculateExtentInternal(t);return Cy(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();Rt(i,"The view center is not defined");const n=this.getResolution();Rt(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return Rt(s!==void 0,"The view rotation is not defined"),Eo(i,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Le.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(hi(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();const n=pt(t)/i[0],s=Bt(t)/i[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/Math.log(t);return function(r){return i/Math.pow(t,r*s)}}getRotation(){return this.get(Le.ROTATION)}getValueForResolutionFunction(t){const i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/i;return function(o){return Math.log(n/o)/i/r}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t);const n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i}getState(){const t=this.getProjection(),i=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Aa(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],i,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,n,s;if(this.resolutions_){const r=Zo(this.resolutions_,t,1);i=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return i+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){var i;if((i=this.resolutions_)!=null&&i.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ft(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ft(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let n;if(Rt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Rt(!qn(t),"Cannot fit empty extent provided as `geometry`");const s=hi(t,this.getProjection());n=lu(s)}else if(t.getType()==="Circle"){const s=hi(t.getExtent(),this.getProjection());n=lu(s),n.rotate(this.getRotation(),Di(s))}else n=t;this.fitInternal(n,i)}rotatedExtentForGeometry(t){const i=this.getRotation(),n=Math.cos(i),s=Math.sin(-i),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=r.length;u<d;u+=o){const f=r[u]*n-r[u+1]*s,g=r[u]*s+r[u+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(t,i){i=i||{};let n=i.size;n||(n=this.getViewportSizeMinusPadding_());const s=i.padding!==void 0?i.padding:[0,0,0,0],r=i.nearest!==void 0?i.nearest:!1;let o;i.minResolution!==void 0?o=i.minResolution:i.maxZoom!==void 0?o=this.getResolutionForZoom(i.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=Di(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*u-d[1]*h,g=d[1]*u+d[0]*h,p=this.getConstrainedCenter([f,g],l),m=i.callback?i.callback:_o;i.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:i.duration,easing:i.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),Ir(m,!0))}centerOn(t,i,n){this.centerOnInternal(ii(t,this.getProjection()),i,n)}centerOnInternal(t,i,n){this.setCenterInternal(Aa(t,i,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,n,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=Aa(t,s,[a[0]/2+o[3],a[1]/2+o[0]],i,n);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const i=El(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){const i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&ii(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);i&&(this.targetCenter_=this.calculateCenterZoom(r,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=ii(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(s,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ii(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){const n=this.getAnimating()||this.getInteracting()||i,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Le.ROTATION)!==s&&this.set(Le.ROTATION,s),this.get(Le.RESOLUTION)!==o&&(this.set(Le.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Le.CENTER)||!vo(this.get(Le.CENTER),a))&&this.set(Le.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,n){t=t!==void 0?t:200;const s=i||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!vo(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:Jn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ce.INTERACTING,1)}endInteraction(t,i,n){n=n&&ii(n,this.getProjection()),this.endInteractionInternal(t,i,n)}endInteractionInternal(t,i,n){this.getInteracting()&&(this.setHint(ce.INTERACTING,-1),this.resolveConstraints(t,i,n))}getConstrainedCenter(t,i){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)}getConstrainedZoom(t,i){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))}getConstrainedResolution(t,i){i=i||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)}}function Ir(e,t){setTimeout(function(){e(t)},0)}function sx(e){if(e.extent!==void 0){const i=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return tu(e.extent,e.constrainOnlyCenter,i)}const t=mc(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,tu(i,!1,!1)}return Sy}function rx(e){let t,i,n,o=e.minZoom!==void 0?e.minZoom:Ia,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,h=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,u=e.showFullExtent!==void 0?e.showFullExtent:!1,d=mc(e.projection,"EPSG:3857"),f=d.getExtent();let g=e.constrainOnlyCenter,p=e.extent;if(!c&&!p&&d.isGlobal()&&(g=!1,p=f),e.resolutions!==void 0){const m=e.resolutions;i=m[o],n=m[a]!==void 0?m[a]:m[m.length-1],e.constrainResolution?t=Iy(m,h,!g&&p,u):t=eu(i,n,h,!g&&p,u)}else{const _=(f?Math.max(pt(f),Bt(f)):360*hc.degrees/d.getMetersPerUnit())/cc/Math.pow(2,Ia),y=_/Math.pow(2,28-Ia);i=e.maxResolution,i!==void 0?o=0:i=_/Math.pow(l,o),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=i/Math.pow(l,a):n=_/Math.pow(l,a):n=y),a=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,a-o),e.constrainResolution?t=Ay(l,i,n,h,!g&&p,u):t=eu(i,n,h,!g&&p,u)}return{constraint:t,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}function ox(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const i=e.constrainRotation;return i===void 0||i===!0?Ly():i===!1?iu:typeof i=="number"?Py(i):iu}return bc}function ax(e){return!(e.sourceCenter&&e.targetCenter&&!vo(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Aa(e,t,i,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=e[0]*r-e[1]*o,l=e[1]*r+e[0]*o;a+=(t[0]/2-i[0])*n,l+=(i[1]-t[1]/2)*n,o=-o;const c=a*r-l*o,h=l*r+a*o;return[c,h]}const Re={ADD:"add",REMOVE:"remove"},cu={LENGTH:"length"};class Ar extends gi{constructor(t,i,n){super(t),this.element=i,this.index=n}}class ui extends pi{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,n=t.length;i<n;++i)this.push(t[i]);return this}forEach(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)t(i[n],n,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(cu.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new Ar(Re.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)if(i[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ar(Re.REMOVE,i,t)),i}setAt(t,i){const n=this.getLength();if(t>=n){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);const s=this.array_[t];this.array_[t]=i,this.dispatchEvent(new Ar(Re.REMOVE,s,t)),this.dispatchEvent(new Ar(Re.ADD,i,t))}updateLength_(){this.set(cu.LENGTH,this.array_.length)}assertUnique_(t,i){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===t&&n!==i)throw new Error("Duplicate item added to a unique collection")}}const wt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Ig extends pi{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[wt.OPACITY]=t.opacity!==void 0?t.opacity:1,Rt(typeof i[wt.OPACITY]=="number","Layer opacity must be a number"),i[wt.VISIBLE]=t.visible!==void 0?t.visible:!0,i[wt.Z_INDEX]=t.zIndex,i[wt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[wt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[wt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[wt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Ft(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return gt()}getLayerStatesArray(t){return gt()}getExtent(){return this.get(wt.EXTENT)}getMaxResolution(){return this.get(wt.MAX_RESOLUTION)}getMinResolution(){return this.get(wt.MIN_RESOLUTION)}getMinZoom(){return this.get(wt.MIN_ZOOM)}getMaxZoom(){return this.get(wt.MAX_ZOOM)}getOpacity(){return this.get(wt.OPACITY)}getSourceState(){return gt()}getVisible(){return this.get(wt.VISIBLE)}getZIndex(){return this.get(wt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(wt.EXTENT,t)}setMaxResolution(t){this.set(wt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(wt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(wt.MAX_ZOOM,t)}setMinZoom(t){this.set(wt.MIN_ZOOM,t)}setOpacity(t){Rt(typeof t=="number","Layer opacity must be a number"),this.set(wt.OPACITY,t)}setVisible(t){this.set(wt.VISIBLE,t)}setZIndex(t){this.set(wt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const $e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class mr extends Ig{constructor(t){const i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(wt.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(wt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=yt(t,it.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof Ke?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(i.layerStatesArray){if(s=i.layerStatesArray.find(o=>o.layer===this),!s)return!1}else s=this.getLayerState();const r=this.getExtent();return wc(s,i.viewState)&&(!r||un(r,i.extent))}getAttributions(t){var r;if(!this.isVisible(t))return[];const i=(r=this.getSource())==null?void 0:r.getAttributions();if(!i)return[];const n=t instanceof Ke?t.getViewStateAndExtent():t;let s=i(n);return Array.isArray(s)||(s=[s]),s}render(t,i){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,i){}renderDeferred(t){const i=this.getRenderer();i&&i.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(wt.MAP,t)}getMapInternal(){return this.get(wt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=yt(t,$e.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=yt(this,it.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const i=t.frameState.layerStatesArray,n=this.getLayerState(!1);Rt(!i.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(t){this.set(wt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function wc(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}function Ag(e,t,i=0,n=e.length-1,s=lx){for(;n>i;){if(n-i>600){const l=n-i+1,c=t-i+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),f=Math.max(i,Math.floor(t-c*u/l+d)),g=Math.min(n,Math.floor(t+(l-c)*u/l+d));Ag(e,t,f,g,s)}const r=e[t];let o=i,a=n;for(rs(e,i,t),s(e[n],r)>0&&rs(e,i,n);o<a;){for(rs(e,o,a),o++,a--;s(e[o],r)<0;)o++;for(;s(e[a],r)>0;)a--}s(e[i],r)===0?rs(e,i,a):(a++,rs(e,a,n)),a<=t&&(i=a+1),t<=a&&(n=a-1)}}function rs(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function lx(e,t){return e<t?-1:e>t?1:0}class cx{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data;const n=[];if(!Lr(t,i))return n;const s=this.toBBox,r=[];for(;i;){for(let o=0;o<i.children.length;o++){const a=i.children[o],l=i.leaf?s(a):a;Lr(t,l)&&(i.leaf?n.push(a):La(t,l)?this._all(a,n):r.push(a))}i=r.pop()}return n}collides(t){let i=this.data;if(!Lr(t,i))return!1;const n=[];for(;i;){for(let s=0;s<i.children.length;s++){const r=i.children[s],o=i.leaf?this.toBBox(r):r;if(Lr(t,o)){if(i.leaf||La(t,o))return!0;n.push(r)}}i=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Cn([]),this}remove(t,i){if(!t)return this;let n=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,c;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),n.leaf){const h=hx(t,n.children,i);if(h!==-1)return n.children.splice(h,1),r.push(n),this._condense(r),this}!c&&!n.leaf&&La(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){const n=[];for(;t;)t.leaf?i.push(...t.children):n.push(...t.children),t=n.pop();return i}_build(t,i,n,s){const r=n-i+1;let o=this._maxEntries,a;if(r<=o)return a=Cn(t.slice(i,n+1)),_n(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Cn([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));hu(t,i,n,c,this.compareMinX);for(let h=i;h<=n;h+=c){const u=Math.min(h+c-1,n);hu(t,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(t,d,f,s-1))}}return _n(a,this.toBBox),a}_chooseSubtree(t,i,n,s){for(;s.push(i),!(i.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<i.children.length;l++){const c=i.children[l],h=Pa(c),u=fx(t,c)-h;u<o?(o=u,r=h<r?h:r,a=c):u===o&&h<r&&(r=h,a=c)}i=a||i.children[0]}return i}_insert(t,i,n){const s=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,i,r);for(o.children.push(t),ms(o,s);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(s,r,i)}_split(t,i){const n=t[i],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=Cn(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,_n(n,this.toBBox),_n(a,this.toBBox),i?t[i-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,i){this.data=Cn([t,i]),this.data.height=t.height+1,this.data.leaf=!1,_n(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let s,r=1/0,o=1/0;for(let a=i;a<=n-i;a++){const l=ps(t,0,a,this.toBBox),c=ps(t,a,n,this.toBBox),h=gx(l,c),u=Pa(l)+Pa(c);h<r?(r=h,s=a,o=u<o?u:o):h===r&&u<o&&(o=u,s=a)}return s||n-i}_chooseSplitAxis(t,i,n){const s=t.leaf?this.compareMinX:ux,r=t.leaf?this.compareMinY:dx,o=this._allDistMargin(t,i,n,s),a=this._allDistMargin(t,i,n,r);o<a&&t.children.sort(s)}_allDistMargin(t,i,n,s){t.children.sort(s);const r=this.toBBox,o=ps(t,0,i,r),a=ps(t,n-i,n,r);let l=Pr(o)+Pr(a);for(let c=i;c<n-i;c++){const h=t.children[c];ms(o,t.leaf?r(h):h),l+=Pr(o)}for(let c=n-i-1;c>=i;c--){const h=t.children[c];ms(a,t.leaf?r(h):h),l+=Pr(a)}return l}_adjustParentBBoxes(t,i,n){for(let s=n;s>=0;s--)ms(i[s],t)}_condense(t){for(let i=t.length-1,n;i>=0;i--)t[i].children.length===0?i>0?(n=t[i-1].children,n.splice(n.indexOf(t[i]),1)):this.clear():_n(t[i],this.toBBox)}}function hx(e,t,i){if(!i)return t.indexOf(e);for(let n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function _n(e,t){ps(e,0,e.children.length,t,e)}function ps(e,t,i,n,s){s||(s=Cn(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<i;r++){const o=e.children[r];ms(s,e.leaf?n(o):o)}return s}function ms(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ux(e,t){return e.minX-t.minX}function dx(e,t){return e.minY-t.minY}function Pa(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Pr(e){return e.maxX-e.minX+(e.maxY-e.minY)}function fx(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function gx(e,t){const i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,r-n)}function La(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Lr(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Cn(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hu(e,t,i,n,s){const r=[t,i];for(;r.length;){if(i=r.pop(),t=r.pop(),i-t<=n)continue;const o=t+Math.ceil((i-t)/n/2)*n;Ag(e,o,t,i,s),r.push(t,o,o,i)}}const $={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Zs={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Vt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Vt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Vt.max=Vt.whitepoint[2].D65;Vt.rgb=function(e,t){t=t||Vt.whitepoint[2].E;var i=e[0]/t[0],n=e[1]/t[1],s=e[2]/t[2],r,o,a;return r=i*3.240969941904521+n*-1.537383177570093+s*-.498610760293,o=i*-.96924363628087+n*1.87596750150772+s*.041555057407175,a=i*.055630079696993+n*-.20397695888897+s*1.056971514242878,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[r*255,o*255,a*255]};Zs.xyz=function(e,t){var i=e[0]/255,n=e[1]/255,s=e[2]/255;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var r=i*.41239079926595+n*.35758433938387+s*.18048078840183,o=i*.21263900587151+n*.71516867876775+s*.072192315360733,a=i*.019330818715591+n*.11919477979462+s*.95053215224966;return t=t||Vt.whitepoint[2].E,[r*t[0],o*t[1],a*t[2]]};const Tc={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,i){var n,s,r,o,a,l,c,h,u,d,f,g,p;if(r=e[0],o=e[1],a=e[2],r===0)return[0,0,0];var m=.0011070564598794539;return t=t||"D65",i=i||2,u=Vt.whitepoint[i][t][0],d=Vt.whitepoint[i][t][1],f=Vt.whitepoint[i][t][2],g=4*u/(u+15*d+3*f),p=9*d/(u+15*d+3*f),n=o/(13*r)+g||0,s=a/(13*r)+p||0,c=r>8?d*Math.pow((r+16)/116,3):d*r*m,l=c*9*n/(4*s)||0,h=c*(12-3*n-20*s)/(4*s)||0,[l,c,h]}};Vt.luv=function(e,t,i){var n,s,r,o,a,l,c,h,u,d,f,g,p,m=.008856451679035631,_=903.2962962962961;t=t||"D65",i=i||2,u=Vt.whitepoint[i][t][0],d=Vt.whitepoint[i][t][1],f=Vt.whitepoint[i][t][2],g=4*u/(u+15*d+3*f),p=9*d/(u+15*d+3*f),l=e[0],c=e[1],h=e[2],n=4*l/(l+15*c+3*h)||0,s=9*c/(l+15*c+3*h)||0;var y=c/d;return r=y<=m?_*y:116*Math.pow(y,1/3)-16,o=13*r*(n-g),a=13*r*(s-p),[r,o,a]};var Pg={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t=e[0],i=e[1],n=e[2],s,r,o;return o=n/360*2*Math.PI,s=i*Math.cos(o),r=i*Math.sin(o),[t,s,r]},xyz:function(e){return Tc.xyz(Pg.luv(e))}};Tc.lchuv=function(e){var t=e[0],i=e[1],n=e[2],s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i),o=r*360/2/Math.PI;return o<0&&(o+=360),[t,s,o]};Vt.lchuv=function(e){return Tc.lchuv(Vt.luv(e))};const uu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var du={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function px(e){var h,u;var t,i=[],n=1,s;if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(e=String(e).toLowerCase(),uu[e])i=uu[e].slice(),s="rgb";else if(e==="transparent")n=0,s="rgb",i=[0,0,0];else if(e[0]==="#"){var r=e.slice(1),o=r.length,a=o<=4;n=1,a?(i=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(n=parseInt(r[3]+r[3],16)/255)):(i=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(n=parseInt(r[6]+r[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),s="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(e)){var l=t[1];s=l.replace(/a$/,"");var c=s==="cmyk"?4:s==="gray"?1:3;i=t[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=i.shift()),i=i.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:s==="rgb"?d*255:s[0]==="h"||s[0]==="l"&&!f?d*100:s==="lab"?d*125:s==="lch"?f<2?d*150:d*360:s[0]==="o"&&!f?d:s==="oklab"?d*.4:s==="oklch"?f<2?d*.4:d*360:d;if(s[f]==="h"||f===2&&s[s.length-1]==="h"){if(du[d]!==void 0)return du[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),n=i.length>c?i.pop():1}else/[0-9](?:\s|\/|,)/.test(e)&&(i=e.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),s=((u=(h=e.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:u.toLowerCase())||"rgb");return{space:s,values:i,alpha:n}}const Oa={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,i=e[1]/100,n=e[2]/100,s,r,o,a,l,c=0;if(i===0)return l=n*255,[l,l,l];for(r=n<.5?n*(1+i):n+i-n*i,s=2*n-r,a=[0,0,0];c<3;)o=t+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?s+(r-s)*6*o:2*o<1?r:3*o<2?s+(r-s)*(2/3-o)*6:s,a[c++]=l*255;return a}};Zs.hsl=function(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255,s=Math.min(t,i,n),r=Math.max(t,i,n),o=r-s,a,l,c;return r===s?a=0:t===r?a=(i-n)/o:i===r?a=2+(n-t)/o:n===r&&(a=4+(t-i)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(s+r)/2,r===s?l=0:c<=.5?l=o/(r+s):l=o/(2-r-s),[a,l*100,c*100]};function mx(e){Array.isArray(e)&&e.raw&&(e=String.raw(...arguments)),e instanceof Number&&(e=+e);var t,i=px(e);if(!i.space)return[];const n=i.space[0]==="h"?Oa.min:Zs.min,s=i.space[0]==="h"?Oa.max:Zs.max;return t=Array(3),t[0]=Math.min(Math.max(i.values[0],n[0]),s[0]),t[1]=Math.min(Math.max(i.values[1],n[1]),s[1]),t[2]=Math.min(Math.max(i.values[2],n[2]),s[2]),i.space[0]==="h"&&(t=Oa.rgb(t)),t.push(Math.min(Math.max(i.alpha,0),1)),t}const Rc=[NaN,NaN,NaN,0];function _x(e){return typeof e=="string"?e:Mc(e)}const yx=1024,os={};let Da=0;function xx(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function fu(e){const t=Vt.lchuv(Zs.xyz(e));return t[3]=e[3],t}function bx(e){const t=Vt.rgb(Pg.xyz(e));return t[3]=e[3],t}function Cc(e){if(e==="none")return Rc;if(os.hasOwnProperty(e))return os[e];if(Da>=yx){let i=0;for(const n in os)i++&3||(delete os[n],--Da)}const t=mx(e);if(t.length!==4)throw new Error('failed to parse "'+e+'" as color');for(const i of t)if(isNaN(i))throw new Error('failed to parse "'+e+'" as color');return Lg(t),os[e]=t,++Da,t}function Gn(e){return Array.isArray(e)?e:Cc(e)}function Lg(e){return e[0]=Ft(e[0]+.5|0,0,255),e[1]=Ft(e[1]+.5|0,0,255),e[2]=Ft(e[2]+.5|0,0,255),e[3]=Ft(e[3],0,1),e}function Mc(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let n=e[2];n!=(n|0)&&(n=n+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+n+","+s+")"}const ki=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ex=ki.includes("firefox"),vx=ki.includes("safari")&&!ki.includes("chrom");vx&&(ki.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ki));const wx=ki.includes("webkit")&&!ki.includes("edge"),Og=ki.includes("macintosh"),Dg=typeof devicePixelRatio<"u"?devicePixelRatio:1,kg=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Sc=typeof Image<"u"&&Image.prototype.decode,Tx=typeof createImageBitmap=="function",Fg=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function re(e,t,i,n){let s;return i&&i.length?s=i.shift():kg?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",n)}let ka;function Co(){return ka||(ka=re(1,1)),ka}function Ic(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function gu(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function Rx(e){for(;e.lastChild;)e.lastChild.remove()}function Cx(e,t){const i=e.childNodes;for(let n=0;;++n){const s=i[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){e.appendChild(r);continue}if(!r){e.removeChild(s),--n;continue}e.insertBefore(r,s)}}}class Ac extends dr{constructor(t,i,n,s){super(),this.extent=t,this.pixelRatio_=n,this.resolution=i,this.state=typeof s=="function"?$.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(it.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==$.IDLE&&this.loader){this.state=$.LOADING,this.changed();const t=this.getResolution(),i=Array.isArray(t)?t[0]:t;ig(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=$.LOADED}).catch(n=>{this.state=$.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Mx(e,t,i){const n=e;let s=!0,r=!1,o=!1;const a=[yo(n,it.LOAD,function(){o=!0,r||t()})];return n.src&&Sc?(r=!0,n.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():i())})):a.push(yo(n,it.ERROR,i)),function(){s=!1,a.forEach(Lt)}}function Sx(e,t){return new Promise((i,n)=>{function s(){o(),i(e)}function r(){o(),n(new Error("Image load error"))}function o(){e.removeEventListener("load",s),e.removeEventListener("error",r)}e.addEventListener("load",s),e.addEventListener("error",r)})}function Ng(e,t){return t&&(e.src=t),e.src&&Sc?new Promise((i,n)=>e.decode().then(()=>i(e)).catch(s=>e.complete&&e.width?i(e):n(s))):Sx(e)}function zg(e,t){return t&&(e.src=t),e.src&&Sc&&Tx?e.decode().then(()=>createImageBitmap(e)).catch(i=>{if(e.complete&&e.width)return e;throw i}):Ng(e)}class Ix{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const n=this.cache_[i];!(t++&3)&&!n.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,n){const s=Fa(t,i,n);return s in this.cache_?this.cache_[s]:null}getPattern(t,i,n){const s=Fa(t,i,n);return s in this.patternCache_?this.patternCache_[s]:null}set(t,i,n,s,r){const o=Fa(t,i,n),a=o in this.cache_;this.cache_[o]=s,r&&(s.getImageState()===$.IDLE&&s.load(),s.getImageState()===$.LOADING?s.ready().then(()=>{this.patternCache_[o]=Co().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=Co().createPattern(s.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Fa(e,t,i){const n=i?Gn(i):"null";return t+":"+e+":"+n}const Ce=new Ix;let as=null;class Bg extends dr{constructor(t,i,n,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=s===void 0?$.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===$.LOADED){as||(as=re(1,1,void 0,{willReadFrequently:!0})),as.drawImage(this.image_,0,0);try{as.getImageData(0,0,1,1),this.tainted_=!1}catch{as=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(it.CHANGE)}handleImageError_(){this.imageState_=$.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=$.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],n=re(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===$.IDLE){this.image_||this.initializeImage_(),this.imageState_=$.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Ng(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==$.LOADED)return;const i=this.image_,n=re(Math.ceil(i.width*t),Math.ceil(i.height*t)),s=n.canvas;n.scale(t,t),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=_x(this.color_),n.fillRect(0,0,s.width/t,s.height/t),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===$.LOADED||this.imageState_===$.ERROR)t();else{const i=()=>{(this.imageState_===$.LOADED||this.imageState_===$.ERROR)&&(this.removeEventListener(it.CHANGE,i),t())};this.addEventListener(it.CHANGE,i)}})),this.ready_}}function Pc(e,t,i,n,s,r){let o=t===void 0?void 0:Ce.get(t,i,s);return o||(o=new Bg(e,e&&"src"in e?e.src||void 0:t,i,n,s),Ce.set(t,i,s,o,r)),r&&o&&!Ce.getPattern(t,i,s)&&Ce.set(t,i,s,o,r),o}function pu(e){return e[0]>0&&e[1]>0}function Ax(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function ge(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class aa{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ge(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new aa({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return gt()}getImage(t){return gt()}getHitDetectionImage(){return gt()}getPixelRatio(t){return 1}getImageState(){return gt()}getImageSize(){return gt()}getOrigin(){return gt()}getSize(){return gt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ge(t)}listenImageChange(t){gt()}load(){gt()}unlistenImageChange(t){gt()}ready(){return Promise.resolve()}}function mu(e){return e?Array.isArray(e)?Mc(e):typeof e=="object"&&"src"in e?Px(e):e:null}function Px(e){if(!e.offset||!e.size)return Ce.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=Ce.getPattern(t,void 0,e.color);if(i)return i;const n=Ce.get(e.src,"anonymous",null);if(n.getImageState()!==$.LOADED)return null;const s=re(e.size[0],e.size[1]);return s.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),Pc(s.canvas,t,void 0,$.LOADED,e.color,!0),Ce.getPattern(t,void 0,e.color)}const Or="ol-hidden",la="ol-unselectable",Lc="ol-control",_u="ol-collapsed",yu="#000",xu="round",bu="round",Lx=10,Ox="#000",Dx=1,kx=new pi;class ca extends aa{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?$.LOADING:$.LOADED,this.imageState_===$.LOADING&&this.ready().then(()=>this.imageState_=$.LOADED),this.render()}clone(){const t=this.getScale(),i=new ca({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-i[0]/n[0],t[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var r,o;const i=(r=this.fill_)==null?void 0:r.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let s=(o=Ce.get(n,null,null))==null?void 0:o.getImage(1);if(!s){const a=this.renderOptions_,l=Math.ceil(a.size*t),c=re(l,l);this.draw_(a,c,t),s=c.canvas,Ce.set(n,null,null,new Bg(s,void 0,null,$.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let s=this.radius,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const R=s;s=r,r=R}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),h=s-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=n)return d*i;const f=i/2/d,g=i/2*(h/u),m=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return m*2;const _=s*Math.sin(a),y=Math.sqrt(s*s-_*_),w=r-y,E=Math.sqrt(_*_+w*w)/_;if(E<=n){const R=E*i/2-r-s;return 2*Math.max(m,R)}return m*2}createRenderOptions(){let t=xu,i=bu,n=0,s=null,r=0,o,a=0;this.stroke_&&(o=mu(this.stroke_.getColor()??Ox),a=this.stroke_.getWidth()??Dx,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??bu,t=this.stroke_.getLineCap()??xu,n=this.stroke_.getMiterLimit()??Lx);const l=this.calculateLineJoinSize_(i,a,n),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let s=this.fill_.getColor();s===null&&(s=yu),i.fillStyle=mu(s),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=Gn(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(i=re(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const n=this.radius;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/i;for(let a=0;a<i;a++){const l=r+a*o,c=a%2===0?n:s;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=yu,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ha extends ca{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new ha({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}}class _r{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new _r({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=Pc(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===$.IDLE&&i.load(),i.getImageState()===$.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?$t(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Gn(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class ua{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new ua({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class rn{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Eu,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new rn({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Eu,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Fx(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(Rt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let Na=null;function jg(e,t){if(!Na){const i=new _r({color:"rgba(255,255,255,0.4)"}),n=new ua({color:"#3399CC",width:1.25});Na=[new rn({image:new ha({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return Na}function Eu(e){return e.getGeometry()}function vu(e,t,i,n){return i!==void 0&&n!==void 0?[i/e,n/t]:i!==void 0?i/e:n!==void 0?n/t:1}class Oc extends aa{constructor(t){t=t||{};const i=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:n,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Rt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||$t(o)),Rt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Rt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=$.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?$.LOADED:$.IDLE:l=$.LOADING:l=$.LOADED),this.color_=t.color!==void 0?Gn(t.color):null,this.iconImage_=Pc(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(vu(f[0],f[1],t.width,t.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(vu(c,h,t.width,t.height))}}clone(){let t,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Oc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const i=this.getDisplacement(),n=this.getScaleArray();return[t[0]-i[0]/n[0],t[1]+i[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==$.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==$.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(it.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(it.CHANGE,t)}ready(){return this.iconImage_.ready()}}const Nx="#333";class Dc{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=ge(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new _r({color:Nx}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Dc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ge(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}let dn=0;const se=1<<dn++,ht=1<<dn++,ue=1<<dn++,Oe=1<<dn++,ln=1<<dn++,_s=1<<dn++,Dr=Math.pow(2,dn)-1,kc={[se]:"boolean",[ht]:"number",[ue]:"string",[Oe]:"color",[ln]:"number[]",[_s]:"size"},zx=Object.keys(kc).map(Number).sort(lc);function Bx(e){return e in kc}function ys(e){const t=[];for(const i of zx)xs(e,i)&&t.push(kc[i]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function xs(e,t){return(e&t)===t}function yi(e,t){return e===t}class Nt{constructor(t,i){if(!Bx(t))throw new Error(`literal expressions must have a specific type, got ${ys(t)}`);this.type=t,this.value=i}}class jx{constructor(t,i,...n){this.type=t,this.operator=i,this.args=n}}function Wg(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Xt(e,t,i){switch(typeof e){case"boolean":{if(yi(t,ue))return new Nt(ue,e?"true":"false");if(!xs(t,se))throw new Error(`got a boolean, but expected ${ys(t)}`);return new Nt(se,e)}case"number":{if(yi(t,_s))return new Nt(_s,ge(e));if(yi(t,se))return new Nt(se,!!e);if(yi(t,ue))return new Nt(ue,e.toString());if(!xs(t,ht))throw new Error(`got a number, but expected ${ys(t)}`);return new Nt(ht,e)}case"string":{if(yi(t,Oe))return new Nt(Oe,Cc(e));if(yi(t,se))return new Nt(se,!!e);if(!xs(t,ue))throw new Error(`got a string, but expected ${ys(t)}`);return new Nt(ue,e)}}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(e.length===0)throw new Error("empty expression");if(typeof e[0]=="string")return qx(e,t,i);for(const n of e)if(typeof n!="number")throw new Error("expected an array of numbers");if(yi(t,_s)){if(e.length!==2)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new Nt(_s,e)}if(yi(t,Oe)){if(e.length===3)return new Nt(Oe,[...e,1]);if(e.length===4)return new Nt(Oe,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!xs(t,ln))throw new Error(`got an array of numbers, but expected ${ys(t)}`);return new Nt(ln,e)}const M={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Wx={[M.Get]:et(nt(1,1/0),wu),[M.Var]:et(nt(1,1),Hx),[M.Has]:et(nt(1,1/0),wu),[M.Id]:et(Ux,yn),[M.Concat]:et(nt(2,1/0),_t(ue)),[M.GeometryType]:et(Vx,yn),[M.LineMetric]:et(yn),[M.Resolution]:et(yn),[M.Zoom]:et(yn),[M.Time]:et(yn),[M.Any]:et(nt(2,1/0),_t(se)),[M.All]:et(nt(2,1/0),_t(se)),[M.Not]:et(nt(1,1),_t(se)),[M.Equal]:et(nt(2,2),_t(Dr)),[M.NotEqual]:et(nt(2,2),_t(Dr)),[M.GreaterThan]:et(nt(2,2),_t(ht)),[M.GreaterThanOrEqualTo]:et(nt(2,2),_t(ht)),[M.LessThan]:et(nt(2,2),_t(ht)),[M.LessThanOrEqualTo]:et(nt(2,2),_t(ht)),[M.Multiply]:et(nt(2,1/0),Tu),[M.Coalesce]:et(nt(2,1/0),Tu),[M.Divide]:et(nt(2,2),_t(ht)),[M.Add]:et(nt(2,1/0),_t(ht)),[M.Subtract]:et(nt(2,2),_t(ht)),[M.Clamp]:et(nt(3,3),_t(ht)),[M.Mod]:et(nt(2,2),_t(ht)),[M.Pow]:et(nt(2,2),_t(ht)),[M.Abs]:et(nt(1,1),_t(ht)),[M.Floor]:et(nt(1,1),_t(ht)),[M.Ceil]:et(nt(1,1),_t(ht)),[M.Round]:et(nt(1,1),_t(ht)),[M.Sin]:et(nt(1,1),_t(ht)),[M.Cos]:et(nt(1,1),_t(ht)),[M.Atan]:et(nt(1,2),_t(ht)),[M.Sqrt]:et(nt(1,1),_t(ht)),[M.Match]:et(nt(4,1/0),Ru,Gx),[M.Between]:et(nt(3,3),_t(ht)),[M.Interpolate]:et(nt(6,1/0),Ru,Yx),[M.Case]:et(nt(3,1/0),Xx,Kx),[M.In]:et(nt(2,2),$x),[M.Number]:et(nt(1,1/0),_t(Dr)),[M.String]:et(nt(1,1/0),_t(Dr)),[M.Array]:et(nt(1,1/0),_t(ht)),[M.Color]:et(nt(1,4),_t(ht)),[M.Band]:et(nt(1,3),_t(ht)),[M.Palette]:et(nt(2,2),Zx),[M.ToString]:et(nt(1,1),_t(se|ht|ue|Oe))};function wu(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=e[r+1];switch(typeof o){case"number":{s[r]=new Nt(ht,o);break}case"string":{s[r]=new Nt(ue,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}r===0&&i.properties.add(String(o))}return s}function Hx(e,t,i){const n=e[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new Nt(ue,n)]}function Ux(e,t,i){i.featureId=!0}function Vx(e,t,i){i.geometryType=!0}function yn(e,t,i){const n=e[0];if(e.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function nt(e,t){return function(i,n,s){const r=i[0],o=i.length-1;if(e===t){if(o!==e){const a=e===1?"":"s";throw new Error(`expected ${e} argument${a} for ${r}, got ${o}`)}}else if(o<e||o>t){const a=t===1/0?`${e} or more`:`${e} to ${t}`;throw new Error(`expected ${a} arguments for ${r}, got ${o}`)}}}function Tu(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=Xt(e[r+1],t,i);s[r]=o}return s}function _t(e){return function(t,i,n){const s=t.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=Xt(t[o+1],e,n);r[o]=a}return r}}function Xx(e,t,i){const n=e[0],s=e.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function Ru(e,t,i){const n=e[0],s=e.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function Gx(e,t,i){const n=e.length-1,s=ue|ht|se,r=Xt(e[1],s,i),o=Xt(e[e.length-1],t,i),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=Xt(e[l+2],r.type,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Xt(e[l+3],o.type,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[r,...a,o]}function Yx(e,t,i){const n=e[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);s=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new Nt(ht,s);let o;try{o=Xt(e[2],ht,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(e.length-3);for(let l=0;l<a.length;l+=2){try{const c=Xt(e[l+3],ht,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Xt(e[l+4],t,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[r,o,...a]}function Kx(e,t,i){const n=Xt(e[e.length-1],t,i),s=new Array(e.length-1);for(let r=0;r<s.length-1;r+=2){try{const o=Xt(e[r+1],se,i);s[r]=o}catch(o){throw new Error(`failed to parse argument ${r} of case expression: ${o.message}`)}try{const o=Xt(e[r+2],n.type,i);s[r+1]=o}catch(o){throw new Error(`failed to parse argument ${r+1} of case expression: ${o.message}`)}}return s[s.length-1]=n,s}function $x(e,t,i){let n=e[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=ue}else s=ht;const r=new Array(n.length);for(let a=0;a<r.length;a++)try{const l=Xt(n[a],s,i);r[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Xt(e[1],s,i),...r]}function Zx(e,t,i){let n;try{n=Xt(e[1],ht,i)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const s=e[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let o=0;o<r.length;o++){let a;try{a=Xt(s[o],Oe,i)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Nt))throw new Error(`the palette color at index ${o} must be a literal value`);r[o]=a}return[n,...r]}function et(...e){return function(t,i,n){const s=t[0];let r;for(let o=0;o<e.length;o++){const a=e[o](t,i,n);if(o==e.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");r=a}}return new jx(i,s,...r)}}function qx(e,t,i){const n=e[0],s=Wx[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(e,t,i)}function Hg(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Hg(e.getGeometries()[0]);default:return""}}function Ug(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function mi(e,t,i){const n=Xt(e,t,i);return ze(n)}function ze(e,t){if(e instanceof Nt){if(e.type===Oe&&typeof e.value=="string"){const n=Cc(e.value);return function(){return n}}return function(){return e.value}}const i=e.operator;switch(i){case M.Number:case M.String:case M.Coalesce:return Jx(e);case M.Get:case M.Var:case M.Has:return Qx(e);case M.Id:return n=>n.featureId;case M.GeometryType:return n=>n.geometryType;case M.Concat:{const n=e.args.map(s=>ze(s));return s=>"".concat(...n.map(r=>r(s).toString()))}case M.Resolution:return n=>n.resolution;case M.Any:case M.All:case M.Between:case M.In:case M.Not:return eb(e);case M.Equal:case M.NotEqual:case M.LessThan:case M.LessThanOrEqualTo:case M.GreaterThan:case M.GreaterThanOrEqualTo:return tb(e);case M.Multiply:case M.Divide:case M.Add:case M.Subtract:case M.Clamp:case M.Mod:case M.Pow:case M.Abs:case M.Floor:case M.Ceil:case M.Round:case M.Sin:case M.Cos:case M.Atan:case M.Sqrt:return ib(e);case M.Case:return nb(e);case M.Match:return sb(e);case M.Interpolate:return rb(e);case M.ToString:return ob(e);default:throw new Error(`Unsupported operator ${i}`)}}function Jx(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case M.Coalesce:return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case M.Number:case M.String:return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a===i)return a}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}function Qx(e,t){const n=e.args[0].value;switch(e.operator){case M.Get:return s=>{const r=e.args;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a){const h=r[a].value;o=o[h]}return o};case M.Var:return s=>s.variables[n];case M.Has:return s=>{const r=e.args;if(!(n in s.properties))return!1;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a){const h=r[a].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function tb(e,t){const i=e.operator,n=ze(e.args[0]),s=ze(e.args[1]);switch(i){case M.Equal:return r=>n(r)===s(r);case M.NotEqual:return r=>n(r)!==s(r);case M.LessThan:return r=>n(r)<s(r);case M.LessThanOrEqualTo:return r=>n(r)<=s(r);case M.GreaterThan:return r=>n(r)>s(r);case M.GreaterThanOrEqualTo:return r=>n(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${i}`)}}function eb(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case M.Any:return r=>{for(let o=0;o<n;++o)if(s[o](r))return!0;return!1};case M.All:return r=>{for(let o=0;o<n;++o)if(!s[o](r))return!1;return!0};case M.Between:return r=>{const o=s[0](r),a=s[1](r),l=s[2](r);return o>=a&&o<=l};case M.In:return r=>{const o=s[0](r);for(let a=1;a<n;++a)if(o===s[a](r))return!0;return!1};case M.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${i}`)}}function ib(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case M.Multiply:return r=>{let o=1;for(let a=0;a<n;++a)o*=s[a](r);return o};case M.Divide:return r=>s[0](r)/s[1](r);case M.Add:return r=>{let o=0;for(let a=0;a<n;++a)o+=s[a](r);return o};case M.Subtract:return r=>s[0](r)-s[1](r);case M.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case M.Mod:return r=>s[0](r)%s[1](r);case M.Pow:return r=>Math.pow(s[0](r),s[1](r));case M.Abs:return r=>Math.abs(s[0](r));case M.Floor:return r=>Math.floor(s[0](r));case M.Ceil:return r=>Math.ceil(s[0](r));case M.Round:return r=>Math.round(s[0](r));case M.Sin:return r=>Math.sin(s[0](r));case M.Cos:return r=>Math.cos(s[0](r));case M.Atan:return n===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case M.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${i}`)}}function nb(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{for(let r=0;r<i-1;r+=2)if(n[r](s))return n[r+1](s);return n[i-1](s)}}function sb(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{const r=n[0](s);for(let o=1;o<i;o+=2)if(r===n[o](s))return n[o+1](s);return n[i-1](s)}}function rb(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ze(e.args[s]);return s=>{const r=n[0](s),o=n[1](s);let a,l;for(let c=2;c<i;c+=2){const h=n[c](s);let u=n[c+1](s);const d=Array.isArray(u);if(d&&(u=xx(u)),h>=o)return c===2?u:d?ab(r,o,a,l,h,u):bs(r,o,a,l,h,u);a=h,l=u}return l}}function ob(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=ze(e.args[r]);switch(i){case M.ToString:return r=>{const o=s[0](r);return e.args[0].type===Oe?Mc(o):o.toString()};default:throw new Error(`Unsupported convert operator ${i}`)}}function bs(e,t,i,n,s,r){const o=s-i;if(o===0)return n;const a=t-i,l=e===1?a/o:(Math.pow(e,a)-1)/(Math.pow(e,o)-1);return n+l*(r-n)}function ab(e,t,i,n,s,r){if(s-i===0)return n;const a=fu(n),l=fu(r);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[bs(e,t,i,a[0],s,l[0]),bs(e,t,i,a[1],s,l[1]),a[2]+bs(e,t,i,0,s,c),bs(e,t,i,n[3],s,r[3])];return Lg(bx(h))}function lb(e){return!0}function cb(e){const t=Wg(),i=hb(e,t),n=Ug();return function(s,r){if(n.properties=s.getPropertiesInternal(),n.resolution=r,t.featureId){const o=s.getId();o!==void 0?n.featureId=o:n.featureId=null}return t.geometryType&&(n.geometryType=Hg(s.getGeometry())),i(n)}}function Cu(e){const t=Wg(),i=e.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=vl(e[o],t);const s=Ug(),r=new Array(i);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,t.featureId){const c=o.getId();c!==void 0?s.featureId=c:s.featureId=null}let l=0;for(let c=0;c<i;++c){const h=n[c](s);h&&(r[l]=h,l+=1)}return r.length=l,r}}function hb(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s){const r=e[s],o="filter"in r?mi(r.filter,se,t):lb;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=vl(r.style[c],t)}else a=[vl(r.style,t)];n[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<i;++a){const l=n[a].filter;if(l(s)&&!(e[a].else&&o)){o=!0;for(const c of n[a].styles){const h=c(s);h&&r.push(h)}}}return r}}function vl(e,t){const i=qs(e,"",t),n=Js(e,"",t),s=ub(e,t),r=db(e,t),o=de(e,"z-index",t);if(!i&&!n&&!s&&!r&&!ng(e))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const a=new rn;return function(l){let c=!0;if(i){const h=i(l);h&&(c=!1),a.setFill(h)}if(n){const h=n(l);h&&(c=!1),a.setStroke(h)}if(s){const h=s(l);h&&(c=!1),a.setText(h)}if(r){const h=r(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function qs(e,t,i){let n;if(t+"fill-pattern-src"in e)n=mb(e,t+"fill-",i);else{if(e[t+"fill-color"]==="none")return r=>null;n=Fc(e,t+"fill-color",i)}if(!n)return null;const s=new _r;return function(r){const o=n(r);return o===Rc?null:(s.setColor(o),s)}}function Js(e,t,i){const n=de(e,t+"stroke-width",i),s=Fc(e,t+"stroke-color",i);if(!n&&!s)return null;const r=ai(e,t+"stroke-line-cap",i),o=ai(e,t+"stroke-line-join",i),a=Vg(e,t+"stroke-line-dash",i),l=de(e,t+"stroke-line-dash-offset",i),c=de(e,t+"stroke-miter-limit",i),h=new ua;return function(u){if(s){const d=s(u);if(d===Rc)return null;h.setColor(d)}if(n&&h.setWidth(n(u)),r){const d=r(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function ub(e,t){const i="text-",n=ai(e,i+"value",t);if(!n)return null;const s=qs(e,i,t),r=qs(e,i+"background-",t),o=Js(e,i,t),a=Js(e,i+"background-",t),l=ai(e,i+"font",t),c=de(e,i+"max-angle",t),h=de(e,i+"offset-x",t),u=de(e,i+"offset-y",t),d=zn(e,i+"overflow",t),f=ai(e,i+"placement",t),g=de(e,i+"repeat",t),p=da(e,i+"scale",t),m=zn(e,i+"rotate-with-view",t),_=de(e,i+"rotation",t),y=ai(e,i+"align",t),w=ai(e,i+"justify",t),b=ai(e,i+"baseline",t),E=zn(e,i+"keep-upright",t),R=Vg(e,i+"padding",t),S=fa(e,i+"declutter-mode"),T=new Dc({declutterMode:S});return function(A){if(T.setText(n(A)),s&&T.setFill(s(A)),r&&T.setBackgroundFill(r(A)),o&&T.setStroke(o(A)),a&&T.setBackgroundStroke(a(A)),l&&T.setFont(l(A)),c&&T.setMaxAngle(c(A)),h&&T.setOffsetX(h(A)),u&&T.setOffsetY(u(A)),d&&T.setOverflow(d(A)),f){const I=f(A);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");T.setPlacement(I)}if(g&&T.setRepeat(g(A)),p&&T.setScale(p(A)),m&&T.setRotateWithView(m(A)),_&&T.setRotation(_(A)),y){const I=y(A);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");T.setTextAlign(I)}if(w){const I=w(A);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");T.setJustify(I)}if(b){const I=b(A);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");T.setTextBaseline(I)}return R&&T.setPadding(R(A)),E&&T.setKeepUpright(E(A)),T}}function db(e,t){return"icon-src"in e?fb(e,t):"shape-points"in e?gb(e,t):"circle-radius"in e?pb(e,t):null}function fb(e,t){const i="icon-",n=i+"src",s=Xg(e[n],n),r=Mo(e,i+"anchor",t),o=da(e,i+"scale",t),a=de(e,i+"opacity",t),l=Mo(e,i+"displacement",t),c=de(e,i+"rotation",t),h=zn(e,i+"rotate-with-view",t),u=Su(e,i+"anchor-origin"),d=Iu(e,i+"anchor-x-units"),f=Iu(e,i+"anchor-y-units"),g=bb(e,i+"color"),p=yb(e,i+"cross-origin"),m=xb(e,i+"offset"),_=Su(e,i+"offset-origin"),y=So(e,i+"width"),w=So(e,i+"height"),b=_b(e,i+"size"),E=fa(e,i+"declutter-mode"),R=new Oc({src:s,anchorOrigin:u,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:_,height:w,width:y,size:b,declutterMode:E});return function(S){return a&&R.setOpacity(a(S)),l&&R.setDisplacement(l(S)),c&&R.setRotation(c(S)),h&&R.setRotateWithView(h(S)),o&&R.setScale(o(S)),r&&R.setAnchor(r(S)),R}}function gb(e,t){const i="shape-",n=i+"points",s=i+"radius",r=wl(e[n],n),o=wl(e[s],s),a=qs(e,i,t),l=Js(e,i,t),c=da(e,i+"scale",t),h=Mo(e,i+"displacement",t),u=de(e,i+"rotation",t),d=zn(e,i+"rotate-with-view",t),f=So(e,i+"radius2"),g=So(e,i+"angle"),p=fa(e,i+"declutter-mode"),m=new ca({points:r,radius:o,radius2:f,angle:g,declutterMode:p});return function(_){return a&&m.setFill(a(_)),l&&m.setStroke(l(_)),h&&m.setDisplacement(h(_)),u&&m.setRotation(u(_)),d&&m.setRotateWithView(d(_)),c&&m.setScale(c(_)),m}}function pb(e,t){const i="circle-",n=qs(e,i,t),s=Js(e,i,t),r=de(e,i+"radius",t),o=da(e,i+"scale",t),a=Mo(e,i+"displacement",t),l=de(e,i+"rotation",t),c=zn(e,i+"rotate-with-view",t),h=fa(e,i+"declutter-mode"),u=new ha({radius:5,declutterMode:h});return function(d){return r&&u.setRadius(r(d)),n&&u.setFill(n(d)),s&&u.setStroke(s(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}function de(e,t,i){if(!(t in e))return;const n=mi(e[t],ht,i);return function(s){return wl(n(s),t)}}function ai(e,t,i){if(!(t in e))return null;const n=mi(e[t],ue,i);return function(s){return Xg(n(s),t)}}function mb(e,t,i){const n=ai(e,t+"pattern-src",i),s=Mu(e,t+"pattern-offset",i),r=Mu(e,t+"pattern-size",i),o=Fc(e,t+"color",i);return function(a){return{src:n(a),offset:s&&s(a),size:r&&r(a),color:o&&o(a)}}}function zn(e,t,i){if(!(t in e))return null;const n=mi(e[t],se,i);return function(s){const r=n(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function Fc(e,t,i){if(!(t in e))return null;const n=mi(e[t],Oe,i);return function(s){return Gg(n(s),t)}}function Vg(e,t,i){if(!(t in e))return null;const n=mi(e[t],ln,i);return function(s){return yr(n(s),t)}}function Mo(e,t,i){if(!(t in e))return null;const n=mi(e[t],ln,i);return function(s){const r=yr(n(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function Mu(e,t,i){if(!(t in e))return null;const n=mi(e[t],ln,i);return function(s){return Yg(n(s),t)}}function da(e,t,i){if(!(t in e))return null;const n=mi(e[t],ln|ht,i);return function(s){return Eb(n(s),t)}}function So(e,t){const i=e[t];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}}function _b(e,t){const i=e[t];if(i!==void 0){if(typeof i=="number")return ge(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return i}}function yb(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}}function Su(e,t){const i=e[t];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function Iu(e,t){const i=e[t];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return i}}function xb(e,t){const i=e[t];if(i!==void 0)return yr(i,t)}function fa(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function bb(e,t){const i=e[t];if(i!==void 0)return Gg(i,t)}function yr(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const i=e.length;for(let n=0;n<i;++n)if(typeof e[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function Xg(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function wl(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function Gg(e,t){if(typeof e=="string")return e;const i=yr(e,t),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}function Yg(e,t){const i=yr(e,t);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return i}function Eb(e,t){return typeof e=="number"?e:Yg(e,t)}const Au={RENDER_ORDER:"renderOrder"};class vb extends mr{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Au.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,i){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new cx(9)),this.getRenderer().renderDeclutter(t,i)}setRenderOrder(t){this.set(Au.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?jg:t;const i=wb(t);this.styleFunction_=t===null?void 0:Fx(i),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function wb(e){if(e===void 0)return jg;if(!e)return null;if(typeof e=="function"||e instanceof rn)return e;if(!Array.isArray(e))return Cu([e]);if(e.length===0)return[];const t=e.length,i=e[0];if(i instanceof rn){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!(o instanceof rn))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in i){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return cb(s)}return Cu(e)}class Tb extends $o{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){gt()}calculateMatrices2D(t){const i=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;Xn(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),xg(s,n)}forEachFeatureAtCoordinate(t,i,n,s,r,o,a,l){let c;const h=i.viewState;function u(b,E,R,S){return r.call(o,E,b?R:null,S)}const d=h.projection,f=ny(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const b=d.getExtent(),E=pt(b);g.push([-E,0],[E,0])}const p=i.layerStatesArray,m=p.length,_=[],y=[];for(let b=0;b<g.length;b++)for(let E=m-1;E>=0;--E){const R=p[E],S=R.layer;if(S.hasRenderer()&&wc(R,h)&&a.call(l,S)){const T=S.getRenderer(),A=S.getSource();if(T&&A){const I=A.getWrapX()?f:t,k=u.bind(null,R.managed);y[0]=I[0]+g[b][0],y[1]=I[1]+g[b][1],c=T.forEachFeatureAtCoordinate(y,i,n,k,_)}if(c)return c}}if(_.length===0)return;const w=1/_.length;return _.forEach((b,E)=>b.distanceSq+=E*w),_.sort((b,E)=>b.distanceSq-E.distanceSq),_.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(t,i,n,s,r,o){return this.forEachFeatureAtCoordinate(t,i,n,s,mo,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){gt()}scheduleExpireIconCache(t){Ce.canExpireCache()&&t.postRenderFunctions.push(Rb)}}function Rb(e,t){Ce.expire()}class Kg extends gi{constructor(t,i,n,s){super(t),this.inversePixelTransform=i,this.frameState=n,this.context=s}}class Cb extends Tb{constructor(t){super(t),this.fontChangeListenerKey_=yt(kx,Xs.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=la+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){const n=this.getMap();if(n.hasListener(t)){const s=new Kg(t,void 0,i);n.dispatchEvent(s)}}disposeInternal(){Lt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent($e.PRECOMPOSE,t);const i=t.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);i.some(a=>a.layer instanceof vb&&a.layer.getDeclutter())&&(t.declutter={});const s=t.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,l=i.length;a<l;++a){const c=i[a];t.layerIndex=a;const h=c.layer,u=h.getSourceState();if(!wc(c,s)||u!="ready"&&u!="undefined"){h.unrender();continue}const d=h.render(t,o);d&&(d!==o&&(this.children_.push(d),o=d),r.push(c))}this.declutter(t,r),Cx(this.element_,this.children_),this.dispatchRenderEvent($e.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,i){if(t.declutter){for(let n=i.length-1;n>=0;--n){const s=i[n],r=s.layer;r.getDeclutter()&&r.renderDeclutter(t,s)}i.forEach(n=>n.layer.renderDeferred(t))}}}class Ci extends gi{constructor(t,i){super(t),this.layer=i}}const za={LAYERS:"layers"};class Qn extends Ig{constructor(t){t=t||{};const i=Object.assign({},t);delete i.layers;let n=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(za.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new ui(n.slice(),{unique:!0}):Rt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new ui(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(yt(t,Re.ADD,this.handleLayersAdd_,this),yt(t,Re.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Lt);Qo(this.listenerKeys_);const i=t.getArray();for(let n=0,s=i.length;n<s;n++){const r=i[n];this.registerLayerListeners_(r),this.dispatchEvent(new Ci("addlayer",r))}this.changed()}registerLayerListeners_(t){const i=[yt(t,Xs.PROPERTYCHANGE,this.handleLayerChange_,this),yt(t,it.CHANGE,this.handleLayerChange_,this)];t instanceof Qn&&i.push(yt(t,"addlayer",this.handleLayerGroupAdd_,this),yt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$t(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new Ci("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ci("removelayer",t.layer))}handleLayersAdd_(t){const i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new Ci("addlayer",i)),this.changed()}handleLayersRemove_(t){const i=t.element,n=$t(i);this.listenerKeys_[n].forEach(Lt),delete this.listenerKeys_[n],this.dispatchEvent(new Ci("removelayer",i)),this.changed()}getLayers(){return this.get(za.LAYERS)}setLayers(t){const i=this.getLayers();if(i){const n=i.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new Ci("removelayer",n[s]))}this.set(za.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){const i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(i)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,a=i.length;o<a;o++){const l=i[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Ee(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return i}getSourceState(){return"ready"}}class Mn extends gi{constructor(t,i,n){super(t),this.map=i,this.frameState=n!==void 0?n:null}}class Ei extends Mn{constructor(t,i,n,s,r,o){super(t,i,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ot={SINGLECLICK:"singleclick",CLICK:it.CLICK,DBLCLICK:it.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Tl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Mb extends dr{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=yt(n,Tl.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=yt(n,Tl.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(it.TOUCHMOVE,this.boundHandleTouchMove_,Fg?{passive:!1}:!1)}emulateClick_(t){let i=new Ei(Ot.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new Ei(Ot.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ei(Ot.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const i=t,n=i.pointerId;if(i.type==Ot.POINTERUP||i.type==Ot.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==i.target){delete this.trackedTouches_[s];break}}else(i.type==Ot.POINTERDOWN||i.type==Ot.POINTERMOVE)&&(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const i=new Ei(Ot.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const i=new Ei(Ot.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(yt(n,Ot.POINTERMOVE,this.handlePointerMove_,this),yt(n,Ot.POINTERUP,this.handlePointerUp_,this),yt(this.element_,Ot.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(yt(this.element_.getRootNode(),Ot.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const i=new Ei(Ot.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Ei(Ot.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){const i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(it.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const vi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Gt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Io=1/0;class Sb{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Qo(this.queuedElements_)}dequeue(){const t=this.elements_,i=this.priorities_,n=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){Rt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(t);return i!=Io?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const i=this.elements_,n=this.priorities_,s=i.length,r=i[t],o=n[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<s&&n[c]<n[l]?c:l;i[t]=i[h],n[t]=n[h],t=h}i[t]=r,n[t]=o,this.siftDown_(a,t)}siftDown_(t,i){const n=this.elements_,s=this.priorities_,r=n[i],o=s[i];for(;i>t;){const a=this.getParentIndex_(i);if(s[a]>o)n[i]=n[a],s[i]=s[a],i=a;else break}n[i]=r,s[i]=o}reprioritize(){const t=this.priorityFunction_,i=this.elements_,n=this.priorities_;let s=0;const r=i.length;let o,a,l;for(a=0;a<r;++a)o=i[a],l=t(o),l==Io?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,i[s++]=o);i.length=s,n.length=s,this.heapify_()}}const U={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ib extends Sb{constructor(t,i){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const i=super.enqueue(t);return i&&t[0].addEventListener(it.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const i=t.target,n=i.getState();if(n===U.LOADED||n===U.ERROR||n===U.EMPTY){n!==U.ERROR&&i.removeEventListener(it.CHANGE,this.boundHandleTileChange_);const s=i.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n=0;for(;this.tilesLoading_<t&&n<i&&this.getCount()>0;){const s=this.dequeue()[0],r=s.getKey();s.getState()===U.IDLE&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,s.load())}}}function Ab(e,t,i,n,s){if(!e||!(i in e.wantedTiles)||!e.wantedTiles[i][t.getKey()])return Io;const r=e.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Nc extends pi{constructor(t){super();const i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var i;this.map_&&((i=this.element)==null||i.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Lt(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){const n=this.target_??t.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==_o&&this.listenerKeys.push(yt(t,vi.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Pb extends Nc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const i=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:i+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(it.CLICK,this.handleClick_.bind(this),!1);const c=i+" "+la+" "+Lc+(this.collapsed_&&this.collapsible_?" "+_u:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(s=>s.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!i.some(r=>{var o;return((o=r.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const i=await Promise.all(this.collectSourceAttributions_(t).map(s=>ig(()=>s))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!qo(i,this.renderedAttributions_)){Rx(this.ulElement_);for(let s=0,r=i.length;s<r;++s){const o=document.createElement("li");o.innerHTML=i[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(_u),this.collapsed_?gu(this.collapseLabel_,this.label_):gu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Lb extends Nc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const i=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=i+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(it.CLICK,this.handleClick_.bind(this),!1);const a=i+" "+la+" "+Lc,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Or)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const i=this.getMap().getView();if(!i)return;const n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:Jn}):i.setRotation(0))}render(t){const i=t.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Or);!r&&n===0?this.element.classList.add(Or):r&&n!==0&&this.element.classList.remove(Or)}this.label_.style.transform=s}this.rotation_=n}}class Ob extends Nc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const i=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(it.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(it.CLICK,this.handleClick_.bind(this,-n),!1);const d=i+" "+la+" "+Lc,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:Jn})):n.setZoom(r)}}}function Db(e){e=e||{};const t=new ui;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new Ob(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new Lb(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new Pb(e.attributionOptions)),t}const Pu={ACTIVE:"active"};let xr=class extends pi{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Pu.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Pu.ACTIVE,t)}setMap(t){this.map_=t}};function kb(e,t,i){const n=e.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:i!==void 0?i:250,easing:Dy,center:e.getConstrainedCenter(s)})}}function zc(e,t,i,n){const s=e.getZoom();if(s===void 0)return;const r=e.getConstrainedZoom(s+t),o=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:i,duration:n!==void 0?n:250,easing:Jn})}class Fb extends xr{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==Ot.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();zc(a,o,r,this.duration_),n.preventDefault(),i=!0}return!i}}class br extends xr{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ot.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ot.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Ot.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==Ot.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Bc(e){const t=e.length;let i=0,n=0;for(let s=0;s<t;s++)i+=e[s].clientX,n+=e[s].clientY;return{clientX:i/t,clientY:n/t}}function Rl(e){const t=arguments;return function(i){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](i),!!n);++s);return n}}const Nb=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},zb=function(e){const t=e.map.getTargetElement(),i=t.getRootNode(),n=e.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):t.contains(n)},$g=function(e){const t=e.map.getTargetElement(),i=t.getRootNode();return(i instanceof ShadowRoot?i.host:t).hasAttribute("tabindex")?zb(e):!0},Bb=mo,Zg=function(e){const t=e.originalEvent;return t.button==0&&!(wx&&Og&&t.ctrlKey)},qg=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},jb=function(e){const t=e.originalEvent;return Og?t.metaKey:t.ctrlKey},Wb=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Jg=function(e){const t=e.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},Ba=function(e){const t=e.originalEvent;return Rt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},Hb=function(e){const t=e.originalEvent;return Rt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class Ub extends br{constructor(t){super({stopDown:Jo}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:Rl(qg,Hb);this.condition_=t.onFocusOnly?Rl($g,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,s=i.getEventPixel(Bc(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();iy(r,a.getResolution()),dc(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=i.getPixelFromCoordinateInternal(o),l=i.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Jn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Vb extends br{constructor(t){t=t||{},super({stopDown:Jo}),this.condition_=t.condition?t.condition:Nb,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Ba(t))return;const i=t.map,n=i.getView();if(n.getConstraints().rotation===bc)return;const s=i.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Ba(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Ba(t)&&Zg(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Xb extends $o{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,i=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],i[0])+n,s.top=Math.min(t[1],i[1])+n,s.width=Math.abs(i[0]-t[0])+n,s.height=Math.abs(i[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,i=this.endPixel_,s=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new $s([s])}getGeometry(){return this.geometry_}}const xn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ls extends gi{constructor(t,i,n){super(t),this.coordinate=i,this.mapBrowserEvent=n}}class Gb extends br{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Xb(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??Zg,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,n){const s=n[0]-i[0],r=n[1]-i[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ls(xn.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new ls(i?xn.BOXEND:xn.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ls(xn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ls(xn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ls(xn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class Yb extends Gb{constructor(t){t=t||{};const i=t.condition?t.condition:Wb;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:Jn})}}const Vi={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Kb extends xr{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return qg(i)&&Jg(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==it.KEYDOWN){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==Vi.DOWN||s==Vi.LEFT||s==Vi.RIGHT||s==Vi.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==Vi.DOWN?c=-a:s==Vi.LEFT?l=-a:s==Vi.RIGHT?l=a:c=a;const h=[l,c];dc(h,o.getRotation()),kb(o,h,this.duration_),n.preventDefault(),i=!0}}return!i}}class $b extends xr{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(i){return!jb(i)&&Jg(i)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==it.KEYDOWN||t.type==it.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();zc(a,o,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}class Zb{constructor(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[i+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class qb extends xr{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const i=t.condition?t.condition:Bb;this.condition_=t.onFocusOnly?Rl($g,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==it.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let r;if(t.type==it.WHEEL&&(r=s.deltaY,Ex&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Dg),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const i=t.getView();i.getAnimating()&&i.cancelAnimations();let n=-Ft(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),zc(i,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Jb extends br{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=Jo),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==bc&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Bc(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class Qb extends br{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=Jo),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(i=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Bc(this.targetPointers))),l.render(),c.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function t1(e){e=e||{};const t=new ui,i=new Zb(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new Vb),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new Fb({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new Ub({onFocusOnly:e.onFocusOnly,kinetic:i})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new Jb),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new Qb({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new Kb),t.push(new $b({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new qb({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new Yb({duration:e.zoomDuration})),t}function Qg(e){if(e instanceof mr){e.setMapInternal(null);return}e instanceof Qn&&e.getLayers().forEach(Qg)}function tp(e,t){if(e instanceof mr){e.setMapInternal(t);return}if(e instanceof Qn){const i=e.getLayers().getArray();for(let n=0,s=i.length;n<s;++n)tp(i[n],t)}}let e1=class extends pi{constructor(t){super(),t=t||{},this.on,this.once,this.un;const i=i1(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Dg,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Nn(),this.pixelToCoordinateTransform_=Nn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=i.controls||Db(),this.interactions=i.interactions||t1({onFocusOnly:!0}),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ib(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Gt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Gt.VIEW,this.handleViewChanged_),this.addChangeListener(Gt.SIZE,this.handleSizeChanged_),this.addChangeListener(Gt.TARGET,this.handleTargetChanged_),this.setProperties(i.values);const n=this;t.view&&!(t.view instanceof Ke)&&t.view.then(function(s){n.setView(new Ke(s))}),this.controls.addEventListener(Re.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Re.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Re.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Re.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Re.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Re.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){tp(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:mo,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,i,null,o,null)}getFeaturesAtPixel(t,i){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},i),n}getAllLayers(){const t=[];function i(n){n.forEach(function(s){s instanceof Qn?i(s.getLayers()):t.push(s)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.layerFilter!==void 0?i.layerFilter:mo,r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(Gt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return El(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const i=this.frameState_;return i?he(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Gt.LAYERGROUP)}setLayers(t){const i=this.getLayerGroup();if(t instanceof ui){i.setLayers(t);return}const n=i.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const s=t[i];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const i=ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){const i=this.frameState_;return i?he(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Gt.SIZE)}getView(){return this.get(Gt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,n,s){return Ab(this.frameState_,t,i,n,s)}handleBrowserEvent(t,i){i=i||t.type;const n=new Ei(i,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const i=t.originalEvent,n=i.type;if(n===Tl.POINTERDOWN||n===it.WHEEL||n===it.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=i.target,a=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===s?s.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[ce.ANIMATING]||o[ce.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}i.getTilesLoading()<s&&(i.reprioritize(),i.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener($e.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent($e.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Mn(vi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Mn(vi.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Lt(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(it.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(it.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Cb(this)),this.mapBrowserEventHandler_=new Mb(this,this.moveTolerance_);for(const r in Ot)this.mapBrowserEventHandler_.addEventListener(Ot[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(it.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(it.WHEEL,this.boundHandleBrowserEvent_,Fg?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const r=i.getRootNode();n=r instanceof ShadowRoot?r.host:i}this.targetChangeHandlerKeys_=[yt(n,it.KEYDOWN,this.handleBrowserEvent,this),yt(n,it.KEYPRESS,this.handleBrowserEvent,this)];const s=i.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(i)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=yt(t,Xs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=yt(t,it.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ci("addlayer",t)),this.layerGroupPropertyListenerKeys_=[yt(t,Xs.PROPERTYCHANGE,this.render,this),yt(t,it.CHANGE,this.render,this),yt(t,"addlayer",this.handleLayerAdd_,this),yt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const s=t[i].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Qg(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const i=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(i!==void 0&&pu(i)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Eo(a.center,a.resolution,a.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:$t(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Eo(a.nextCenter,a.nextResolution,l,i)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!qn(this.previousExtent_)&&!bo(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Mn(vi.MOVESTART,this,s)),this.previousExtent_=ea(this.previousExtent_)),this.previousExtent_&&!r.viewHints[ce.ANIMATING]&&!r.viewHints[ce.INTERACTING]&&!bo(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Mn(vi.MOVEEND,this,r)),U0(r.extent,this.previousExtent_))),this.dispatchEvent(new Mn(vi.POSTRENDER,this,r)),this.renderComplete_=(this.hasListener(vi.LOADSTART)||this.hasListener(vi.LOADEND)||this.hasListener($e.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const i=this.getLayerGroup();i&&this.handleLayerRemove_(new Ci("removelayer",i)),this.set(Gt.LAYERGROUP,t)}setSize(t){this.set(Gt.SIZE,t)}setTarget(t){this.set(Gt.TARGET,t)}setView(t){if(!t||t instanceof Ke){this.set(Gt.VIEW,t);return}this.set(Gt.VIEW,new Ke);const i=this;t.then(function(n){i.setView(new Ke(n))})}updateSize(){const t=this.getTargetElement();let i;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(i=[Math.max(0,r),Math.max(0,o)],!pu(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&mg("No map visible because the map container's width or height are 0."))}const n=this.getSize();i&&(!n||!qo(i,n))&&(this.setSize(i),this.updateViewportSize_(i))}updateViewportSize_(t){const i=this.getView();i&&i.setViewportSize(t)}};function i1(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Qn({layers:e.layers});i[Gt.LAYERGROUP]=n,i[Gt.TARGET]=e.target,i[Gt.VIEW]=e.view instanceof Ke?e.view:new Ke;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new ui(e.controls.slice()):(Rt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let r;e.interactions!==void 0&&(Array.isArray(e.interactions)?r=new ui(e.interactions.slice()):(Rt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new ui(e.overlays.slice()):(Rt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new ui,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:i}}const kr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class n1 extends mr{constructor(t){t=t||{};const i=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(kr.PRELOAD)}setPreload(t){this.set(kr.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(kr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(kr.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const s1=5;class r1 extends fr{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=s1}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return gt()}getData(t){return null}prepareFrame(t){return gt()}renderFrame(t,i){return gt()}forEachFeatureAtCoordinate(t,i,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const i=t.target;(i.getState()===$.LOADED||i.getState()===$.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=$.LOADED&&i!=$.ERROR&&t.addEventListener(it.CHANGE,this.boundHandleImageChange_),i==$.IDLE&&(t.load(),i=t.getState()),i==$.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class o1{constructor(){tt(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Co(),{get:(t,i)=>{if(typeof Co()[i]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i),this.pushMethodArgs_},set:(t,i,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i,n),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(i=>{for(let n=0,s=i.length;n<s;++n){const r=i[n];if(typeof r=="function"){r(t);continue}const o=i[++n];if(typeof t[r]=="function")t[r](...o);else{if(typeof o=="function"){t[r]=o(t);continue}t[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}let Sn=null;function a1(){Sn=re(1,1,void 0,{willReadFrequently:!0})}class ep extends r1{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Nn(),this.pixelTransform=Nn(),this.inversePixelTransform=Nn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,i,n){Sn||a1(),Sn.clearRect(0,0,1,1);let s;try{Sn.drawImage(t,i,n,1,1,0,0,1,1),s=Sn.getImageData(0,0,1,1).data}catch{return Sn=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,i,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&qo(Gn(t.style.backgroundColor),Gn(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===i?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=re();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,i,n){const s=di(n),r=sa(n),o=na(n),a=ia(n);he(i.coordinateToPixelTransform,s),he(i.coordinateToPixelTransform,r),he(i.coordinateToPixelTransform,o),he(i.coordinateToPixelTransform,a);const l=this.inversePixelTransform;he(l,s),he(l,r),he(l,o),he(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,i){const n=t.extent,s=t.viewState.resolution,r=t.viewState.rotation,o=t.pixelRatio,a=Math.round(pt(n)/s*o),l=Math.round(Bt(n)/s*o);Xn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,r,-a/2,-l/2),xg(this.inversePixelTransform,this.pixelTransform);const c=Fy(this.pixelTransform);if(this.useContainer(i,c,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(t,i,n){const s=this.getLayer();if(s.hasListener(t)){const r=new Kg(t,this.inversePixelTransform,n,i);s.dispatchEvent(r)}}preRender(t,i){this.frameState=i,!i.declutter&&this.dispatchRenderEvent_($e.PRERENDER,t,i)}postRender(t,i){i.declutter||this.dispatchRenderEvent_($e.POSTRENDER,t,i)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new o1),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_($e.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_($e.POSTRENDER,this.context,t))}getRenderTransform(t,i,n,s,r,o,a){const l=r/2,c=o/2,h=s/i,u=-h,d=-t[0]+a,f=-t[1];return Xn(this.tempTransform,l,c,h,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class jc extends dr{constructor(t,i,n){super(),n=n||{},this.tileCoord=t,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(it.CHANGE)}release(){this.state===U.ERROR&&this.setState(U.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==U.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){gt()}getAlpha(t,i){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=i-n+1e3/60;return s>=this.transition_?1:yg(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Ao(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}function l1(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e instanceof DataView?e:null}const c1=new Error("disposed");let bn=null;function h1(e){bn||(bn=re(e.width,e.height,void 0,{willReadFrequently:!0}));const t=bn.canvas,i=e.width;t.width!==i&&(t.width=i);const n=e.height;return t.height!==n&&(t.height=n),bn.clearRect(0,0,i,n),bn.drawImage(e,0,0),bn.getImageData(0,0,i,n).data}const u1=[256,256];class Cl extends jc{constructor(t){const i=U.IDLE;super(t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=Ao(this.data_);return t?[t.width,t.height]:u1}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==U.IDLE&&this.state!==U.ERROR)return;this.state=U.LOADING,this.changed();const t=this;this.loader_().then(function(i){t.data_=i,t.state=U.LOADED,t.changed()}).catch(function(i){t.error_=i,t.state=U.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(c1),this.controller_=null),super.disposeInternal()}}class ip extends jc{constructor(t,i,n,s,r,o){super(t,i,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=U.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=U.ERROR,this.unlistenImage_(),this.image_=d1(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=U.LOADED:this.state=U.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==U.ERROR&&(this.state=U.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==U.IDLE&&(this.state=U.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Mx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function d1(){const e=re(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}class f1{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof $o&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){const n=this.entries_[t];return Rt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const i=this.entries_[t];return Rt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.key_;return t}getValues(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var i;return(i=this.entries_[t])==null?void 0:i.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){Rt(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const Wc=.5,g1=10,Lu=.25;class Hc{constructor(t,i,n,s,r,o,a){this.sourceProj_=t,this.targetProj_=i;let l={};const c=a?Ry(w=>he(a,_g(w,this.targetProj_,this.sourceProj_))):Ro(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const b=w[0]+"/"+w[1];return l[b]||(l[b]=c(w)),l[b]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&pt(s)>=pt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pt(this.targetProj_.getExtent()):null;const h=di(n),u=sa(n),d=na(n),f=ia(n),g=this.transformInv_(h),p=this.transformInv_(u),m=this.transformInv_(d),_=this.transformInv_(f),y=g1+(o?Math.max(0,Math.ceil(Math.log2(Ys(n)/(o*o*256*256)))):0);if(this.addQuad_(h,u,d,f,g,p,m,_,y),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(b,E,R){w=Math.min(w,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-w>this.sourceWorldWidth_/2){const E=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];E[0][0]-w>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-w>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-w>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const R=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-R<this.sourceWorldWidth_/2&&(b.source=E)}})}l={}}addTriangle_(t,i,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,i,n]})}addQuad_(t,i,n,s,r,o,a,l,c){const h=Vh([r,o,a,l]),u=this.sourceWorldWidth_?pt(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=Vh([t,i,n,s]);g=pt(m)/this.targetWorldWidth_>Lu||g}!f&&this.sourceProj_.isGlobal()&&u&&(g=u>Lu||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!un(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(p=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(c>0){if(!g){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(m);let y;f?y=(Fn(r[0],d)+Fn(a[0],d))/2-Fn(_[0],d):y=(r[0]+a[0])/2-_[0];const w=(r[1]+a[1])/2-_[1];g=y*y+w*w>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const m=[(i[0]+n[0])/2,(i[1]+n[1])/2],_=this.transformInv_(m),y=[(s[0]+t[0])/2,(s[1]+t[1])/2],w=this.transformInv_(y);this.addQuad_(t,i,m,y,r,o,_,w,c-1),this.addQuad_(y,m,n,s,w,_,a,l,c-1)}else{const m=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(m),y=[(n[0]+s[0])/2,(n[1]+s[1])/2],w=this.transformInv_(y);this.addQuad_(t,m,y,s,r,_,w,l,c-1),this.addQuad_(m,i,n,y,_,o,a,w,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(t,n,s,r,a,l),p&14||this.addTriangle_(t,n,i,r,a,o),p&&(p&13||this.addTriangle_(i,s,t,o,l,r),p&7||this.addTriangle_(i,s,n,o,l,a))}calculateSourceExtent(){const t=Bi();return this.triangles_.forEach(function(i,n,s){const r=i.source;io(t,r[0]),io(t,r[1]),io(t,r[2])}),t}getTriangles(){return this.triangles_}}let ja;const Bn=[];function Ou(e,t,i,n,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,s)),e.restore()}function Wa(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function p1(){if(ja===void 0){const e=re(6,6,Bn);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Ou(e,4,5,4,0),Ou(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;ja=Wa(t,0)||Wa(t,4)||Wa(t,8),Ic(e),Bn.push(e.canvas)}return ja}function Ml(e,t,i,n){const s=_g(i,t,e);let r=Jh(t,n,i);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=e.getMetersPerUnit();a!==void 0&&(r/=a);const l=e.getExtent();if(!l||ta(l,s)){const c=Jh(e,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function np(e,t,i,n){const s=Di(i);let r=Ml(e,t,s,n);return(!isFinite(r)||r<=0)&&lg(i,function(o){return r=Ml(e,t,o,n),isFinite(r)&&r>0}),r}function sp(e,t,i,n,s,r,o,a,l,c,h,u,d,f){const g=re(Math.round(i*e),Math.round(i*t),Bn);if(u||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(i,i);function p(E){return Math.round(E*i)/i}g.globalCompositeOperation="lighter";const m=Bi();l.forEach(function(E,R,S){og(m,E.extent)});let _;const y=i/n,w=(u?1:1+Math.pow(2,-24))/y;(!d||l.length!==1||c!==0)&&(_=re(Math.round(pt(m)*y),Math.round(Bt(m)*y),Bn),u||(_.imageSmoothingEnabled=!1),l.forEach(function(E,R,S){if(E.image.width>0&&E.image.height>0){if(E.clipExtent){_.save();const N=(E.clipExtent[0]-m[0])*y,V=-(E.clipExtent[3]-m[3])*y,Q=pt(E.clipExtent)*y,W=Bt(E.clipExtent)*y;_.rect(u?N:Math.round(N),u?V:Math.round(V),u?Q:Math.round(N+Q)-Math.round(N),u?W:Math.round(V+W)-Math.round(V)),_.clip()}const T=(E.extent[0]-m[0])*y,A=-(E.extent[3]-m[3])*y,I=pt(E.extent)*y,k=Bt(E.extent)*y;_.drawImage(E.image,c,c,E.image.width-2*c,E.image.height-2*c,u?T:Math.round(T),u?A:Math.round(A),u?I:Math.round(T+I)-Math.round(T),u?k:Math.round(A+k)-Math.round(A)),E.clipExtent&&_.restore()}}));const b=di(o);return a.getTriangles().forEach(function(E,R,S){const T=E.source,A=E.target;let I=T[0][0],k=T[0][1],N=T[1][0],V=T[1][1],Q=T[2][0],W=T[2][1];const X=p((A[0][0]-b[0])/r),j=p(-(A[0][1]-b[1])/r),Y=p((A[1][0]-b[0])/r),at=p(-(A[1][1]-b[1])/r),q=p((A[2][0]-b[0])/r),J=p(-(A[2][1]-b[1])/r),ot=I,lt=k;I=0,k=0,N-=ot,V-=lt,Q-=ot,W-=lt;const xt=[[N,V,0,0,Y-X],[Q,W,0,0,q-X],[0,0,N,V,at-j],[0,0,Q,W,J-j]],bt=Q0(xt);if(!bt)return;if(g.save(),g.beginPath(),p1()||!u){g.moveTo(Y,at);const Pt=4,oe=X-Y,we=j-at;for(let Ht=0;Ht<Pt;Ht++)g.lineTo(Y+p((Ht+1)*oe/Pt),at+p(Ht*we/(Pt-1))),Ht!=Pt-1&&g.lineTo(Y+p((Ht+1)*oe/Pt),at+p((Ht+1)*we/(Pt-1)));g.lineTo(q,J)}else g.moveTo(Y,at),g.lineTo(X,j),g.lineTo(q,J);g.clip(),g.transform(bt[0],bt[2],bt[1],bt[3],X,j),g.translate(m[0]-ot,m[3]-lt);let ct;if(_)ct=_.canvas,g.scale(w,-w);else{const Pt=l[0],oe=Pt.extent;ct=Pt.image,g.scale(pt(oe)/ct.width,-Bt(oe)/ct.height)}g.drawImage(ct,0,0),g.restore()}),_&&(Ic(_),Bn.push(_.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(E,R,S){const T=E.target,A=(T[0][0]-b[0])/r,I=-(T[0][1]-b[1])/r,k=(T[1][0]-b[0])/r,N=-(T[1][1]-b[1])/r,V=(T[2][0]-b[0])/r,Q=-(T[2][1]-b[1])/r;g.beginPath(),g.moveTo(k,N),g.lineTo(A,I),g.lineTo(V,Q),g.closePath(),g.stroke()}),g.restore()),g.canvas}function ga(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Sl(e,t,i,n,s,r,o){o=o??ga();const a=1/(e-t),l=1/(i-n),c=1/(s-r);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(e+t)*a,o[13]=(n+i)*l,o[14]=(r+s)*c,o[15]=1,o}function Du(e,t,i,n,s){return s=s??ga(),s[0]=e[0]*t,s[1]=e[1]*t,s[2]=e[2]*t,s[3]=e[3]*t,s[4]=e[4]*i,s[5]=e[5]*i,s[6]=e[6]*i,s[7]=e[7]*i,s[8]=e[8]*n,s[9]=e[9]*n,s[10]=e[10]*n,s[11]=e[11]*n,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s}function m1(e,t,i,n,s){s=s??ga();let r,o,a,l,c,h,u,d,f,g,p,m;return e===s?(s[12]=e[0]*t+e[4]*i+e[8]*n+e[12],s[13]=e[1]*t+e[5]*i+e[9]*n+e[13],s[14]=e[2]*t+e[6]*i+e[10]*n+e[14],s[15]=e[3]*t+e[7]*i+e[11]*n+e[15]):(r=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],u=e[6],d=e[7],f=e[8],g=e[9],p=e[10],m=e[11],s[0]=r,s[1]=o,s[2]=a,s[3]=l,s[4]=c,s[5]=h,s[6]=u,s[7]=d,s[8]=f,s[9]=g,s[10]=p,s[11]=m,s[12]=r*t+c*i+f*n+e[12],s[13]=o*t+h*i+g*n+e[13],s[14]=a*t+u*i+p*n+e[14],s[15]=l*t+d*i+m*n+e[15]),s}function _1(e,t,i,n){return n=n??ga(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e,n[13]=t,n[14]=i,n[15]=1,n}const y1=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,x1=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class b1{constructor(t){this.gl_=t,this.program_=Il(t,x1,y1),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,i,n,s,r,o,a,l,c,h,u,d,f){const g=this.gl_;l===void 0&&(l=s),c===void 0&&(c=r),o===void 0&&(o=i),a===void 0&&(a=n),h===void 0&&(h=o),u===void 0&&(u=a),d===void 0&&(d=g.canvas.width),f===void 0&&(f=g.canvas.height),g.bindTexture(g.TEXTURE_2D,t),g.useProgram(this.program_),g.bindBuffer(g.ARRAY_BUFFER,this.positionBuffer),g.enableVertexAttribArray(this.positionLocation),g.vertexAttribPointer(this.positionLocation,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,this.texcoordBuffer),g.enableVertexAttribArray(this.texcoordLocation),g.vertexAttribPointer(this.texcoordLocation,2,g.FLOAT,!1,0,0);let p=Sl(0,d,0,f,-1,1);p=m1(p,l,c,0),p=Du(p,h,u,1),g.uniformMatrix4fv(this.matrixLocation,!1,p);let m=_1(s/i,r/n,0);m=Du(m,o/i,a/n,1),g.uniformMatrix4fv(this.textureMatrixLocation,!1,m),g.uniform1i(this.textureLocation,0),g.drawArrays(g.TRIANGLES,0,this.positions.length/2)}}function ku(e,t,i){const n=e.createShader(t);if(n===null)throw new Error("Shader compilation failed");if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const s=e.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function Il(e,t,i){const n=e.createProgram(),s=ku(e,e.VERTEX_SHADER,i),r=ku(e,e.FRAGMENT_SHADER,t);if(n===null)throw new Error("Program creation failed");if(e.attachShader(n,s),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const E1=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,v1=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,w1=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,T1=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function R1(e,t,i,n){let s;return i.length?s=i.shift():kg?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("webgl",n)}function C1(e){const t=e.canvas;t.width=1,t.height=1,e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}const Fu=[];function M1(e,t,i,n,s,r,o,a,l,c,h,u,d,f){const g=Math.round(n*t),p=Math.round(n*i);e.canvas.width=g,e.canvas.height=p;let m,_;if(_=e.createTexture(),e.bindTexture(e.TEXTURE_2D,_),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,g,p,0,e.RGBA,h,null),m=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,m),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,_,0),m===null)throw new Error("Could not create framebuffer");if(_===null)throw new Error("Could not create texture");if(l.length===0)return{width:g,height:p,framebuffer:m,texture:_};const y=Bi();l.forEach(function(I,k,N){og(y,I.extent)});let w,b,E;const R=1/s;{if(w=e.createTexture(),_===null)throw new Error("Could not create texture");b=Math.round(pt(y)*R),E=Math.round(Bt(y)*R);const I=e.getParameter(e.MAX_TEXTURE_SIZE),k=Math.max(b,E),N=k>I?I/k:1,V=Math.round(b*N),Q=Math.round(E*N);e.bindTexture(e.TEXTURE_2D,w),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,V,Q,0,e.RGBA,h,null);const W=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,W),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,w,0);const X=new b1(e);l.forEach(function(j,Y,at){const q=(j.extent[0]-y[0])*R*N,J=-(j.extent[3]-y[3])*R*N,ot=pt(j.extent)*R*N,lt=Bt(j.extent)*R*N;if(e.bindFramebuffer(e.FRAMEBUFFER,W),e.viewport(0,0,V,Q),j.clipExtent){const xt=(j.clipExtent[0]-y[0])*R*N,bt=-(j.clipExtent[3]-y[3])*R*N,ct=pt(j.clipExtent)*R*N,Pt=Bt(j.clipExtent)*R*N;e.enable(e.SCISSOR_TEST),e.scissor(d?xt:Math.round(xt),d?bt:Math.round(bt),d?ct:Math.round(xt+ct)-Math.round(xt),d?Pt:Math.round(bt+Pt)-Math.round(bt))}X.drawImage(j.texture,j.width,j.height,c,c,j.width-2*c,j.height-2*c,d?q:Math.round(q),d?J:Math.round(J),d?ot:Math.round(q+ot)-Math.round(q),d?lt:Math.round(J+lt)-Math.round(J),V,Q),e.disable(e.SCISSOR_TEST)}),e.deleteFramebuffer(W)}const S=di(o),T=di(y),A=I=>{const k=(I[0][0]-S[0])/r*n,N=-(I[0][1]-S[1])/r*n,V=(I[1][0]-S[0])/r*n,Q=-(I[1][1]-S[1])/r*n,W=(I[2][0]-S[0])/r*n,X=-(I[2][1]-S[1])/r*n;return{u1:V,v1:Q,u0:k,v0:N,u2:W,v2:X}};e.bindFramebuffer(e.FRAMEBUFFER,m),e.viewport(0,0,g,p);{const I=[],k=[],N=Il(e,T1,w1);e.useProgram(N);const V=e.getUniformLocation(N,"u_texture");e.bindTexture(e.TEXTURE_2D,w),e.uniform1i(V,0),a.getTriangles().forEach(function(q,J,ot){const lt=q.source,xt=q.target,{u1:bt,v1:ct,u0:Pt,v0:oe,u2:we,v2:Ht}=A(xt),_i=(lt[0][0]-T[0])/s/b,x=-(lt[0][1]-T[1])/s/E,v=(lt[1][0]-T[0])/s/b,C=-(lt[1][1]-T[1])/s/E,O=(lt[2][0]-T[0])/s/b,P=-(lt[2][1]-T[1])/s/E;I.push(bt,ct,Pt,oe,we,Ht),k.push(v,C,_i,x,O,P)});const Q=Sl(0,g,p,0,-1,1),W=e.getUniformLocation(N,"u_matrix");e.uniformMatrix4fv(W,!1,Q);const X=e.getAttribLocation(N,"a_position"),j=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,j),e.bufferData(e.ARRAY_BUFFER,new Float32Array(I),e.STATIC_DRAW),e.vertexAttribPointer(X,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(X);const Y=e.getAttribLocation(N,"a_texcoord"),at=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,at),e.bufferData(e.ARRAY_BUFFER,new Float32Array(k),e.STATIC_DRAW),e.vertexAttribPointer(Y,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(Y),e.drawArrays(e.TRIANGLES,0,I.length/2)}if(u){const I=Il(e,v1,E1);e.useProgram(I);const k=Sl(0,g,p,0,-1,1),N=e.getUniformLocation(I,"u_matrix");e.uniformMatrix4fv(N,!1,k);const V=Array.isArray(u)?u:[0,0,0,255],Q=e.getUniformLocation(I,"u_val");e.uniform4fv(Q,V);const W=e.getAttribLocation(I,"a_position"),X=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,X),e.vertexAttribPointer(W,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(W);const j=a.getTriangles().reduce(function(Y,at){const q=at.target,{u1:J,v1:ot,u0:lt,v0:xt,u2:bt,v2:ct}=A(q);return Y.concat([J,ot,lt,xt,lt,xt,bt,ct,bt,ct,J,ot])},[]);e.bufferData(e.ARRAY_BUFFER,new Float32Array(j),e.STATIC_DRAW),e.drawArrays(e.LINES,0,j.length/2)}return{width:g,height:p,framebuffer:m,texture:_}}class S1 extends Cl{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=t.renderEdges!==void 0?t.renderEdges:!1,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const i=t.sourceProj,n=i.getExtent(),s=t.sourceTileGrid.getExtent();this.clipExtent_=i.canWrapX()?s?Ee(n,s):n:s;const r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?Ee(r,o):r;if(Ys(l)===0){this.state=U.EMPTY;return}n&&(a?a=Ee(a,n):a=n);const c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=t.targetProj,u=np(i,h,l,c);if(!isFinite(u)||u<=0){this.state=U.EMPTY;return}const d=t.errorThreshold!==void 0?t.errorThreshold:Wc;if(this.triangulation_=new Hc(i,h,l,a,u*d,c,t.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(u);let f=this.triangulation_.calculateSourceExtent();if(a&&(i.canWrapX()?(f[1]=Ft(f[1],a[1],a[3]),f[3]=Ft(f[3],a[1],a[3])):f=Ee(f,a)),!Ys(f))this.state=U.EMPTY;else{let g=0,p=0;i.canWrapX()&&(g=pt(n),p=Math.floor((f[0]-n[0])/g)),cg(f.slice(),i,!0).forEach(_=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),w=t.getTileFunction;for(let b=y.minX;b<=y.maxX;b++)for(let E=y.minY;E<=y.maxY;E++){const R=w(this.sourceZ_,b,E,this.pixelRatio_);if(R){const S=p*g;this.sourceTiles_.push({tile:R,offset:S})}}++p}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let i=!1;if(this.sourceTiles_.forEach(b=>{var J;const E=b.tile;if(!E||E.getState()!==U.LOADED)return;const R=E.getSize(),S=this.gutter_;let T;const A=l1(E.getData());A?T=A:(i=!0,T=h1(Ao(E.getData())));const I=[R[0]+2*S,R[1]+2*S],k=T instanceof Float32Array,N=I[0]*I[1],V=k?Float32Array:Uint8ClampedArray,Q=new V(T.buffer),W=V.BYTES_PER_ELEMENT,X=W*Q.length/N,j=Q.byteLength/I[1],Y=Math.floor(j/W/I[0]),at=this.sourceTileGrid_.getTileCoordExtent(E.tileCoord);at[0]+=b.offset,at[2]+=b.offset;const q=(J=this.clipExtent_)==null?void 0:J.slice();q&&(q[0]+=b.offset,q[2]+=b.offset),t.push({extent:at,clipExtent:q,data:Q,dataType:V,bytesPerPixel:X,pixelSize:I,bandCount:Y})}),this.sourceTiles_.length=0,t.length===0){this.state=U.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),r=typeof s=="number"?s:s[0],o=typeof s=="number"?s:s[1],a=r*this.pixelRatio_,l=o*this.pixelRatio_,c=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=t[0].bandCount,f=new t[0].dataType(d*a*l),g=R1(a,l,Fu,{premultipliedAlpha:!1,antialias:!1});let p;const m=g.RGBA;let _;t[0].dataType==Float32Array?(_=g.FLOAT,g.getExtension("WEBGL_color_buffer_float"),g.getExtension("OES_texture_float"),g.getExtension("EXT_float_blend"),p=g.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(_=g.UNSIGNED_BYTE,p=this.interpolate);const y=4,w=Math.ceil(d/y);for(let b=w-1;b>=0;--b){const E=[];for(let V=0,Q=t.length;V<Q;++V){const W=t[V],X=W.pixelSize,j=X[0],Y=X[1],at=new W.dataType(y*j*Y),q=W.data;let J=b*y;for(let lt=0,xt=at.length;lt<xt;lt+=y)at[lt]=q[J],at[lt+1]=q[J+1],at[lt+2]=q[J+2],at[lt+3]=q[J+3],J+=d;const ot=g.createTexture();g.bindTexture(g.TEXTURE_2D,ot),p?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,m,j,Y,0,m,_,at),E.push({extent:W.extent,clipExtent:W.clipExtent,texture:ot,width:j,height:Y})}const{framebuffer:R,width:S,height:T}=M1(g,r,o,this.pixelRatio_,h,c,u,this.triangulation_,E,this.gutter_,_,this.renderEdges_,p),A=S,I=T*y,k=new t[0].dataType(A*I);g.bindFramebuffer(g.FRAMEBUFFER,R),g.readPixels(0,0,S,T,g.RGBA,_,k);let N=b*y;for(let V=0,Q=k.length;V<Q;V+=y){const W=(A-1-(V/I|0))*I+V%I;f[N]=k[W],f[N+1]=k[W+1],f[N+2]=k[W+2],f[N+3]=k[W+3],N+=d}}if(C1(g),Fu.push(g.canvas),i){const b=re(r,o),E=new ImageData(f,r);b.putImageData(E,0,0),this.reprojData_=b.canvas}else this.reprojData_=f;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=U.LOADED,this.changed()}load(){if(this.state!==U.IDLE&&this.state!==U.ERROR)return;this.state=U.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n!==U.IDLE&&n!==U.LOADING)return;t++;const s=yt(i,it.CHANGE,()=>{const r=i.getState();(r==U.LOADED||r==U.ERROR||r==U.EMPTY)&&(Lt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i}){i.getState()==U.IDLE&&i.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}}class Al extends jc{constructor(t,i,n,s,r,o,a,l,c,h,u,d){super(r,U.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?Ee(f,g):f;if(Ys(m)===0){this.state=U.EMPTY;return}const _=t.getExtent();_&&(p?p=Ee(p,_):p=_);const y=s.getResolution(this.wrappedTileCoord_[0]),w=np(t,n,m,y);if(!isFinite(w)||w<=0){this.state=U.EMPTY;return}const b=h!==void 0?h:Wc;if(this.triangulation_=new Hc(t,n,m,p,w*b,y),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=i.getZForResolution(w);let E=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(E[1]=Ft(E[1],p[1],p[3]),E[3]=Ft(E[3],p[1],p[3])):E=Ee(E,p)),!Ys(E))this.state=U.EMPTY;else{let R=0,S=0;t.canWrapX()&&(R=pt(_),S=Math.floor((E[0]-_[0])/R)),cg(E.slice(),t,!0).forEach(A=>{const I=i.getTileRangeForExtentAndZ(A,this.sourceZ_);for(let k=I.minX;k<=I.maxX;k++)for(let N=I.minY;N<=I.maxY;N++){const V=c(this.sourceZ_,k,N,a);if(V){const Q=S*R;this.sourceTiles_.push({tile:V,offset:Q})}}++S}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(i=>{var s;const n=i.tile;if(n&&n.getState()==U.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;const o=(s=this.clipExtent_)==null?void 0:s.slice();o&&(o[0]+=i.offset,o[2]+=i.offset),t.push({extent:r,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=U.ERROR;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(i),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=sp(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=U.LOADED}this.changed()}load(){if(this.state==U.IDLE){this.state=U.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==U.IDLE||n==U.LOADING){t++;const s=yt(i,it.CHANGE,r=>{const o=i.getState();(o==U.LOADED||o==U.ERROR||o==U.EMPTY)&&(Lt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,s){i.getState()==U.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ic(this.canvas_.getContext("2d")),Bn.push(this.canvas_),this.canvas_=null),super.release()}}class Uc{constructor(t,i,n,s){this.minX=t,this.maxX=i,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function En(e,t,i,n,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=i,s.maxY=n,s):new Uc(e,t,i,n)}function Po(e,t,i,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=i,n):[e,t,i]}function I1(e,t,i){return e+"/"+t+"/"+i}function A1(e){return P1(e[0],e[1],e[2])}function P1(e,t,i){return(t<<e)+i}function L1(e,t){const i=e[0],n=e[1],s=e[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const r=t.getFullTileRange(i);return r?r.containsXY(n,s):!0}function Ha(e,t,i,n){return`${e},${I1(t,i,n)}`}function Ua(e,t,i){if(!(i in e))return e[i]=new Set([t]),!0;const n=e[i],s=n.has(t);return s||n.add(t),!s}function O1(e,t,i){const n=e[i];return n?n.delete(t):!1}function Nu(e,t){const i=e.layerStatesArray[e.layerIndex];i.extent&&(t=Ee(t,hi(i.extent,e.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(e.viewState.projection).getExtent();s&&(t=Ee(t,s))}return t}class D1 extends ep{constructor(t,i){super(t),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Bi(),this.tempTileRange_=new Uc(0,0,0,0),this.tempTileCoord_=Po(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new f1(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,i,n,s){const r=this.tileCache_,a=this.getLayer().getSource(),l=Ha(a.getKey(),t,i,n);let c;if(r.containsKey(l))c=r.get(l);else{if(c=a.getTile(t,i,n,s.pixelRatio,s.viewState.projection),!c)return null;r.set(l,c)}return c}getTile(t,i,n,s){const r=this.getOrCreateTile(t,i,n,s);return r||null}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),s=he(i.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!ta(r,s))return null;const o=i.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(i.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(s,h),d=this.getTile(h,u[1],u[2],i);if(!d||d.getState()!==U.LOADED)continue;const f=l.getOrigin(h),g=ge(l.getTileSize(h)),p=l.getResolution(h);let m;if(d instanceof ip||d instanceof Al)m=d.getImage();else if(d instanceof Cl){if(m=Ao(d.getData()),!m)continue}else continue;const _=Math.floor(c*((s[0]-f[0])/p-u[1]*g[0])),y=Math.floor(c*((f[1]-s[1])/p-u[2]*g[1])),w=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(m,_+w,y+w)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(t,i,n,s,r){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=$t(l);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=a.getMapInternal(),f=Math.max(n-r,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection));for(let g=n;g>=f;--g){const p=c.getTileRangeForExtentAndZ(i,g,this.tempTileRange_),m=c.getResolution(g);for(let _=p.minX;_<=p.maxX;++_)for(let y=p.minY;y<=p.maxY;++y){const w=this.getTile(g,_,y,t);if(!w||!Ua(s,w,g))continue;const E=w.getKey();if(u[E]=!0,w.getState()===U.IDLE&&!t.tileQueue.isKeyQueued(E)){const R=Po(g,_,y,this.tempTileCoord_);t.tileQueue.enqueue([w,h,c.getTileCoordCenter(R),m])}}}}findStaleTile_(t,i){const n=this.tileCache_,s=t[0],r=t[1],o=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=Ha(a[l],s,r,o);if(n.containsKey(c)){const h=n.get(c);if(h.getState()===U.LOADED)return h.endTransition($t(this)),Ua(i,h,s),!0}}return!1}findAltTiles_(t,i,n,s){const r=t.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!r)return!1;let o=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource().getKey();for(let h=r.minX;h<=r.maxX;++h)for(let u=r.minY;u<=r.maxY;++u){const d=Ha(c,n,h,u);let f=!1;if(a.containsKey(d)){const g=a.get(d);g.getState()===U.LOADED&&(Ua(s,g,n),f=!0)}f||(o=!1)}return o}renderFrame(t,i){let n=!0;this.renderComplete=!0;const s=t.layerStatesArray[t.layerIndex],r=t.viewState,o=r.projection,a=r.resolution,l=r.center,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(o),g=f.getZForResolution(a,u.zDirection),p=f.getResolution(g),m=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==m&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=m):this.renderedSourceKey_=m;let _=t.extent;const y=u.getTilePixelRatio(c);this.prepareContainer(t,i);const w=this.context.canvas.width,b=this.context.canvas.height,E=s.extent&&hi(s.extent);E&&(_=Ee(_,hi(s.extent)));const R=p*w/2/y,S=p*b/2/y,T=[l[0]-R,l[1]-S,l[0]+R,l[1]+S],A={};this.renderedTiles.length=0;const I=h.getPreload();if(t.nextExtent){const q=f.getZForResolution(r.nextResolution,u.zDirection),J=Nu(t,t.nextExtent);this.enqueueTiles(t,J,q,A,I)}const k=Nu(t,_);if(this.enqueueTiles(t,k,g,A,0),I>0&&setTimeout(()=>{this.enqueueTiles(t,k,g-1,A,I-1)},0),!(g in A))return this.container;const N=$t(this),V=t.time;for(const q of A[g]){const J=q.getState();if((q instanceof Al||q instanceof S1)&&J===U.EMPTY)continue;const ot=q.tileCoord;if(J===U.LOADED&&q.getAlpha(N,V)===1){q.endTransition(N);continue}if(J!==U.IDLE&&(n=!1),J!==U.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ot,A)){O1(A,q,g),t.animate=!0;continue}if(this.findAltTiles_(f,ot,g+1,A))continue;const bt=f.getMinZoom();for(let ct=g-1;ct>=bt&&!this.findAltTiles_(f,ot,ct,A);--ct);}const Q=p/a*c/y,W=this.getRenderContext(t);Xn(this.tempTransform,w/2,b/2,Q,Q,0,-w/2,-b/2),s.extent&&this.clipUnrotated(W,t,E),u.getInterpolate()||(W.imageSmoothingEnabled=!1),this.preRender(W,t);const X=Object.keys(A).map(Number);X.sort(lc);let j;const Y=[],at=[];for(let q=X.length-1;q>=0;--q){const J=X[q],ot=u.getTilePixelSize(J,c,o),xt=f.getResolution(J)/p,bt=ot[0]*xt*Q,ct=ot[1]*xt*Q,Pt=f.getTileCoordForCoordAndZ(di(T),J),oe=f.getTileCoordExtent(Pt),we=he(this.tempTransform,[y*(oe[0]-T[0])/p,y*(T[3]-oe[3])/p]),Ht=y*u.getGutterForProjection(o);for(const _i of A[J]){if(_i.getState()!==U.LOADED)continue;const x=_i.tileCoord,v=Pt[1]-x[1],C=Math.round(we[0]-(v-1)*bt),O=Pt[2]-x[2],P=Math.round(we[1]-(O-1)*ct),L=Math.round(we[0]-v*bt),B=Math.round(we[1]-O*ct),z=C-L,F=P-B,D=X.length===1;let Z=!1;j=[L,B,L+z,B,L+z,B+F,L,B+F];for(let H=0,K=Y.length;H<K;++H)if(!D&&J<at[H]){const G=Y[H];un([L,B,L+z,B+F],[G[0],G[3],G[4],G[7]])&&(Z||(W.save(),Z=!0),W.beginPath(),W.moveTo(j[0],j[1]),W.lineTo(j[2],j[3]),W.lineTo(j[4],j[5]),W.lineTo(j[6],j[7]),W.moveTo(G[6],G[7]),W.lineTo(G[4],G[5]),W.lineTo(G[2],G[3]),W.lineTo(G[0],G[1]),W.clip())}Y.push(j),at.push(J),this.drawTile(_i,t,L,B,z,F,Ht,D),Z&&W.restore(),this.renderedTiles.unshift(_i),this.updateUsedTiles(t.usedTiles,u,_i)}}if(this.renderedRevision=d,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!bo(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=c,this.postRender(this.context,t),s.extent&&W.restore(),W.imageSmoothingEnabled=!0,this.renderComplete){const q=(J,ot)=>{const lt=$t(u),xt=ot.wantedTiles[lt],bt=xt?Object.keys(xt).length:0;this.updateCacheSize(bt),this.tileCache_.expireCache()};t.postRenderFunctions.push(q)}return!this.renderComplete&&!n&&(t.animate=!0),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,i,n,s,r,o,a,l){let c;if(t instanceof Cl){if(c=Ao(t.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(t);if(!c)return;const h=this.getRenderContext(i),u=$t(this),d=i.layerStatesArray[i.layerIndex],f=d.opacity*(l?t.getAlpha(u,i.time):1),g=f!==h.globalAlpha;g&&(h.save(),h.globalAlpha=f),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),g&&h.restore(),f!==d.opacity?i.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,i,n){const s=$t(i);s in t||(t[s]={}),t[s][n.getKey()]=!0}}class k1 extends n1{constructor(t){super(t)}createRenderer(){return new D1(this,{cacheSize:this.getCacheSize()})}}const Va={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class rp extends pi{constructor(t){super(),this.projection=pe(t.projection),this.attributions_=zu(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,s){i.viewResolver=n,i.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=zu(t),this.changed()}setState(t){this.state_=t,this.changed()}}function zu(e){return e?typeof e=="function"?e:(Array.isArray(e)||(e=[e]),t=>e):null}const vn=[0,0,0],xi=5;class op{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Rt(A0(this.resolutions_,(s,r)=>r-s),"`resolutions` must be sorted in descending order");let i;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!i)i=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Rt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=di(n)),Rt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Rt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:cc,Rt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((s,r)=>{const o=new Uc(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,i,n){const s=this.getTileRangeForExtentAndZ(t,i);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([i,r,a])}forEachTileCoordParentTileRange(t,i,n,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),r=En(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),i(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return En(r,r+1,o,o+1,i)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(i===s)return En(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-s),c=Math.floor(r*l),h=Math.floor(o*l);if(i<s)return En(c,c,h,h,n);const u=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return En(c,u,h,d,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,i,n)}getTileRangeForExtentAndZ(t,i,n){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,vn);const s=vn[1],r=vn[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,vn);const o=vn[1],a=vn[2];return En(s,o,r,a,n)}getTileCoordCenter(t){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=ge(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*s[0]*n,i[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,i){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=ge(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,a=n[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return pr(o,a,l,c,i)}getTileCoordForCoordAndResolution(t,i,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,n)}getTileCoordForXYAndResolution_(t,i,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=ge(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-i)/n/c[1];return s?(h=Si(h,xi)-1,u=Si(u,xi)-1):(h=Sr(h,xi),u=Sr(u,xi)),Po(o,h,u,r)}getTileCoordForXYAndZ_(t,i,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=ge(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-i)/a/l[1];return s?(c=Si(c,xi)-1,h=Si(h,xi)-1):(c=Sr(c,xi),h=Sr(h,xi)),Po(n,c,h,r)}getTileCoordForCoordAndZ(t,i,n){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){const n=Zo(this.resolutions_,t,i||0);return Ft(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return Mg(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const i=this.resolutions_.length,n=new Array(i);for(let s=this.minZoom;s<i;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}function ap(e){let t=e.getDefaultTileGrid();return t||(t=B1(e),e.setDefaultTileGrid(t)),t}function F1(e,t,i){const n=t[0],s=e.getTileCoordCenter(t),r=Vc(i);if(!ta(r,s)){const o=pt(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,e.getTileCoordForCoordAndZ(s,n)}return t}function N1(e,t,i,n){n=n!==void 0?n:"top-left";const s=lp(e,t,i);return new op({extent:e,origin:Y0(e,n),resolutions:s,tileSize:i})}function z1(e){const t=e,i=t.extent||pe("EPSG:3857").getExtent(),n={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:lp(i,t.maxZoom,t.tileSize,t.maxResolution)};return new op(n)}function lp(e,t,i,n){t=t!==void 0?t:D0,i=ge(i!==void 0?i:cc);const s=Bt(e),r=pt(e);n=n>0?n:Math.max(r/i[0],s/i[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function B1(e,t,i,n){const s=Vc(e);return N1(s,t,i,n)}function Vc(e){e=pe(e);let t=e.getExtent();if(!t){const i=180*hc.degrees/e.getMetersPerUnit();t=pr(-i,-i,i,i)}return t}class j1 extends rp{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const i=[256,256];this.tileGrid&&ge(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=t.key||$t(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,n,s,r){return gt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:ap(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(i),o=ge(s.getTileSize(t),this.tmpSize);return r==1?o:Ax(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){const n=i!==void 0?i:this.getProjection(),s=i!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=F1(s,t,n)),L1(t,s)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class W1 extends gi{constructor(t,i){super(t),this.tile=i}}const H1=/\{z\}/g,U1=/\{x\}/g,V1=/\{y\}/g,X1=/\{-y\}/g;function G1(e,t,i,n,s){return e.replace(H1,t.toString()).replace(U1,i.toString()).replace(V1,n.toString()).replace(X1,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function Y1(e){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(e);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(e.replace(i[0],String.fromCharCode(r)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(e),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)t.push(e.replace(i[0],s.toString()));return t}return t.push(e),t}function K1(e,t){return function(i,n,s){if(!i)return;let r;const o=i[0];if(t){const a=t.getFullTileRange(o);a&&(r=a.getHeight()-1)}return G1(e,o,i[1],i[2],r)}}function $1(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=K1(e[s],t);return Z1(n)}function Z1(e){return e.length===1?e[0]:function(t,i,n){if(!t)return;const s=A1(t),r=Fn(s,e.length);return e[r](t,i,n)}}class Xc extends j1{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Xc.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const i=t.target,n=$t(i),s=i.getState();let r;s==U.LOADING?(this.tileLoadingKeys_[n]=!0,r=Va.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==U.ERROR?Va.TILELOADERROR:s==U.LOADED?Va.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new W1(r,i))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){const i=Y1(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;const i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($1(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,n){}}class q1 extends Xc{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:J1,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:ip,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!Os(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const i=this.getProjection();if(this.tileGrid&&(!i||Os(i,t)))return this.tileGrid;const n=$t(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=ap(t)),this.tileGridForProjection[n]}createTile_(t,i,n,s,r,o){const a=[t,i,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,c!==void 0?U.IDLE:U.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(it.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,i,n,s,r){const o=this.getProjection();if(!o||!r||Os(o,r))return this.getTileInternal(t,i,n,s,o||r);const a=[t,i,n],l=this.getKey(),c=this.getTileGridForProjection(o),h=this.getTileGridForProjection(r),u=this.getTileCoordForTileUrlFunction(a,r),d=new Al(o,c,r,h,a,u,this.getTilePixelRatio(s),this.getGutter(),(f,g,p,m)=>this.getTileInternal(f,g,p,m,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(t,i,n,s,r){const o=this.getKey();return this.createTile_(t,i,n,s,r,o)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,i){const n=pe(t);if(n){const s=$t(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=i)}}}function J1(e,t){e.getImage().src=t}class Q1 extends q1{constructor(t){t=t||{};const i=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:z1({extent:Vc(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const tE='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class eE extends Q1{constructor(t){t=t||{};let i;t.attributions!==void 0?i=t.attributions:i=[tE];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}function Pl(e){return Array.isArray(e)?Math.min(...e):e}class iE extends Ac{constructor(t,i,n,s,r,o,a){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=i.getExtent();c&&i.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?Ee(n,c):n,u=Di(h),d=Ml(t,i,u,s),f=Wc,g=new Hc(t,i,h,l,d*f,s),p=g.calculateSourceExtent(),m=qn(p)?null:o(p,d,r),_=m?$.IDLE:$.EMPTY,y=m?m.getPixelRatio():1;super(n,s,y,_),this.targetProj_=i,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=s,this.targetExtent_=n,this.sourceImage_=m,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==$.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==$.LOADED){const i=pt(this.targetExtent_)/this.targetResolution_,n=Bt(this.targetExtent_)/this.targetResolution_;this.canvas_=sp(i,n,this.sourcePixelRatio_,Pl(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==$.IDLE){this.state=$.LOADING,this.changed();const t=this.sourceImage_.getState();t==$.LOADED||t==$.ERROR?this.reproject_():(this.sourceListenerKey_=yt(this.sourceImage_,it.CHANGE,i=>{const n=this.sourceImage_.getState();(n==$.LOADED||n==$.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Lt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Fr=4,Xa={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class nE extends gi{constructor(t,i){super(t),this.image=i}}class sE extends rp{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const i=this.getResolutions();if(i){const n=Zo(i,t,0);t=i[n]}return t}getImage(t,i,n,s){const r=this.getProjection();if(!r||!s||Os(r,s))return r&&(s=r),this.getImageInternal(t,i,n,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Os(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==i&&bo(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new iE(r,s,t,i,n,(o,a,l)=>this.getImageInternal(o,a,l,r),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,i,n,s){if(this.loader){const r=oE(t,i,n,1),o=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===s&&(this.wantedExtent_&&xo(this.wantedExtent_,r)||xo(this.image.getExtent(),r))&&(this.wantedResolution_&&Pl(this.wantedResolution_)===o||Pl(this.image.getResolution())===o)))return this.image;this.wantedProjection_=s,this.wantedExtent_=r,this.wantedResolution_=o,this.image=new Ac(r,o,n,this.loader),this.image.addEventListener(it.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const i=t.target;let n;switch(i.getState()){case $.LOADING:this.loading=!0,n=Xa.IMAGELOADSTART;break;case $.LOADED:this.loading=!1,n=Xa.IMAGELOADEND;break;case $.ERROR:this.loading=!1,n=Xa.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new nE(n,i))}}function rE(e,t){e.getImage().src=t}function oE(e,t,i,n){const s=t/i,r=Di(e),o=Si(pt(e)/s,Fr),a=Si(Bt(e)/s,Fr),l=Si((n-1)*o/2,Fr),c=o+2*l,h=Si((n-1)*a/2,Fr),u=a+2*h;return Eo(r,s,0,[c,u])}function aE(e){const t=e.load||zg,i=e.imageExtent,n=e.crossOrigin??null;return()=>{const s=new Image;return s.crossOrigin=n,t(s,e.url).then(r=>{const o=pt(i)/r.width,a=Bt(i)/r.height;return{image:r,extent:i,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class lE extends sE{constructor(t){const i=t.crossOrigin!==void 0?t.crossOrigin:null,n=t.imageLoadFunction!==void 0?t.imageLoadFunction:rE;super({attributions:t.attributions,interpolate:t.interpolate,projection:pe(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new Ac(this.imageExtent_,void 0,1,aE({url:t.url,imageExtent:t.imageExtent,crossOrigin:i,load:(s,r)=>(this.image.setImage(s),n(this.image,r),zg(s))})),this.image.addEventListener(it.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,i,n,s){return un(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}class cE extends mr{constructor(t){t=t||{},super(t)}}class hE extends ep{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const i=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,s=t.viewState,r=s.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(i.extent!==void 0&&(l=Ee(l,hi(i.extent,s.projection))),!a[ce.ANIMATING]&&!a[ce.INTERACTING]&&!qn(l))if(o){const c=s.projection,h=o.getImage(l,r,n,c);h&&(this.loadImage(h)?this.image=h:h.getState()===$.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),s=he(i.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!ta(r,s))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=pt(o),c=Math.floor(a.width*((s[0]-o[0])/l));if(c<0||c>=a.width)return null;const h=Bt(o),u=Math.floor(a.height*((o[3]-s[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(t,i){const n=this.image,s=n.getExtent(),r=n.getResolution(),[o,a]=Array.isArray(r)?r:[r,r],l=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,u=t.viewState,d=u.center,f=u.resolution,g=h*o/(f*l),p=h*a/(f*l);this.prepareContainer(t,i);const m=this.context.canvas.width,_=this.context.canvas.height,y=this.getRenderContext(t);let w=!1,b=!0;if(c.extent){const A=hi(c.extent,u.projection);b=un(A,t.extent),w=b&&!xo(A,t.extent),w&&this.clipUnrotated(y,t,A)}const E=n.getImage(),R=Xn(this.tempTransform,m/2,_/2,g,p,0,l*(s[0]-d[0])/o,l*(d[1]-s[3])/a);this.renderedResolution=a*h/l;const S=E.width*R[0],T=E.height*R[3];if(this.getLayer().getSource().getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,t),b&&S>=.5&&T>=.5){const A=R[4],I=R[5],k=c.opacity;k!==1&&(y.save(),y.globalAlpha=k),y.drawImage(E,0,0,+E.width,+E.height,A,I,S,T),k!==1&&y.restore()}return this.postRender(this.context,t),w&&y.restore(),y.imageSmoothingEnabled=!0,this.container}}class uE extends cE{constructor(t){super(t)}createRenderer(){return new hE(this)}getData(t){return super.getData(t)}}const Er=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},dE={name:"MapContainer",components:{},props:{},mounted(){const e=new lE({url:"http://localhost:5173/vue-map-app/src/data/map/NEP_2023.png",imageExtent:[-849.77,4862430787e-3,629354.408,5308029701e-3]});new e1({target:this.$refs["map-root"],layers:[new k1({source:new eE}),new uE({source:e})],view:new Ke({zoom:7.5,center:[239298.956079,5043620874369e-6],constrainResolution:!0})})}},fE={ref:"map-root",style:{width:"100%",height:"100%"}};function gE(e,t,i,n,s,r){return hr(),Zf("div",fE,null,512)}const pE=Er(dE,[["render",gE]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function vr(e){return e+.5|0}const Ii=(e,t,i)=>Math.max(Math.min(e,i),t);function Es(e){return Ii(vr(e*2.55),0,255)}function Oi(e){return Ii(vr(e*255),0,255)}function li(e){return Ii(vr(e/2.55)/100,0,1)}function Bu(e){return Ii(vr(e*100),0,100)}const Te={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ll=[..."0123456789ABCDEF"],mE=e=>Ll[e&15],_E=e=>Ll[(e&240)>>4]+Ll[e&15],Nr=e=>(e&240)>>4===(e&15),yE=e=>Nr(e.r)&&Nr(e.g)&&Nr(e.b)&&Nr(e.a);function xE(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Te[e[1]]*17,g:255&Te[e[2]]*17,b:255&Te[e[3]]*17,a:t===5?Te[e[4]]*17:255}:(t===7||t===9)&&(i={r:Te[e[1]]<<4|Te[e[2]],g:Te[e[3]]<<4|Te[e[4]],b:Te[e[5]]<<4|Te[e[6]],a:t===9?Te[e[7]]<<4|Te[e[8]]:255})),i}const bE=(e,t)=>e<255?t(e):"";function EE(e){var t=yE(e)?mE:_E;return e?"#"+t(e.r)+t(e.g)+t(e.b)+bE(e.a,t):void 0}const vE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cp(e,t,i){const n=t*Math.min(i,1-i),s=(r,o=(r+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function wE(e,t,i){const n=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function TE(e,t,i){const n=cp(e,1,.5);let s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function RE(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function Gc(e){const i=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(i,n,s),o=Math.min(i,n,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=RE(i,n,s,h,r),l=l*60+.5),[l|0,c||0,a]}function Yc(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Oi)}function Kc(e,t,i){return Yc(cp,e,t,i)}function CE(e,t,i){return Yc(TE,e,t,i)}function ME(e,t,i){return Yc(wE,e,t,i)}function hp(e){return(e%360+360)%360}function SE(e){const t=vE.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?Es(+t[5]):Oi(+t[5]));const s=hp(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=CE(s,r,o):t[1]==="hsv"?n=ME(s,r,o):n=Kc(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}function IE(e,t){var i=Gc(e);i[0]=hp(i[0]+t),i=Kc(i),e.r=i[0],e.g=i[1],e.b=i[2]}function AE(e){if(!e)return;const t=Gc(e),i=t[0],n=Bu(t[1]),s=Bu(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${li(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const ju={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Wu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function PE(){const e={},t=Object.keys(Wu),i=Object.keys(ju);let n,s,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],s=0;s<i.length;s++)r=i[s],a=a.replace(r,ju[r]);r=parseInt(Wu[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let zr;function LE(e){zr||(zr=PE(),zr.transparent=[0,0,0,0]);const t=zr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const OE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function DE(e){const t=OE.exec(e);let i=255,n,s,r;if(t){if(t[7]!==n){const o=+t[7];i=t[8]?Es(o):Ii(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?Es(n):Ii(n,0,255)),s=255&(t[4]?Es(s):Ii(s,0,255)),r=255&(t[6]?Es(r):Ii(r,0,255)),{r:n,g:s,b:r,a:i}}}function kE(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${li(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ga=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,wn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function FE(e,t,i){const n=wn(li(e.r)),s=wn(li(e.g)),r=wn(li(e.b));return{r:Oi(Ga(n+i*(wn(li(t.r))-n))),g:Oi(Ga(s+i*(wn(li(t.g))-s))),b:Oi(Ga(r+i*(wn(li(t.b))-r))),a:e.a+i*(t.a-e.a)}}function Br(e,t,i){if(e){let n=Gc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=Kc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function up(e,t){return e&&Object.assign(t||{},e)}function Hu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Oi(e[3]))):(t=up(e,{r:0,g:0,b:0,a:1}),t.a=Oi(t.a)),t}function NE(e){return e.charAt(0)==="r"?DE(e):SE(e)}class Qs{constructor(t){if(t instanceof Qs)return t;const i=typeof t;let n;i==="object"?n=Hu(t):i==="string"&&(n=xE(t)||LE(t)||NE(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=up(this._rgb);return t&&(t.a=li(t.a)),t}set rgb(t){this._rgb=Hu(t)}rgbString(){return this._valid?kE(this._rgb):void 0}hexString(){return this._valid?EE(this._rgb):void 0}hslString(){return this._valid?AE(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,s=t.rgb;let r;const o=i===r?.5:i,a=2*o-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*s.r+.5,n.g=255&c*n.g+r*s.g+.5,n.b=255&c*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=FE(this._rgb,t._rgb,i)),this}clone(){return new Qs(this.rgb)}alpha(t){return this._rgb.a=Oi(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=vr(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Br(this._rgb,2,t),this}darken(t){return Br(this._rgb,2,-t),this}saturate(t){return Br(this._rgb,1,t),this}desaturate(t){return Br(this._rgb,1,-t),this}rotate(t){return IE(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ei(){}const zE=(()=>{let e=0;return()=>e++})();function It(e){return e==null}function zt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function mt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ae(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ue(e,t){return Ae(e)?e:t}function ut(e,t){return typeof e>"u"?t:e}const BE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Tt(e,t,i,n){let s,r,o;if(zt(e))for(r=e.length,s=0;s<r;s++)t.call(i,e[s],s);else if(mt(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])}function Lo(e,t){let i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],r=t[i],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Oo(e){if(zt(e))return e.map(Oo);if(mt(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let s=0;for(;s<n;++s)t[i[s]]=Oo(e[i[s]]);return t}return e}function dp(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function jE(e,t,i,n){if(!dp(e))return;const s=t[e],r=i[e];mt(s)&&mt(r)?tr(s,r,n):t[e]=Oo(r)}function tr(e,t,i){const n=zt(t)?t:[t],s=n.length;if(!mt(e))return e;i=i||{};const r=i.merger||jE;let o;for(let a=0;a<s;++a){if(o=n[a],!mt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,i)}return e}function Ds(e,t){return tr(e,t,{merger:WE})}function WE(e,t,i){if(!dp(e))return;const n=t[e],s=i[e];mt(n)&&mt(s)?Ds(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Oo(s))}const Uu={"":e=>e,x:e=>e.x,y:e=>e.y};function HE(e){const t=e.split("."),i=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function UE(e){const t=HE(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function Yn(e,t){return(Uu[t]||(Uu[t]=UE(t)))(e)}function $c(e){return e.charAt(0).toUpperCase()+e.slice(1)}const er=e=>typeof e<"u",Fi=e=>typeof e=="function",Vu=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function VE(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const jt=Math.PI,qe=2*jt,XE=qe+jt,Do=Number.POSITIVE_INFINITY,GE=jt/180,ke=jt/2,Xi=jt/4,Xu=jt*2/3,Ol=Math.log10,Je=Math.sign;function ks(e,t,i){return Math.abs(e-t)<i}function Gu(e){const t=Math.round(e);e=ks(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(Ol(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function YE(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,r)=>s-r).pop(),t}function ir(e){return!isNaN(parseFloat(e))&&isFinite(e)}function KE(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function $E(e,t,i){let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function tn(e){return e*(jt/180)}function ZE(e){return e*(180/jt)}function Yu(e){if(!Ae(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function qE(e,t){const i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*jt&&(r+=qe),{angle:r,distance:s}}function Dl(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function JE(e,t){return(e-t+XE)%qe-jt}function wi(e){return(e%qe+qe)%qe}function fp(e,t,i,n){const s=wi(e),r=wi(t),o=wi(i),a=wi(r-s),l=wi(o-s),c=wi(s-r),h=wi(s-o);return s===r||s===o||n&&r===o||a>l&&c<h}function ve(e,t,i){return Math.max(t,Math.min(i,e))}function QE(e){return ve(e,-32768,32767)}function en(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Zc(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}const nn=(e,t,i,n)=>Zc(e,i,n?s=>{const r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),tv=(e,t,i)=>Zc(e,i,n=>e[n][t]>=i);function ev(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}const gp=["push","pop","shift","splice","unshift"];function iv(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),gp.forEach(i=>{const n="_onData"+$c(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function Ku(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(gp.forEach(r=>{delete e[r]}),delete e._chartjs)}function pp(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const mp=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function _p(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,mp.call(window,()=>{n=!1,e.apply(t,i)}))}}function nv(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const qc=e=>e==="start"?"left":e==="end"?"right":"center",Yt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,sv=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function rv(e,t,i){const n=t.length;let s=0,r=n;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(s=ve(Math.min(nn(a,l,c).lo,i?n:nn(t,l,o.getPixelForValue(c)).lo),0,n-1)),d?r=ve(Math.max(nn(a,o.axis,h,!0).hi+1,i?0:nn(t,l,o.getPixelForValue(h),!0).hi+1),s,n)-s:r=n-s}return{start:s,count:r}}function ov(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),r}const jr=e=>e===0||e===1,$u=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*qe/i)),Zu=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*qe/i)+1,Fs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ke)+1,easeOutSine:e=>Math.sin(e*ke),easeInOutSine:e=>-.5*(Math.cos(jt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>jr(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>jr(e)?e:$u(e,.075,.3),easeOutElastic:e=>jr(e)?e:Zu(e,.075,.3),easeInOutElastic(e){return jr(e)?e:e<.5?.5*$u(e*2,.1125,.45):.5+.5*Zu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Fs.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Fs.easeInBounce(e*2)*.5:Fs.easeOutBounce(e*2-1)*.5+.5};function Jc(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function qu(e){return Jc(e)?e:new Qs(e)}function Ya(e){return Jc(e)?e:new Qs(e).saturate(.5).darken(.1).hexString()}const av=["x","y","borderWidth","radius","tension"],lv=["color","borderColor","backgroundColor"];function cv(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:lv},numbers:{type:"number",properties:av}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function hv(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ju=new Map;function uv(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Ju.get(i);return n||(n=new Intl.NumberFormat(e,t),Ju.set(i,n)),n}function yp(e,t,i){return uv(t,i).format(e)}const xp={values(e){return zt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let s,r=e;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=dv(e,i)}const o=Ol(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),yp(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(Ol(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?xp.numeric.call(this,e,t,i):""}};function dv(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var bp={formatters:xp};function fv(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const cn=Object.create(null),kl=Object.create(null);function Ns(e,t){if(!t)return e;const i=t.split(".");for(let n=0,s=i.length;n<s;++n){const r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function Ka(e,t,i){return typeof t=="string"?tr(Ns(e,t),i):tr(Ns(e,""),t)}class gv{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Ya(s.backgroundColor),this.hoverBorderColor=(n,s)=>Ya(s.borderColor),this.hoverColor=(n,s)=>Ya(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Ka(this,t,i)}get(t){return Ns(this,t)}describe(t,i){return Ka(kl,t,i)}override(t,i){return Ka(cn,t,i)}route(t,i,n,s){const r=Ns(this,t),o=Ns(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=o[s];return mt(l)?Object.assign({},c,l):ut(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var Dt=new gv({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cv,hv,fv]);function pv(e){return!e||It(e.size)||It(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Qu(e,t,i,n,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n}function Gi(e,t,i){const n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function td(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Fl(e,t,i,n){Ep(e,t,i,n,null)}function Ep(e,t,i,n,s){let r,o,a,l,c,h,u,d;const f=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*GE;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:s?e.ellipse(i,n,s/2,p,0,0,qe):e.arc(i,n,p,0,qe),e.closePath();break;case"triangle":h=s?s/2:p,e.moveTo(i+Math.sin(m)*h,n-Math.cos(m)*p),m+=Xu,e.lineTo(i+Math.sin(m)*h,n-Math.cos(m)*p),m+=Xu,e.lineTo(i+Math.sin(m)*h,n-Math.cos(m)*p),e.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+Xi)*l,u=Math.cos(m+Xi)*(s?s/2-c:l),a=Math.sin(m+Xi)*l,d=Math.sin(m+Xi)*(s?s/2-c:l),e.arc(i-u,n-a,c,m-jt,m-ke),e.arc(i+d,n-o,c,m-ke,m),e.arc(i+u,n+a,c,m,m+ke),e.arc(i-d,n+o,c,m+ke,m+jt),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,h=s?s/2:l,e.rect(i-h,n-l,2*h,2*l);break}m+=Xi;case"rectRot":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),e.moveTo(i-u,n-a),e.lineTo(i+d,n-o),e.lineTo(i+u,n+a),e.lineTo(i-d,n+o),e.closePath();break;case"crossRot":m+=Xi;case"cross":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-o),e.lineTo(i-d,n+o);break;case"star":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-o),e.lineTo(i-d,n+o),m+=Xi,u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-o),e.lineTo(i-d,n+o);break;case"line":o=s?s/2:Math.cos(m)*p,a=Math.sin(m)*p,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(m)*(s?s/2:p),n+Math.sin(m)*p);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function nr(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Qc(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function th(e){e.restore()}function mv(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function _v(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function yv(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),It(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function xv(e,t,i,n,s){if(s.strikethrough||s.underline){const r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function bv(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function sr(e,t,i,n,s,r={}){const o=zt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,yv(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&bv(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),It(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,i,n,r.maxWidth)),e.fillText(c,i,n,r.maxWidth),xv(e,i,n,c,r),n+=Number(s.lineHeight);e.restore()}function ko(e,t){const{x:i,y:n,w:s,h:r,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,1.5*jt,jt,!0),e.lineTo(i,n+r-o.bottomLeft),e.arc(i+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,jt,ke,!0),e.lineTo(i+s-o.bottomRight,n+r),e.arc(i+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,ke,0,!0),e.lineTo(i+s,n+o.topRight),e.arc(i+s-o.topRight,n+o.topRight,o.topRight,0,-ke,!0),e.lineTo(i+o.topLeft,n)}const Ev=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wv(e,t){const i=(""+e).match(Ev);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const Tv=e=>+e||0;function vp(e,t){const i={},n=mt(t),s=n?Object.keys(t):t,r=mt(e)?n?o=>ut(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)i[o]=Tv(r(o));return i}function wp(e){return vp(e,{top:"y",right:"x",bottom:"y",left:"x"})}function jn(e){return vp(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Pe(e){const t=wp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Jt(e,t){e=e||{},t=t||Dt.font;let i=ut(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=ut(e.style,t.style);n&&!(""+n).match(vv)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:ut(e.family,t.family),lineHeight:wv(ut(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:ut(e.weight,t.weight),string:""};return s.string=pv(s),s}function Wr(e,t,i,n){let s,r,o;for(s=0,r=e.length;s<r;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function Rv(e,t,i){const{min:n,max:s}=e,r=BE(t,(s-n)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function fn(e,t){return Object.assign(Object.create(e),t)}function eh(e,t=[""],i,n,s=()=>e[0]){const r=i||e;typeof n>"u"&&(n=Mp("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:a=>eh([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Rp(a,l,()=>Ov(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return id(a).includes(l)},ownKeys(a){return id(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Kn(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Tp(e,n),setContext:r=>Kn(e,r,i,n),override:r=>Kn(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Rp(r,o,()=>Mv(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Tp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:Fi(i)?i:()=>i,isIndexable:Fi(n)?n:()=>n}}const Cv=(e,t)=>e?e+$c(t):t,ih=(e,t)=>mt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Rp(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=i();return e[t]=n,n}function Mv(e,t,i){const{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=e;let a=n[t];return Fi(a)&&o.isScriptable(t)&&(a=Sv(t,a,e,i)),zt(a)&&a.length&&(a=Iv(t,a,e,o.isIndexable)),ih(t,a)&&(a=Kn(a,s,r&&r[t],o)),a}function Sv(e,t,i,n){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),ih(e,l)&&(l=nh(s._scopes,s,e,l)),l}function Iv(e,t,i,n){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(mt(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=nh(c,s,e,h);t.push(Kn(u,r,o&&o[e],a))}}return t}function Cp(e,t,i){return Fi(e)?e(t,i):e}const Av=(e,t)=>e===!0?t:typeof e=="string"?Yn(t,e):void 0;function Pv(e,t,i,n,s){for(const r of t){const o=Av(i,r);if(o){e.add(o);const a=Cp(o._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n<"u"&&i!==n)return null}return!1}function nh(e,t,i,n){const s=t._rootScopes,r=Cp(t._fallback,i,n),o=[...e,...s],a=new Set;a.add(n);let l=ed(a,o,i,r||i,n);return l===null||typeof r<"u"&&r!==i&&(l=ed(a,o,r,l,n),l===null)?!1:eh(Array.from(a),[""],s,r,()=>Lv(t,i,n))}function ed(e,t,i,n,s){for(;i;)i=Pv(e,t,i,n,s);return i}function Lv(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];return zt(s)&&mt(i)?i:s||{}}function Ov(e,t,i,n){let s;for(const r of t)if(s=Mp(Cv(r,e),i),typeof s<"u")return ih(e,s)?nh(i,n,e,s):s}function Mp(e,t){for(const i of t){if(!i)continue;const n=i[e];if(typeof n<"u")return n}}function id(e){let t=e._keys;return t||(t=e._keys=Dv(e._scopes)),t}function Dv(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}const kv=Number.EPSILON||1e-14,$n=(e,t)=>t<e.length&&!e[t].skip&&e[t],Sp=e=>e==="x"?"y":"x";function Fv(e,t,i,n){const s=e.skip?t:e,r=t,o=i.skip?t:i,a=Dl(r,s),l=Dl(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=n*c,d=n*h;return{previous:{x:r.x-u*(o.x-s.x),y:r.y-u*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Nv(e,t,i){const n=e.length;let s,r,o,a,l,c=$n(e,0);for(let h=0;h<n-1;++h)if(l=c,c=$n(e,h+1),!(!l||!c)){if(ks(t[h],0,kv)){i[h]=i[h+1]=0;continue}s=i[h]/t[h],r=i[h+1]/t[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[h]=s*o*t[h],i[h+1]=r*o*t[h])}}function zv(e,t,i="x"){const n=Sp(i),s=e.length;let r,o,a,l=$n(e,0);for(let c=0;c<s;++c){if(o=a,a=l,l=$n(e,c+1),!a)continue;const h=a[i],u=a[n];o&&(r=(h-o[i])/3,a[`cp1${i}`]=h-r,a[`cp1${n}`]=u-r*t[c]),l&&(r=(l[i]-h)/3,a[`cp2${i}`]=h+r,a[`cp2${n}`]=u+r*t[c])}}function Bv(e,t="x"){const i=Sp(t),n=e.length,s=Array(n).fill(0),r=Array(n);let o,a,l,c=$n(e,0);for(o=0;o<n;++o)if(a=l,l=c,c=$n(e,o+1),!!l){if(c){const h=c[t]-l[t];s[o]=h!==0?(c[i]-l[i])/h:0}r[o]=a?c?Je(s[o-1])!==Je(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Nv(e,s,r),zv(e,r,t)}function Hr(e,t,i){return Math.max(Math.min(e,i),t)}function jv(e,t){let i,n,s,r,o,a=nr(e[0],t);for(i=0,n=e.length;i<n;++i)o=r,r=a,a=i<n-1&&nr(e[i+1],t),r&&(s=e[i],o&&(s.cp1x=Hr(s.cp1x,t.left,t.right),s.cp1y=Hr(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Hr(s.cp2x,t.left,t.right),s.cp2y=Hr(s.cp2y,t.top,t.bottom)))}function Wv(e,t,i,n,s){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Bv(e,s);else{let c=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=Fv(c,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&jv(e,i)}function sh(){return typeof window<"u"&&typeof document<"u"}function rh(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Fo(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const pa=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Hv(e,t){return pa(e).getPropertyValue(t)}const Uv=["top","right","bottom","left"];function on(e,t,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const r=Uv[s];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Vv=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function Xv(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:r}=n;let o=!1,a,l;if(Vv(s,r,e.target))a=s,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function $i(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,s=pa(i),r=s.boxSizing==="border-box",o=on(s,"padding"),a=on(s,"border","width"),{x:l,y:c,box:h}=Xv(e,i),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/f*i.width/n),y:Math.round((c-d)/g*i.height/n)}}function Gv(e,t,i){let n,s;if(t===void 0||i===void 0){const r=e&&rh(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const o=r.getBoundingClientRect(),a=pa(r),l=on(a,"border","width"),c=on(a,"padding");t=o.width-c.width-l.width,i=o.height-c.height-l.height,n=Fo(a.maxWidth,r,"clientWidth"),s=Fo(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||Do,maxHeight:s||Do}}const Ur=e=>Math.round(e*10)/10;function Yv(e,t,i,n){const s=pa(e),r=on(s,"margin"),o=Fo(s.maxWidth,e,"clientWidth")||Do,a=Fo(s.maxHeight,e,"clientHeight")||Do,l=Gv(e,t,i);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const d=on(s,"border","width"),f=on(s,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?c/n:h-r.height),c=Ur(Math.min(c,o,l.maxWidth)),h=Ur(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ur(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=Ur(Math.floor(h*n))),{width:c,height:h}}function nd(e,t,i){const n=t||1,s=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=n,o.height=s,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Kv=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};sh()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function sd(e,t){const i=Hv(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Zi(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function $v(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function Zv(e,t,i,n){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Zi(e,s,i),a=Zi(s,r,i),l=Zi(r,t,i),c=Zi(o,a,i),h=Zi(a,l,i);return Zi(c,h,i)}const qv=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},Jv=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Wn(e,t,i){return e?qv(t,i):Jv()}function Ip(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Ap(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Pp(e){return e==="angle"?{between:fp,compare:JE,normalize:wi}:{between:en,compare:(t,i)=>t-i,normalize:t=>t}}function rd({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function Qv(e,t,i){const{property:n,start:s,end:r}=i,{between:o,normalize:a}=Pp(n),l=t.length;let{start:c,end:h,loop:u}=e,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(t[c%l][n]),s,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:e.style}}function tw(e,t,i){if(!i)return[e];const{property:n,start:s,end:r}=i,o=t.length,{compare:a,between:l,normalize:c}=Pp(n),{start:h,end:u,loop:d,style:f}=Qv(e,t,i),g=[];let p=!1,m=null,_,y,w;const b=()=>l(s,w,_)&&a(s,w)!==0,E=()=>a(r,_)===0||l(r,w,_),R=()=>p||b(),S=()=>!p||E();for(let T=h,A=h;T<=u;++T)y=t[T%o],!y.skip&&(_=c(y[n]),_!==w&&(p=l(_,s,r),m===null&&R()&&(m=a(_,s)===0?T:A),m!==null&&S()&&(g.push(rd({start:m,end:T,loop:d,count:o,style:f})),m=null),A=T,w=_));return m!==null&&g.push(rd({start:m,end:u,loop:d,count:o,style:f})),g}function ew(e,t){const i=[],n=e.segments;for(let s=0;s<n.length;s++){const r=tw(n[s],e.points,t);r.length&&i.push(...r)}return i}function iw(e,t,i,n){let s=0,r=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function nw(e,t,i,n){const s=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=i;++l){const c=e[l%s];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%s,end:(l-1)%s,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%s,end:o%s,loop:n}),r}function sw(e,t){const i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];const r=!!e._loop,{start:o,end:a}=iw(i,s,r,n);if(n===!0)return od(e,[{start:o,end:a,loop:r}],i,t);const l=a<o?a+s:a,c=!!e._fullLoop&&o===0&&a===s-1;return od(e,nw(i,o,l,c),i,t)}function od(e,t,i,n){return!n||!n.setContext||!i?t:rw(e,t,i,n)}function rw(e,t,i,n){const s=e._chart.getContext(),r=ad(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,c=[];let h=r,u=t[0].start,d=u;function f(g,p,m,_){const y=a?-1:1;if(g!==p){for(g+=l;i[g%l].skip;)g-=y;for(;i[p%l].skip;)p+=y;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:_}),h=_,u=p%l)}}for(const g of t){u=a?u:g.start;let p=i[u%l],m;for(d=u+1;d<=g.end;d++){const _=i[d%l];m=ad(n.setContext(fn(s,{type:"segment",p0:p,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),ow(m,h)&&f(u,d-1,g.loop,h),p=_,h=m}u<d-1&&f(u,d-1,g.loop,h)}return c}function ad(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ow(e,t){if(!t)return!1;const i=[],n=function(s,r){return Jc(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class aw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){const r=i.listeners[s],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=mp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ni=new aw;const ld="transparent",lw={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=qu(e||ld),s=n.valid&&qu(t||ld);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class cw{constructor(t,i,n,s){const r=i[n];s=Wr([t.to,s,r,t.from]);const o=Wr([t.from,r,s]);this._active=!0,this._fn=t.fn||lw[t.type||typeof o],this._easing=Fs[t.easing]||Fs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Wr([t.to,i,s,t.from]),this._from=Wr([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=r;return}l=i/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class Lp{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!mt(t))return;const i=Object.keys(Dt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!mt(r))return;const o={};for(const a of i)o[a]=r[a];(zt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){const n=i.options,s=uw(t,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&hw(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){const n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}const h=i[c];let u=r[c];const d=n.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new cw(d,t,c,h),s.push(u)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return ni.add(this._chart,n),!0}}function hw(e,t){const i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const r=e[n[s]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function uw(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function cd(e,t){const i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function dw(e,t,i){if(i===!1)return!1;const n=cd(e,i),s=cd(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function fw(e){let t,i,n,s;return mt(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function Op(e,t){const i=[],n=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=n.length;s<r;++s)i.push(n[s].index);return i}function hd(e,t,i,n={}){const s=e.keys,r=n.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===i){if(h=!0,n.all)continue;break}c=e.values[l],Ae(c)&&(r||t===0||Je(t)===Je(c))&&(t+=c)}return!h&&!n.all?0:t}function gw(e,t){const{iScale:i,vScale:n}=t,s=i.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:e[h]};return a}function $a(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function pw(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function mw(e){const{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function _w(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function ud(e,t,i,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const r=e[s.index];if(i&&r>0||!i&&r<0)return s.index}return null}function dd(e,t){const{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,h=pw(r,o,n),u=t.length;let d;for(let f=0;f<u;++f){const g=t[f],{[l]:p,[c]:m}=g,_=g._stacks||(g._stacks={});d=_[c]=_w(s,h,p),d[a]=m,d._top=ud(d,o,!0,n.type),d._bottom=ud(d,o,!1,n.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function Za(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function yw(e,t){return fn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function xw(e,t,i){return fn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function cs(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}const qa=e=>e==="reset"||e==="none",fd=(e,t)=>t?e:Object.assign({},e),bw=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Op(i,!0),values:null};class Hn{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$a(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&cs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,r=i.xAxisID=ut(n.xAxisID,Za(t,"x")),o=i.yAxisID=ut(n.yAxisID,Za(t,"y")),a=i.rAxisID=ut(n.rAxisID,Za(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,r,o,a),h=i.vAxisID=s(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ku(this._data,this),t._stacked&&cs(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(mt(i)){const s=this._cachedMeta;this._data=gw(i,s)}else if(n!==i){if(n){Ku(n,this);const s=this._cachedMeta;cs(s),s._parsed=[]}i&&Object.isExtensible(i)&&iv(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=i._stacked;i._stacked=$a(i.vScale,i),i.stack!==n.stack&&(s=!0,cs(i),i.stack=n.stack),this._resyncElements(t),(s||r!==i._stacked)&&(dd(this,i._parsed),i._stacked=$a(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,u,d;if(this._parsing===!1)n._parsed=s,n._sorted=!0,d=s;else{zt(s[t])?d=this.parseArrayData(n,s,t,i):mt(s[t])?d=this.parseObjectData(n,s,t,i):d=this.parsePrimitiveData(n,s,t,i);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<i;++h)n._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);n._sorted=l}o&&dd(this,d)}parsePrimitiveData(t,i,n,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(s);let d,f,g;for(d=0,f=s;d<f;++d)g=d+n,u[d]={[a]:h||r.parse(c[g],g),[l]:o.parse(i[g],g)};return u}parseArrayData(t,i,n,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+n,u=i[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,i,n,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,u,d,f;for(h=0,u=s;h<u;++h)d=h+n,f=i[d],c[h]={x:r.parse(Yn(f,a),d),y:o.parse(Yn(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const s=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:Op(s,!0),values:i._stacks[t.axis]._visualValues};return hd(a,o,r.index,{mode:n})}updateRangeFromParsed(t,i,n,s){const r=n[i.axis];let o=r===null?NaN:r;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,o=hd(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,o=s.length,a=this._getOtherScale(t),l=bw(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=mw(a);let d,f;function g(){f=s[d];const p=f[a.axis];return!Ae(f[t.axis])||h>p||u<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let s,r,o;for(s=0,r=i.length;s<r;++s)o=i[s][t.axis],Ae(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,s=i.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=fw(ut(this.options.clip,dw(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=s[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=xw(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=yw(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const s=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&er(n);if(a)return fd(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(Dt.elements[t]),g=()=>this.getContext(n,s,i),p=c.resolveNamedOptions(d,f,g,u);return p.$shared&&(p.$shared=l,r[o]=Object.freeze(fd(p,l))),p}_resolveAnimations(t,i,n){const s=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,i),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,n,i))}const c=new Lp(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||qa(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(i,r)||r!==s;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:o}}updateElement(t,i,n,s){qa(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!qa(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;const r=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,r=i.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,i,n=!0){const s=this._cachedMeta,r=s.data,o=t+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=o;a--)c[a]=c[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(r,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,i);n._stacked&&cs(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}tt(Hn,"defaults",{}),tt(Hn,"datasetElementType",null),tt(Hn,"dataElementType",null);function Ew(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let s=0,r=i.length;s<r;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=pp(n.sort((s,r)=>s-r))}return e._cache.$bar}function vw(e){const t=e.iScale,i=Ew(t,e.type);let n=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(er(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(s=0,r=i.length;s<r;++s)o=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return n}function ww(e,t,i,n){const s=i.barThickness;let r,o;return It(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function Tw(e,t,i,n){const s=t.pixels,r=s[e];let o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:i.barPercentage,start:c}}function Rw(e,t,i,n){const s=i.parse(e[0],n),r=i.parse(e[1],n),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function Dp(e,t,i,n){return zt(e)?Rw(e,t,i,n):t[i.axis]=i.parse(e,n),t}function gd(e,t,i,n){const s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,u,d;for(c=i,h=i+n;c<h;++c)d=t[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(Dp(d,u,r,c));return l}function Ja(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Cw(e,t,i){return e!==0?Je(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function Mw(e){let t,i,n,s,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:i,end:n,reverse:t,top:s,bottom:r}}function Sw(e,t,i,n){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Mw(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=h:(r[pd(h,o,a,l)]=!0,s=c)),r[pd(s,o,a,l)]=!0,e.borderSkipped=r}function pd(e,t,i,n){return n?(e=Iw(e,t,i),e=md(e,i,t)):e=md(e,t,i),e}function Iw(e,t,i){return e===t?i:e===i?t:e}function md(e,t,i){return e==="start"?t:e==="end"?i:e}function Aw(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class no extends Hn{parsePrimitiveData(t,i,n,s){return gd(t,i,n,s)}parseArrayData(t,i,n,s){return gd(t,i,n,s)}parseObjectData(t,i,n,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,g,p;for(d=n,f=n+s;d<f;++d)p=i[d],g={},g[r.axis]=r.parse(Yn(p,c),d),u.push(Dp(Yn(p,h),g,o,d));return u}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);const r=n._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:n,vScale:s}=i,r=this.getParsed(t),o=r._custom,a=Ja(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(i,s);for(let f=i;f<i+n;f++){const g=this.getParsed(f),p=r||It(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,h),_=(g._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!_||Ja(g._custom)||o===_._top||o===_._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(y.options=u||this.resolveDataElementOptions(f,t[f].active?"active":s));const w=y.options||t[f].options;Sw(y,w,_,o),Aw(y,w,h.ratio),this.updateElement(t[f],f,y,s)}}_getStacks(t,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(i),l=a&&a[n.axis],c=h=>{const u=h._parsed.find(f=>f[n.axis]===l),d=u&&u[h.vScale.axis];if(It(d)||isNaN(d))return!0};for(const h of s)if(!(i!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){const s=this._getStacks(t,n),r=i!==void 0?s.indexOf(i):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,i=this._cachedMeta,n=i.iScale,s=[];let r,o;for(r=0,o=i.data.length;r<o;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||vw(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=Ja(c);let u=l[i.axis],d=0,f=n?this.applyStack(i,l,n):u,g,p;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&Je(u)!==Je(c.barEnd)&&(d=0),d+=u);const m=!It(r)&&!h?r:d;let _=i.getPixelForValue(m);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(d+f):g=_,p=g-_,Math.abs(p)<o){p=Cw(p,i,a)*o,u===a&&(_-=p/2);const y=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),b=Math.min(y,w),E=Math.max(y,w);_=Math.max(Math.min(_,E),b),g=_+p,n&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(_))}if(_===i.getPixelForValue(a)){const y=Je(p)*i.getLineWidthForValue(a)/2;_+=y,p-=y}return{size:p,base:_,head:g,center:g+p/2}}_calculateBarIndexPixels(t,i){const n=i.scale,s=this.options,r=s.skipNull,o=ut(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=r?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?Tw(t,i,s,c):ww(t,i,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length;let r=0;for(;r<s;++r)this.getParsed(r)[i.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}tt(no,"id","bar"),tt(no,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),tt(no,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class so extends Hn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=rv(i,s,o);this._drawStart=a,this._drawCount=l,ov(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,i,n,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(i,s),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=ir(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||s==="none",y=i+n,w=t.length;let b=i>0&&this.getParsed(i-1);for(let E=0;E<w;++E){const R=t[E],S=_?R:{};if(E<i||E>=y){S.skip=!0;continue}const T=this.getParsed(E),A=It(T[f]),I=S[d]=o.getPixelForValue(T[d],E),k=S[f]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[f],E);S.skip=isNaN(I)||isNaN(k)||A,S.stop=E>0&&Math.abs(T[d]-b[d])>m,p&&(S.parsed=T,S.raw=c.data[E]),u&&(S.options=h||this.resolveDataElementOptions(E,R.active?"active":s)),_||this.updateElement(R,E,S,s),b=T}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}tt(so,"id","line"),tt(so,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),tt(so,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Yi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oh{constructor(t){tt(this,"options");this.options=t||{}}static override(t){Object.assign(oh.prototype,t)}init(){}formats(){return Yi()}parse(){return Yi()}format(){return Yi()}add(){return Yi()}diff(){return Yi()}startOf(){return Yi()}endOf(){return Yi()}}var Pw={_date:oh};function Lw(e,t,i,n){const{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?tv:nn;if(n){if(s._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const u=l(r,t,i-h),d=l(r,t,i+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function wr(e,t,i,n,s){const r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=Lw(r[a],t,o,s);for(let f=u;f<=d;++f){const g=h[f];g.skip||n(g,c,f)}}}function Ow(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){const r=t?Math.abs(n.x-s.x):0,o=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Qa(e,t,i,n,s){const r=[];return!s&&!e.isPointInArea(t)||wr(e,i,t,function(a,l,c){!s&&!nr(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Dw(e,t,i,n){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:u}=qE(o,{x:t.x,y:t.y});fp(u,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return wr(e,i,t,r),s}function kw(e,t,i,n,s,r){let o=[];const a=Ow(i);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,s);if(n&&!f)return;const g=h.getCenterPoint(s);if(!(!!r||e.isPointInArea(g))&&!f)return;const m=a(t,g);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return wr(e,i,t,c),o}function tl(e,t,i,n,s,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?Dw(e,t,i,s):kw(e,t,i,n,s,r)}function _d(e,t,i,n,s){const r=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return wr(e,i,t,(l,c,h)=>{l[o]&&l[o](t[i],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:r}var Fw={evaluateInteractionItems:wr,modes:{index(e,t,i,n){const s=$i(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Qa(e,s,r,n,o):tl(e,s,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,i,n){const s=$i(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Qa(e,s,r,n,o):tl(e,s,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,i,n){const s=$i(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Qa(e,s,r,n,o)},nearest(e,t,i,n){const s=$i(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return tl(e,s,r,i.intersect,n,o)},x(e,t,i,n){const s=$i(t,e);return _d(e,s,"x",i.intersect,n)},y(e,t,i,n){const s=$i(t,e);return _d(e,s,"y",i.intersect,n)}}};const kp=["left","top","right","bottom"];function hs(e,t){return e.filter(i=>i.pos===t)}function yd(e,t){return e.filter(i=>kp.indexOf(i.pos)===-1&&i.box.axis===t)}function us(e,t){return e.sort((i,n)=>{const s=t?n:i,r=t?i:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Nw(e){const t=[];let i,n,s,r,o,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function zw(e){const t={};for(const i of e){const{stack:n,pos:s,stackWeight:r}=i;if(!n||!kp.includes(s))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Bw(e,t){const i=zw(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=i[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return i}function jw(e){const t=Nw(e),i=us(t.filter(c=>c.box.fullSize),!0),n=us(hs(t,"left"),!0),s=us(hs(t,"right")),r=us(hs(t,"top"),!0),o=us(hs(t,"bottom")),a=yd(t,"x"),l=yd(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:hs(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function xd(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Fp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ww(e,t,i,n){const{pos:s,box:r}=i,o=e.maxPadding;if(!mt(s)){i.size&&(e[s]-=i.size);const u=n[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?r.height:r.width),i.size=u.size/u.count,e[s]+=i.size}r.getPadding&&Fp(o,r.getPadding());const a=Math.max(0,t.outerWidth-xd(o,e,"left","right")),l=Math.max(0,t.outerHeight-xd(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function Hw(e){const t=e.maxPadding;function i(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function Uw(e,t){const i=t.maxPadding;function n(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return n(e?["left","right"]:["top","bottom"])}function vs(e,t,i,n){const s=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Uw(a.horizontal,t));const{same:u,other:d}=Ww(t,i,a,n);c|=u&&s.length,h=h||d,l.fullSize||s.push(a)}return c&&vs(s,t,i,n)||h}function Vr(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function bd(e,t,i,n){const s=i.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;er(c.start)&&(o=c.start),l.fullSize?Vr(l,s.left,o,i.outerWidth-s.right-s.left,d):Vr(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,d=c.size||l.width;er(c.start)&&(r=c.start),l.fullSize?Vr(l,r,s.top,d,i.outerHeight-s.bottom-s.top):Vr(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var Me={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const s=Pe(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),a=jw(e.boxes),l=a.vertical,c=a.horizontal;Tt(e.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},s);Fp(d,Pe(n));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),g=Bw(l.concat(c),u);vs(a.fullSize,f,u,g),vs(l,f,u,g),vs(c,f,u,g)&&vs(l,f,u,g),Hw(f),bd(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,bd(a.rightAndBottom,f,u,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Tt(a.chartArea,p=>{const m=p.box;Object.assign(m,e.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Np{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}}class Vw extends Np{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ro="$chartjs",Xw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ed=e=>e===null||e==="";function Gw(e,t){const i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[ro]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Ed(s)){const r=sd(e,"width");r!==void 0&&(e.width=r)}if(Ed(n))if(e.style.height==="")e.height=e.width/(t||2);else{const r=sd(e,"height");r!==void 0&&(e.height=r)}return e}const zp=Kv?{passive:!0}:!1;function Yw(e,t,i){e&&e.addEventListener(t,i,zp)}function Kw(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,zp)}function $w(e,t){const i=Xw[e.type]||e.type,{x:n,y:s}=$i(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function No(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Zw(e,t,i){const n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||No(a.addedNodes,n),o=o&&!No(a.removedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function qw(e,t,i){const n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||No(a.removedNodes,n),o=o&&!No(a.addedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const rr=new Map;let vd=0;function Bp(){const e=window.devicePixelRatio;e!==vd&&(vd=e,rr.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Jw(e,t){rr.size||window.addEventListener("resize",Bp),rr.set(e,t)}function Qw(e){rr.delete(e),rr.size||window.removeEventListener("resize",Bp)}function tT(e,t,i){const n=e.canvas,s=n&&rh(n);if(!s)return;const r=_p((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),Jw(e,r),o}function el(e,t,i){i&&i.disconnect(),t==="resize"&&Qw(e)}function eT(e,t,i){const n=e.canvas,s=_p(r=>{e.ctx!==null&&i($w(r,e))},e);return Yw(n,t,s),s}class iT extends Np{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(Gw(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[ro])return!1;const n=i[ro].initial;["height","width"].forEach(r=>{const o=n[r];It(o)?i.removeAttribute(r):i.setAttribute(r,o)});const s=n.style||{};return Object.keys(s).forEach(r=>{i.style[r]=s[r]}),i.width=i.width,delete i[ro],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const s=t.$proxies||(t.$proxies={}),o={attach:Zw,detach:qw,resize:tT}[i]||eT;s[i]=o(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:el,detach:el,resize:el}[i]||Kw)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return Yv(t,i,n,s)}isAttached(t){const i=t&&rh(t);return!!(i&&i.isConnected)}}function nT(e){return!sh()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Vw:iT}var qr;let ji=(qr=class{constructor(){tt(this,"x");tt(this,"y");tt(this,"active",!1);tt(this,"options");tt(this,"$animations")}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return ir(this.x)&&ir(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}},tt(qr,"defaults",{}),tt(qr,"defaultRoutes"),qr);function sT(e,t){const i=e.options.ticks,n=rT(e),s=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?aT(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return lT(t,c,r,o/s),c;const h=oT(r,t,s);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Xr(t,c,h,It(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Xr(t,c,h,r[u],r[u+1]);return Xr(t,c,h,l,It(f)?t.length:l+f),c}return Xr(t,c,h),c}function rT(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function oT(e,t,i){const n=cT(e),s=t.length/i;if(!n)return Math.max(s,1);const r=YE(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function aT(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function lT(e,t,i,n){let s=0,r=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}function Xr(e,t,i,n,s){const r=ut(n,0),o=Math.min(ut(s,e.length),e.length);let a=0,l,c,h;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),h=r;h<0;)a++,h=Math.round(r+a*i);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*i))}function cT(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const hT=e=>e==="left"?"right":e==="right"?"left":e,wd=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,Td=(e,t)=>Math.min(t||e,e);function Rd(e,t){const i=[],n=e.length/t,s=e.length;let r=0;for(;r<s;r+=n)i.push(e[Math.floor(r)]);return i}function uT(e,t,i){const n=e.ticks.length,s=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function dT(e,t){Tt(e,i=>{const n=i.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete i.data[n[r]];n.splice(0,s)}})}function ds(e){return e.drawTicks?e.tickLength:0}function Cd(e,t){if(!e.display)return 0;const i=Jt(e.font,t),n=Pe(e.padding);return(zt(e.text)?e.text.length:1)*i.lineHeight+n.height}function fT(e,t){return fn(e,{scale:t,type:"scale"})}function gT(e,t,i){return fn(e,{tick:i,index:t,type:"tick"})}function pT(e,t,i){let n=qc(e);return(i&&t!=="right"||!i&&t==="right")&&(n=hT(n)),n}function mT(e,t,i,n){const{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let u=0,d,f,g;const p=o-s,m=a-r;if(e.isHorizontal()){if(f=Yt(n,r,a),mt(i)){const _=Object.keys(i)[0],y=i[_];g=h[_].getPixelForValue(y)+p-t}else i==="center"?g=(c.bottom+c.top)/2+p-t:g=wd(e,i,t);d=a-r}else{if(mt(i)){const _=Object.keys(i)[0],y=i[_];f=h[_].getPixelForValue(y)-m+t}else i==="center"?f=(c.left+c.right)/2-m+t:f=wd(e,i,t);g=Yt(n,o,s),u=i==="left"?-ke:ke}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class ts extends ji{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Ue(t,Number.POSITIVE_INFINITY),i=Ue(i,Number.NEGATIVE_INFINITY),n=Ue(n,Number.POSITIVE_INFINITY),s=Ue(s,Number.NEGATIVE_INFINITY),{min:Ue(t,n),max:Ue(i,s),minDefined:Ae(t),maxDefined:Ae(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,o.min)),r||(n=Math.max(n,o.max));return i=r&&i>n?n:i,n=s&&i>n?i:n,{min:Ue(i,Ue(n,i)),max:Ue(n,Ue(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rv(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Rd(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=At(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=Td(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,r=i.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!i.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=ve(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),u+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-ds(t.grid)-i.padding-Cd(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=ZE(Math.min(Math.asin(ve((h.highest.height+6)/a,-1,1)),Math.asin(ve(l/c,-1,1))-Math.asin(ve(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Cd(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=ds(r)+l):(t.height=this.maxHeight,t.width=ds(r)+l),n.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=n.padding*2,g=tn(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const _=n.mirror?0:m*u.width+p*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=n.mirror?0:p*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,h,m,p)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*t.width,f=n*i.height):(d=n*t.height,f=s*i.width):r==="start"?f=i.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=i.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=i.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=i.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)It(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Rd(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/Td(i,n));let c=0,h=0,u,d,f,g,p,m,_,y,w,b,E;for(u=0;u<i;u+=l){if(g=t[u].label,p=this._resolveTickFontOptions(u),s.font=m=p.string,_=r[m]=r[m]||{data:{},gc:[]},y=p.lineHeight,w=b=0,!It(g)&&!zt(g))w=Qu(s,_.data,_.gc,w,g),b=y;else if(zt(g))for(d=0,f=g.length;d<f;++d)E=g[d],!It(E)&&!zt(E)&&(w=Qu(s,_.data,_.gc,w,E),b+=y);o.push(w),a.push(b),c=Math.max(w,c),h=Math.max(b,h)}dT(r,i);const R=o.indexOf(c),S=a.indexOf(h),T=A=>({width:o[A]||0,height:a[A]||0});return{first:T(0),last:T(i-1),widest:T(R),highest:T(S),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return QE(this._alignToPixels?Gi(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=gT(this.getContext(),t,n))}return this.$context||(this.$context=fT(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=tn(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=ds(r),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,_=function(X){return Gi(n,X,p)};let y,w,b,E,R,S,T,A,I,k,N,V;if(o==="top")y=_(this.bottom),S=this.bottom-d,A=y-m,k=_(t.top)+m,V=t.bottom;else if(o==="bottom")y=_(this.top),k=t.top,V=_(t.bottom)-m,S=y+m,A=this.top+d;else if(o==="left")y=_(this.right),R=this.right-d,T=y-m,I=_(t.left)+m,N=t.right;else if(o==="right")y=_(this.left),I=t.left,N=_(t.right)-m,R=y+m,T=this.left+d;else if(i==="x"){if(o==="center")y=_((t.top+t.bottom)/2+.5);else if(mt(o)){const X=Object.keys(o)[0],j=o[X];y=_(this.chart.scales[X].getPixelForValue(j))}k=t.top,V=t.bottom,S=y+m,A=S+d}else if(i==="y"){if(o==="center")y=_((t.left+t.right)/2);else if(mt(o)){const X=Object.keys(o)[0],j=o[X];y=_(this.chart.scales[X].getPixelForValue(j))}R=y-m,T=R-d,I=t.left,N=t.right}const Q=ut(s.ticks.maxTicksLimit,u),W=Math.max(1,Math.ceil(u/Q));for(w=0;w<u;w+=W){const X=this.getContext(w),j=r.setContext(X),Y=a.setContext(X),at=j.lineWidth,q=j.color,J=Y.dash||[],ot=Y.dashOffset,lt=j.tickWidth,xt=j.tickColor,bt=j.tickBorderDash||[],ct=j.tickBorderDashOffset;b=uT(this,w,l),b!==void 0&&(E=Gi(n,b,at),c?R=T=I=N=E:S=A=k=V=E,f.push({tx1:R,ty1:S,tx2:T,ty2:A,x1:I,y1:k,x2:N,y2:V,width:at,color:q,borderDash:J,borderDashOffset:ot,tickWidth:lt,tickColor:xt,tickBorderDash:bt,tickBorderDashOffset:ct}))}return this._ticksLength=u,this._borderValue=y,f}_computeLabelItems(t){const i=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=ds(n.grid),f=d+h,g=u?-h:f,p=-tn(this.labelRotation),m=[];let _,y,w,b,E,R,S,T,A,I,k,N,V="middle";if(s==="top")R=this.bottom-g,S=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+g,S=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(d);S=W.textAlign,E=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(d);S=W.textAlign,E=W.x}else if(i==="x"){if(s==="center")R=(t.top+t.bottom)/2+f;else if(mt(s)){const W=Object.keys(s)[0],X=s[W];R=this.chart.scales[W].getPixelForValue(X)+f}S=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")E=(t.left+t.right)/2-f;else if(mt(s)){const W=Object.keys(s)[0],X=s[W];E=this.chart.scales[W].getPixelForValue(X)}S=this._getYAxisLabelAlignment(d).textAlign}i==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const Q=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){w=a[_],b=w.label;const W=r.setContext(this.getContext(_));T=this.getPixelForTick(_)+r.labelOffset,A=this._resolveTickFontOptions(_),I=A.lineHeight,k=zt(b)?b.length:1;const X=k/2,j=W.color,Y=W.textStrokeColor,at=W.textStrokeWidth;let q=S;o?(E=T,S==="inner"&&(_===y-1?q=this.options.reverse?"left":"right":_===0?q=this.options.reverse?"right":"left":q="center"),s==="top"?c==="near"||p!==0?N=-k*I+I/2:c==="center"?N=-Q.highest.height/2-X*I+I:N=-Q.highest.height+I/2:c==="near"||p!==0?N=I/2:c==="center"?N=Q.highest.height/2-X*I:N=Q.highest.height-k*I,u&&(N*=-1),p!==0&&!W.showLabelBackdrop&&(E+=I/2*Math.sin(p))):(R=T,N=(1-k)*I/2);let J;if(W.showLabelBackdrop){const ot=Pe(W.backdropPadding),lt=Q.heights[_],xt=Q.widths[_];let bt=N-ot.top,ct=0-ot.left;switch(V){case"middle":bt-=lt/2;break;case"bottom":bt-=lt;break}switch(S){case"center":ct-=xt/2;break;case"right":ct-=xt;break;case"inner":_===y-1?ct-=xt:_>0&&(ct-=xt/2);break}J={left:ct,top:bt,width:xt+ot.width,height:lt+ot.height,color:W.backdropColor}}m.push({label:b,font:A,textOffset:N,options:{rotation:p,color:j,strokeColor:Y,strokeWidth:at,textAlign:q,textBaseline:V,translation:[E,R],backdrop:J}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-tn(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return i==="left"?s?(h=this.right+r,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):i==="right"?s?(h=this.left+r,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:s,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(r=0,o=s.length;r<o;++r){const l=s[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=Gi(t,this.left,o)-o/2,h=Gi(t,this.right,a)+a/2,u=d=l):(u=Gi(t,this.top,o)-o/2,d=Gi(t,this.bottom,a)+a/2,c=h=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(c,u),i.lineTo(h,d),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Qc(n,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;sr(n,c,0,h,l,a)}s&&th(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const r=Jt(n.font),o=Pe(n.padding),a=n.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||mt(i)?(l+=o.bottom,zt(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=mT(this,l,i,a);sr(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:pT(a,i,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=ut(t.grid&&t.grid.z,-1),s=ut(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ts.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return Jt(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gr{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;xT(i)&&(n=this.register(i));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,_T(t,o,n),this.override&&Dt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in Dt[s]&&(delete Dt[s][n],this.override&&delete cn[n])}}function _T(e,t,i){const n=tr(Object.create(null),[i?Dt.get(i):{},Dt.get(t),e.defaults]);Dt.set(t,n),e.defaultRoutes&&yT(t,e.defaultRoutes),e.descriptors&&Dt.describe(t,e.descriptors)}function yT(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),s=n.pop(),r=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");Dt.route(r,s,l,a)})}function xT(e){return"id"in e&&"defaults"in e}class bT{constructor(){this.controllers=new Gr(Hn,"datasets",!0),this.elements=new Gr(ji,"elements"),this.plugins=new Gr(Object,"plugins"),this.scales=new Gr(ts,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{const r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Tt(s,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){const s=$c(t);At(n["before"+s],[],n),i[t](n),At(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Ge=new bT;class ET{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,s){s=s||{};for(const r of t){const o=r.plugin,a=o[n],l=[i,s,r.options];if(At(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){It(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,s=ut(n.options&&n.options.plugins,{}),r=vT(n);return s===!1&&!i?[]:TT(t,r,s,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}}function vT(e){const t={},i=[],n=Object.keys(Ge.plugins.items);for(let r=0;r<n.length;r++)i.push(Ge.getPlugin(n[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function wT(e,t){return!t&&e===!1?null:e===!0?{}:e}function TT(e,{plugins:t,localIds:i},n,s){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=wT(n[l],s);c!==null&&r.push({plugin:a,options:RT(e.config,{plugin:a,local:i[l]},c,o)})}return r}function RT(e,{plugin:t,local:i},n,s){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nl(e,t){const i=Dt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function CT(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function MT(e,t){return e===t?"_index_":"_value_"}function Md(e){if(e==="x"||e==="y"||e==="r")return e}function ST(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function zl(e,...t){if(Md(e))return e;for(const i of t){const n=i.axis||ST(i.position)||e.length>1&&Md(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Sd(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function IT(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return Sd(e,"x",i[0])||Sd(e,"y",i[0])}return{}}function AT(e,t){const i=cn[e.type]||{scales:{}},n=t.scales||{},s=Nl(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!mt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=zl(o,a,IT(o,e),Dt.scales[a.type]),c=MT(l,s),h=i.scales||{};r[o]=Ds(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Nl(a,t),h=(cn[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=CT(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Ds(r[f],[{axis:d},n[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ds(a,[Dt.scales[a.type],Dt.scale])}),r}function jp(e){const t=e.options||(e.options={});t.plugins=ut(t.plugins,{}),t.scales=AT(e,t)}function Wp(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function PT(e){return e=e||{},e.data=Wp(e.data),jp(e),e}const Id=new Map,Hp=new Set;function Yr(e,t){let i=Id.get(e);return i||(i=t(),Id.set(e,i),Hp.add(i)),i}const fs=(e,t,i)=>{const n=Yn(t,i);n!==void 0&&e.add(n)};class LT{constructor(t){this._config=PT(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Wp(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),jp(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Yr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Yr(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Yr(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return Yr(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){const{options:s,type:r}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;const l=new Set;i.forEach(h=>{t&&(l.add(t),h.forEach(u=>fs(l,t,u))),h.forEach(u=>fs(l,s,u)),h.forEach(u=>fs(l,cn[r]||{},u)),h.forEach(u=>fs(l,Dt,u)),h.forEach(u=>fs(l,kl,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Hp.has(i)&&o.set(i,c),c}chartOptionScopes(){const{options:t,type:i}=this;return[t,cn[i]||{},Dt.datasets[i]||{},{type:i},Dt,kl]}resolveNamedOptions(t,i,n,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ad(this._resolverCache,t,s);let l=o;if(DT(o,i)){r.$shared=!1,n=Fi(n)?n():n;const c=this.createResolver(t,n,a);l=Kn(o,n,c)}for(const c of i)r[c]=l[c];return r}createResolver(t,i,n=[""],s){const{resolver:r}=Ad(this._resolverCache,t,n);return mt(i)?Kn(r,i,void 0,s):r}}function Ad(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const s=i.join();let r=n.get(s);return r||(r={resolver:eh(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,r)),r}const OT=e=>mt(e)&&Object.getOwnPropertyNames(e).some(t=>Fi(e[t]));function DT(e,t){const{isScriptable:i,isIndexable:n}=Tp(e);for(const s of t){const r=i(s),o=n(s),a=(o||r)&&e[s];if(r&&(Fi(a)||OT(a))||o&&zt(a))return!0}return!1}var kT="4.4.7";const FT=["top","bottom","left","right","chartArea"];function Pd(e,t){return e==="top"||e==="bottom"||FT.indexOf(e)===-1&&t==="x"}function Ld(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Od(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),At(i&&i.onComplete,[e],t)}function NT(e){const t=e.chart,i=t.options.animation;At(i&&i.onProgress,[e],t)}function Up(e){return sh()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const oo={},Dd=e=>{const t=Up(e);return Object.values(oo).filter(i=>i.canvas===t).pop()};function zT(e,t,i){const n=Object.keys(e);for(const s of n){const r=+s;if(r>=t){const o=e[s];delete e[s],(i>0||r>t)&&(e[r+i]=o)}}}function BT(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function Kr(e,t,i){return e.options.clip?e[i]:t[i]}function jT(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:Kr(i,t,"left"),right:Kr(i,t,"right"),top:Kr(n,t,"top"),bottom:Kr(n,t,"bottom")}:t}var bi;let es=(bi=class{static register(...t){Ge.add(...t),kd()}static unregister(...t){Ge.remove(...t),kd()}constructor(t,i){const n=this.config=new LT(i),s=Up(t),r=Dd(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||nT(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=zE(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ET,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nv(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],oo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",Od),ni.listen(this,"progress",NT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:r}=this;return It(t)?i&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ge}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return td(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(t,i){ni.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,i,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nd(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Tt(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const a=i[o],l=zl(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Tt(r,o=>{const a=o.options,l=a.id,c=zl(l,a),h=ut(a.type,o.dtype);(a.position===void 0||Pd(a.position,c)!==Pd(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;if(l in n&&n[l].type===h)u=n[l];else{const d=Ge.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),Tt(s,(o,a)=>{o||delete n[a]}),Tt(n,o=>{Me.configure(this,o,o.options),Me.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(Ld("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const r=i[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||Nl(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=Ge.getController(a),{datasetElementType:c,dataElementType:h}=Dt.datasets[a];Object.assign(l,{dataElementType:Ge.getElement(h),datasetElementType:c&&Ge.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!s&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||Tt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ld("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Tt(this.scales,t=>{Me.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Vu(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of i){const o=n==="_removeElements"?-r:r;zT(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<i;r++)if(!Vu(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Me.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Tt(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,Fi(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),Od({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let s,r;for(s=0,r=i.length;s<r;++s){const o=i[s];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,s=!n.disabled,r=jT(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&Qc(i,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),t.controller.draw(),s&&th(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return nr(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){const r=Fw.modes[i];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let s=n.filter(r=>r&&r._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=fn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const s=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);er(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ni.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),td(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete oo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Tt(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Tt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Tt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const s=n?"set":"remove";let r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Lo(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(i,t),a=n?t:r(t,i);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const r=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:s=[],options:r}=this,o=i,a=this._getActiveElements(t,s,n,o),l=VE(t),c=BT(t,this._lastEvent,n,l);n&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const h=!Lo(a,s);return(h||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,h}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},tt(bi,"defaults",Dt),tt(bi,"instances",oo),tt(bi,"overrides",cn),tt(bi,"registry",Ge),tt(bi,"version",kT),tt(bi,"getChart",Dd),bi);function kd(){return Tt(es.instances,e=>e._plugins.invalidate())}function Vp(e,t,i=t){e.lineCap=ut(i.borderCapStyle,t.borderCapStyle),e.setLineDash(ut(i.borderDash,t.borderDash)),e.lineDashOffset=ut(i.borderDashOffset,t.borderDashOffset),e.lineJoin=ut(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ut(i.borderWidth,t.borderWidth),e.strokeStyle=ut(i.borderColor,t.borderColor)}function WT(e,t,i){e.lineTo(i.x,i.y)}function HT(e){return e.stepped?mv:e.tension||e.cubicInterpolationMode==="monotone"?_v:WT}function Xp(e,t,i={}){const n=e.length,{start:s=0,end:r=n-1}=i,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!h?n+c-l:c-l}}function UT(e,t,i,n){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Xp(s,i,n),h=HT(r);let{move:u=!0,reverse:d}=n||{},f,g,p;for(f=0;f<=c;++f)g=s[(a+(d?c-f:f))%o],!g.skip&&(u?(e.moveTo(g.x,g.y),u=!1):h(e,p,g,d,r.stepped),p=g);return l&&(g=s[(a+(d?c:0))%o],h(e,p,g,d,r.stepped)),!!l}function VT(e,t,i,n){const s=t.points,{count:r,start:o,ilen:a}=Xp(s,i,n),{move:l=!0,reverse:c}=n||{};let h=0,u=0,d,f,g,p,m,_;const y=b=>(o+(c?a-b:b))%r,w=()=>{p!==m&&(e.lineTo(h,m),e.lineTo(h,p),e.lineTo(h,_))};for(l&&(f=s[y(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const b=f.x,E=f.y,R=b|0;R===g?(E<p?p=E:E>m&&(m=E),h=(u*h+b)/++u):(w(),e.lineTo(b,E),g=R,u=0,p=m=E),_=E}w()}function Bl(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?VT:UT}function XT(e){return e.stepped?$v:e.tension||e.cubicInterpolationMode==="monotone"?Zv:Zi}function GT(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),Vp(e,t.options),e.stroke(s)}function YT(e,t,i,n){const{segments:s,options:r}=t,o=Bl(t);for(const a of s)Vp(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}const KT=typeof Path2D=="function";function $T(e,t,i,n){KT&&!t.options.segment?GT(e,t,i,n):YT(e,t,i,n)}class ws extends ji{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;Wv(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=sw(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){const n=this.options,s=t[i],r=this.points,o=ew(this,{property:i,start:s,end:s});if(!o.length)return;const a=[],l=XT(n);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=r[u],g=r[d];if(f===g){a.push(f);continue}const p=Math.abs((s-f[i])/(g[i]-f[i])),m=l(f,g,p,n.stepped);m[i]=t[i],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,i,n){return Bl(this)(t,this,i,n)}path(t,i,n){const s=this.segments,r=Bl(this);let o=this._loop;i=i||0,n=n||this.points.length-i;for(const a of s)o&=r(t,this,a,{start:i,end:i+n-1});return!!o}draw(t,i,n,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),$T(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}tt(ws,"id","line"),tt(ws,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),tt(ws,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),tt(ws,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Fd(e,t,i,n){const s=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<s.radius+s.hitRadius}class ao extends ji{constructor(i){super();tt(this,"parsed");tt(this,"skip");tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(i-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(i,n){return Fd(this,i,"x",n)}inYRange(i,n){return Fd(this,i,"y",n)}getCenterPoint(i){const{x:n,y:s}=this.getProps(["x","y"],i);return{x:n,y:s}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);const s=n&&i.borderWidth||0;return(n+s)*2}draw(i,n){const s=this.options;this.skip||s.radius<.1||!nr(this,n,this.size(s)/2)||(i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.fillStyle=s.backgroundColor,Fl(i,s,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}tt(ao,"id","point"),tt(ao,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),tt(ao,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Gp(e,t){const{x:i,y:n,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,h,u;return e.horizontal?(u=o/2,a=Math.min(i,s),l=Math.max(i,s),c=n-u,h=n+u):(u=r/2,a=i-u,l=i+u,c=Math.min(n,s),h=Math.max(n,s)),{left:a,top:c,right:l,bottom:h}}function Ai(e,t,i,n){return e?0:ve(t,i,n)}function ZT(e,t,i){const n=e.options.borderWidth,s=e.borderSkipped,r=wp(n);return{t:Ai(s.top,r.top,0,i),r:Ai(s.right,r.right,0,t),b:Ai(s.bottom,r.bottom,0,i),l:Ai(s.left,r.left,0,t)}}function qT(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=jn(s),o=Math.min(t,i),a=e.borderSkipped,l=n||mt(s);return{topLeft:Ai(!l||a.top||a.left,r.topLeft,0,o),topRight:Ai(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Ai(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ai(!l||a.bottom||a.right,r.bottomRight,0,o)}}function JT(e){const t=Gp(e),i=t.right-t.left,n=t.bottom-t.top,s=ZT(e,i/2,n/2),r=qT(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function il(e,t,i,n){const s=t===null,r=i===null,a=e&&!(s&&r)&&Gp(e,n);return a&&(s||en(t,a.left,a.right))&&(r||en(i,a.top,a.bottom))}function QT(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function tR(e,t){e.rect(t.x,t.y,t.w,t.h)}function nl(e,t,i={}){const n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}class zs extends ji{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=JT(this),a=QT(o.radius)?ko:tR;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,nl(o,i,r)),t.clip(),a(t,nl(r,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,nl(r,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return il(this,t,i,n)}inXRange(t,i){return il(this,t,null,i)}inYRange(t,i){return il(this,null,t,i)}getCenterPoint(t){const{x:i,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+s)/2:i,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}tt(zs,"id","bar"),tt(zs,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),tt(zs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Nd=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},eR=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class zd extends ji{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=At(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=Jt(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Nd(n,r);let c,h;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((g,p)=>{const m=n+i/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(p>0?0:1)]=0,f+=h,d++),l[p]={left:0,top:f,row:d,width:m,height:s},c[c.length-1]+=m+a}),u}_fitCols(t,i,n,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,_)=>{const{itemWidth:y,itemHeight:w}=iR(n,i,r,m,s);_>0&&f+w+2*a>h&&(u+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[_]={left:g,top:f,col:p,width:y,height:w},d=Math.max(d,y),f+=w+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Wn(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Yt(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Yt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Yt(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Yt(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Qc(t,this),this._draw(),th(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,a=Dt.color,l=Wn(t.rtl,this.left,this.width),c=Jt(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=Nd(o,u),_=function(R,S,T){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;s.save();const A=ut(T.lineWidth,1);if(s.fillStyle=ut(T.fillStyle,a),s.lineCap=ut(T.lineCap,"butt"),s.lineDashOffset=ut(T.lineDashOffset,0),s.lineJoin=ut(T.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=ut(T.strokeStyle,a),s.setLineDash(ut(T.lineDash,[])),o.usePointStyle){const I={radius:p*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},k=l.xPlus(R,g/2),N=S+d;Ep(s,I,k,N,o.pointStyleWidth&&g)}else{const I=S+Math.max((u-p)/2,0),k=l.leftForLtr(R,g),N=jn(T.borderRadius);s.beginPath(),Object.values(N).some(V=>V!==0)?ko(s,{x:k,y:I,w:g,h:p,radius:N}):s.rect(k,I,g,p),s.fill(),A!==0&&s.stroke()}s.restore()},y=function(R,S,T){sr(s,T.text,R,S+m/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?f={x:Yt(r,this.left+h,this.right-n[0]),y:this.top+h+b,line:0}:f={x:this.left+h,y:Yt(r,this.top+b+h,this.bottom-i[0].height),line:0},Ip(this.ctx,t.textDirection);const E=m+h;this.legendItems.forEach((R,S)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const T=s.measureText(R.text).width,A=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),I=g+d+T;let k=f.x,N=f.y;l.setWidth(this.width),w?S>0&&k+I+h>this.right&&(N=f.y+=E,f.line++,k=f.x=Yt(r,this.left+h,this.right-n[f.line])):S>0&&N+E>this.bottom&&(k=f.x=k+i[f.line].width+h,f.line++,N=f.y=Yt(r,this.top+b+h,this.bottom-i[f.line].height));const V=l.x(k);if(_(V,N,R),k=sv(A,k+g+d,w?k+I:this.right,t.rtl),y(l.x(k),N,R),w)f.x+=I+h;else if(typeof R.text!="string"){const Q=c.lineHeight;f.y+=Yp(R,Q)+h}else f.y+=E}),Ap(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=Jt(i.font),s=Pe(i.padding);if(!i.display)return;const r=Wn(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Yt(t.align,u,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);h=c+Yt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=Yt(a,u,u+d);o.textAlign=r.textAlign(qc(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,sr(o,i.text,f,h,n)}_computeTitleHeight(){const t=this.options.title,i=Jt(t.font),n=Pe(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,r;if(en(t,this.left,this.right)&&en(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],en(t,s.left,s.left+s.width)&&en(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!rR(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=eR(s,n);s&&!r&&At(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&At(i.onHover,[t,n,this],this)}else n&&At(i.onClick,[t,n,this],this)}}function iR(e,t,i,n,s){const r=nR(n,e,t,i),o=sR(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function nR(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+n.measureText(s).width}function sR(e,t,i){let n=e;return typeof t.text!="string"&&(n=Yp(t,i)),n}function Yp(e,t){const i=e.text?e.text.length:0;return t*i}function rR(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ah={id:"legend",_element:zd,start(e,t,i){const n=e.legend=new zd({ctx:e.ctx,options:i,chart:e});Me.configure(e,n,i),Me.addBox(e,n)},stop(e){Me.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;Me.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),h=Pe(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Kp extends ji{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const s=zt(n.text)?n.text.length:1;this._padding=Pe(n.padding);const r=s*Jt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Yt(a,n,r),u=i+t,c=r-n):(o.position==="left"?(h=n+t,u=Yt(a,s,i),l=jt*-.5):(h=r-t,u=Yt(a,i,s),l=jt*.5),c=s-i),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=Jt(i.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);sr(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:qc(i.align),textBaseline:"middle",translation:[o,a]})}}function oR(e,t){const i=new Kp({ctx:e.ctx,options:t,chart:e});Me.configure(e,i,t),Me.addBox(e,i),e.titleBlock=i}var lh={id:"title",_element:Kp,start(e,t,i){oR(e,i)},stop(e){const t=e.titleBlock;Me.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;Me.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ts={average(e){if(!e.length)return!1;let t,i,n=new Set,s=0,r=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),s+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Dl(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Ve(e,t){return t&&(zt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function si(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function aR(e,t){const{element:i,datasetIndex:n,index:s}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Bd(e,t){const i=e.chart.ctx,{body:n,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Jt(t.bodyFont),c=Jt(t.titleFont),h=Jt(t.footerFont),u=r.length,d=s.length,f=n.length,g=Pe(t.padding);let p=g.height,m=0,_=n.reduce((b,E)=>b+E.before.length+E.lines.length+E.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const b=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*b+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(p+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let y=0;const w=function(b){m=Math.max(m,i.measureText(b).width+y)};return i.save(),i.font=c.string,Tt(e.title,w),i.font=l.string,Tt(e.beforeBody.concat(e.afterBody),w),y=t.displayColors?o+2+t.boxPadding:0,Tt(n,b=>{Tt(b.before,w),Tt(b.lines,w),Tt(b.after,w)}),y=0,i.font=h.string,Tt(e.footer,w),i.restore(),m+=g.width,{width:m,height:p}}function lR(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function cR(e,t,i,n){const{x:s,width:r}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function hR(e,t,i,n){const{x:s,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),cR(c,e,t,i)&&(c="center"),c}function jd(e,t,i){const n=i.yAlign||t.yAlign||lR(e,i);return{xAlign:i.xAlign||t.xAlign||hR(e,t,i,n),yAlign:n}}function uR(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function dR(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function Wd(e,t,i,n){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=s+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=jn(o);let g=uR(t,a);const p=dR(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,d)+s:a==="right"&&(g+=Math.max(u,f)+s),{x:ve(g,0,n.width-t.width),y:ve(p,0,n.height-t.height)}}function $r(e,t,i){const n=Pe(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Hd(e){return Ve([],si(e))}function fR(e,t,i){return fn(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Ud(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const $p={beforeTitle:ei,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return It(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function le(e,t,i,n){const s=e[t].call(i,n);return typeof s>"u"?$p[t].call(i,n):s}class jl extends ji{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,r=new Lp(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=fR(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,s=le(n,"beforeTitle",this,t),r=le(n,"title",this,t),o=le(n,"afterTitle",this,t);let a=[];return a=Ve(a,si(s)),a=Ve(a,si(r)),a=Ve(a,si(o)),a}getBeforeBody(t,i){return Hd(le(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,s=[];return Tt(t,r=>{const o={before:[],lines:[],after:[]},a=Ud(n,r);Ve(o.before,si(le(a,"beforeLabel",this,r))),Ve(o.lines,le(a,"label",this,r)),Ve(o.after,si(le(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,i){return Hd(le(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,s=le(n,"beforeFooter",this,t),r=le(n,"footer",this,t),o=le(n,"afterFooter",this,t);let a=[];return a=Ve(a,si(s)),a=Ve(a,si(r)),a=Ve(a,si(o)),a}_createItems(t){const i=this._active,n=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(aR(this.chart,i[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,n))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,n))),Tt(a,h=>{const u=Ud(t.callbacks,h);s.push(le(u,"labelColor",this,h)),r.push(le(u,"labelPointStyle",this,h)),o.push(le(u,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const n=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ts[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=Bd(this,n),c=Object.assign({},a,l),h=jd(this.chart,n,c),u=Wd(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){const r=this.getCaretPosition(t,n,s);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,n){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=jn(a),{x:d,y:f}=t,{width:g,height:p}=i;let m,_,y,w,b,E;return r==="center"?(b=f+p/2,s==="left"?(m=d,_=m-o,w=b+o,E=b-o):(m=d+g,_=m+o,w=b-o,E=b+o),y=m):(s==="left"?_=d+Math.max(l,h)+o:s==="right"?_=d+g-Math.max(c,u)-o:_=this.caretX,r==="top"?(w=f,b=w-o,m=_-o,y=_+o):(w=f+p,b=w+o,m=_+o,y=_-o),E=w),{x1:m,x2:_,x3:y,y1:w,y2:b,y3:E}}drawTitle(t,i,n){const s=this.title,r=s.length;let o,a,l;if(r){const c=Wn(n.rtl,this.x,this.width);for(t.x=$r(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",o=Jt(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,h=Jt(r.bodyFont),u=$r(this,"left",r),d=s.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=i.y+f;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(d,c)+c/2,_=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Fl(t,p,m,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Fl(t,p,m,_)}else{t.lineWidth=mt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const p=s.leftForLtr(d,c),m=s.leftForLtr(s.xPlus(d,1),c-2),_=jn(o.borderRadius);Object.values(_).some(y=>y!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ko(t,{x:p,y:g,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ko(t,{x:m,y:g+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(p,g,c,l),t.strokeRect(p,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(m,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,u=Jt(n.bodyFont);let d=u.lineHeight,f=0;const g=Wn(n.rtl,this.x,this.width),p=function(T){i.fillText(T,g.x(t.x+f),t.y+d/2),t.y+=d+r},m=g.textAlign(o);let _,y,w,b,E,R,S;for(i.textAlign=o,i.textBaseline="middle",i.font=u.string,t.x=$r(this,m,n),i.fillStyle=n.bodyColor,Tt(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+h:c+2+h:0,b=0,R=s.length;b<R;++b){for(_=s[b],y=this.labelTextColors[b],i.fillStyle=y,Tt(_.before,p),w=_.lines,a&&w.length&&(this._drawColorBox(i,t,b,g,n),d=Math.max(u.lineHeight,l)),E=0,S=w.length;E<S;++E)p(w[E]),d=u.lineHeight;Tt(_.after,p)}f=0,d=u.lineHeight,Tt(this.afterBody,p),t.y-=r}drawFooter(t,i,n){const s=this.footer,r=s.length;let o,a;if(r){const l=Wn(n.rtl,this.x,this.width);for(t.x=$r(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",o=Jt(n.footerFont),i.fillStyle=n.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=jn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+u,l),o==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-d,l),i.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+h-g),i.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+f,l+h),i.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const o=Ts[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Bd(this,t),l=Object.assign({},o,this._size),c=jd(i,t,l),h=Wd(t,l,c,i);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Pe(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,i),Ip(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),Ap(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Lo(n,s),o=this._positionChanged(s,i);(r||o)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,n),a=this._positionChanged(o,t),l=i||!Lo(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:n,caretY:s,options:r}=this,o=Ts[r.position].call(this,t,i);return o!==!1&&(n!==o.x||s!==o.y)}}tt(jl,"positioners",Ts);var ch={id:"tooltip",_element:jl,positioners:Ts,afterInit(e,t,i){i&&(e.tooltip=new jl({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$p},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gR=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function pR(e,t,i,n){const s=e.indexOf(t);if(s===-1)return gR(e,t,i,n);const r=e.lastIndexOf(t);return s!==r?i:s}const mR=(e,t)=>e===null?null:ve(Math.round(e),0,t);function Vd(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class or extends ts{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:r}of i)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(It(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:pR(n,t,ut(i,t),this._addedLabels),mR(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=i;o++)s.push({value:o});return s}getLabelForValue(t){return Vd.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}tt(or,"id","category"),tt(or,"defaults",{ticks:{callback:Vd}});function _R(e,t){const i=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=e,f=r||1,g=h-1,{min:p,max:m}=t,_=!It(o),y=!It(a),w=!It(c),b=(m-p)/(u+1);let E=Gu((m-p)/g/f)*f,R,S,T,A;if(E<1e-14&&!_&&!y)return[{value:p},{value:m}];A=Math.ceil(m/E)-Math.floor(p/E),A>g&&(E=Gu(A*E/g/f)*f),It(l)||(R=Math.pow(10,l),E=Math.ceil(E*R)/R),s==="ticks"?(S=Math.floor(p/E)*E,T=Math.ceil(m/E)*E):(S=p,T=m),_&&y&&r&&KE((a-o)/r,E/1e3)?(A=Math.round(Math.min((a-o)/E,h)),E=(a-o)/A,S=o,T=a):w?(S=_?o:S,T=y?a:T,A=c-1,E=(T-S)/A):(A=(T-S)/E,ks(A,Math.round(A),E/1e3)?A=Math.round(A):A=Math.ceil(A));const I=Math.max(Yu(E),Yu(S));R=Math.pow(10,It(l)?I:l),S=Math.round(S*R)/R,T=Math.round(T*R)/R;let k=0;for(_&&(d&&S!==o?(i.push({value:o}),S<o&&k++,ks(Math.round((S+k*E)*R)/R,o,Xd(o,b,e))&&k++):S<o&&k++);k<A;++k){const N=Math.round((S+k*E)*R)/R;if(y&&N>a)break;i.push({value:N})}return y&&d&&T!==a?i.length&&ks(i[i.length-1].value,a,Xd(a,b,e))?i[i.length-1].value=a:i.push({value:a}):(!y||T===a)&&i.push({value:T}),i}function Xd(e,t,{horizontal:i,minRotation:n}){const s=tn(n),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class yR extends ts{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return It(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=i?s:l,a=l=>r=n?r:l;if(t){const l=Je(s),c=Je(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=_R(s,r);return t.bounds==="ticks"&&$E(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return yp(t,this.chart.options.locale,this.options.ticks.format)}}class ar extends yR{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Ae(t)?t:0,this.max=Ae(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=tn(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}tt(ar,"id","linear"),tt(ar,"defaults",{ticks:{callback:bp.formatters.numeric}});const ma={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fe=Object.keys(ma);function Gd(e,t){return e-t}function Yd(e,t){if(It(t))return null;const i=e._adapter,{parser:n,round:s,isoWeekday:r}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),Ae(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(ir(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,s)),+o)}function Kd(e,t,i,n){const s=fe.length;for(let r=fe.indexOf(e);r<s-1;++r){const o=ma[fe[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return fe[r]}return fe[s-1]}function xR(e,t,i,n,s){for(let r=fe.length-1;r>=fe.indexOf(i);r--){const o=fe[r];if(ma[o].common&&e._adapter.diff(s,n,o)>=t-1)return o}return fe[i?fe.indexOf(i):0]}function bR(e){for(let t=fe.indexOf(e)+1,i=fe.length;t<i;++t)if(ma[fe[t]].common)return fe[t]}function $d(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:s}=Zc(i,t),r=i[n]>=t?i[n]:i[s];e[r]=!0}}function ER(e,t,i,n){const s=e._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function Zd(e,t,i){const n=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,n.push({value:a,major:!1});return r===0||!i?n:ER(e,n,s,i)}class zo extends ts{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),s=this._adapter=new Pw._date(t.adapters.date);s.init(i),Ds(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Yd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ae(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),r=Ae(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=ev(s,r,o);return this._unit=i.unit||(n.autoSkip?Kd(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):xR(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:bR(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Zd(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=ve(i,0,o),n=ve(n,0,o),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||Kd(r.minUnit,i,n,this._getLabelCapacity(i)),a=ut(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ir(l)||l===!0,h={};let u=i,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(n,i,o)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<n;d=+t.add(d,a,o),f++)$d(h,d,g);return(d===n||s.bounds==="ticks"||f===1)&&$d(h,d,g),Object.keys(h).sort(Gd).map(p=>+p)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const s=this.options.time.displayFormats,r=this._unit,o=i||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,n,s){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,i,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=n[i],f=c&&u&&d&&d.major;return this._adapter.format(t,s||(f?u:h))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,s=tn(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Zd(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Yd(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return pp(t.sort(Gd))}}tt(zo,"id","time"),tt(zo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Zr(e,t,i){let n=0,s=e.length-1,r,o,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=nn(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=nn(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[s]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class qd extends zo{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Zr(i,this.min),this._tableRange=Zr(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Zr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Zr(this._table,n*this._tableRange+this._minPos,!0)}}tt(qd,"id","timeseries"),tt(qd,"defaults",zo.defaults);const Zp={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},vR={ariaLabel:{type:String},ariaDescribedby:{type:String}},wR={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Zp,...vR},TR=tg[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function Tn(e){return lr(e)?ft(e):e}function RR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return lr(t)?new Proxy(e,{}):e}function CR(e,t){const i=e.options;i&&t&&Object.assign(i,t)}function qp(e,t){e.labels=t}function Jp(e,t,i){const n=[];e.datasets=t.map(s=>{const r=e.datasets.find(o=>o[i]===s[i]);return!r||!s.data||n.includes(r)?{...s}:(n.push(r),Object.assign(r,s),r)})}function MR(e,t){const i={labels:[],datasets:[]};return qp(i,e.labels),Jp(i,e.datasets,t),i}const SR=Cf({props:wR,setup(e,t){let{expose:i,slots:n}=t;const s=jm(null),r=_f(null);i({chart:r});const o=()=>{if(!s.value)return;const{type:c,data:h,options:u,plugins:d,datasetIdKey:f}=e,g=MR(h,f),p=RR(g,h);r.value=new es(s.value,{type:c,data:p,options:{...u},plugins:d})},a=()=>{const c=ft(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return Af(o),nc(a),Qr([()=>e.options,()=>e.data],(c,h)=>{let[u,d]=c,[f,g]=h;const p=ft(r.value);if(!p)return;let m=!1;if(u){const _=Tn(u),y=Tn(f);_&&_!==y&&(CR(p,_),m=!0)}if(d){const _=Tn(d.labels),y=Tn(g.labels),w=Tn(d.datasets),b=Tn(g.datasets);_!==y&&(qp(p.config.data,_),m=!0),w&&w!==b&&(Jp(p.config.data,w,e.datasetIdKey),m=!0)}m&&Ef(()=>{l(p)})},{deep:!0}),()=>pl("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:s},[pl("p",{},[n.default?n.default():""])])}});function Qp(e,t){return es.register(t),Cf({props:Zp,setup(i,n){let{expose:s}=n;const r=_f(null),o=a=>{r.value=a==null?void 0:a.chart};return s({chart:r}),()=>pl(SR,TR({ref:o},{type:e,...i}))}})}const tm=Qp("bar",no),IR=Qp("line",so),Bo={data:[{portcode:64710,Name:"Llan",lat:42.37104,lon:3.16146,kg:19858.449999999993,eu:543569.4000000003},{portcode:64700,Name:"Port de la Selva",lat:42.34149,lon:3.20344,kg:356.75,eu:12982.619999999997},{portcode:64600,Name:"Roses",lat:42.25628,lon:3.18176,kg:25494.50000000002,eu:618064.2699999996},{portcode:64500,Name:"Palams",lat:41.84491,lon:3.12768,kg:23617.97000000002,eu:621233.7600000006},{portcode:64410,Name:"Blanes",lat:41.67523,lon:2.79073,kg:18285.800000000003,eu:422681.3299999995},{portcode:64300,Name:"Arenys de Mar",lat:41.58005,lon:2.55946,kg:8775.129999999997,eu:203301.70999999993},{portcode:64200,Name:"Barcelona",lat:41.36063,lon:2.15793,kg:15328.070000000012,eu:382940.04},{portcode:64100,Name:"Vilanova i la Geltr",lat:41.2163,lon:1.73175,kg:10855.049999999983,eu:361978.0400000005},{portcode:63330,Name:"Torredembarra",lat:41.13504,lon:1.40082,kg:664.0999999999995,eu:23189.800000000007},{portcode:63300,Name:"Tarragona",lat:41.11151,lon:1.24818,kg:14359.300000000014,eu:512473.4700000003},{portcode:63320,Name:"Cambrils",lat:41.06598,lon:1.0615,kg:53.73000000000001,eu:2380.1399999999985},{portcode:63210,Name:"L'Ametlla de Mar",lat:40.88185,lon:.80008,kg:1148.7900000000002,eu:52201.98000000004},{portcode:63220,Name:"L'Ampolla",lat:40.81151,lon:.7094,kg:145.15,eu:5921.69},{portcode:63100,Name:"La Rpita",lat:40.62009,lon:.59658,kg:4158.99,eu:152190.26999999996},{portcode:63110,Name:"Les Cases d'Alcanar",lat:40.55272,lon:.53077,kg:96.74999999999999,eu:4709.549999999999}]};es.register(or,ar,zs,lh,ch,ah);const AR={name:"App",components:{Bar:tm},data(){return{data:{labels:Bo.data.map(e=>e.Name),datasets:[{data:Bo.data.map(e=>e.kg),backgroundColor:"#7BBC8C"}]},options:{responsive:!0,indexAxis:"y",plugins:{legend:{display:!1},title:{display:!0,text:"Species landings by port 2023"}},scales:{x:{title:{text:"Kg",display:!0}}},maintainAspectRatio:!1}}}};function PR(e,t,i,n,s,r){const o=qi("Bar");return hr(),rc(o,{data:s.data,options:s.options},null,8,["data","options"])}const LR=Er(AR,[["render",PR]]),sl={data:[{year:2004,kg:268741.1999999994,eu:6584942436099989e-9},{year:2005,kg:284235.35000000085,eu:7345823698999983e-9},{year:2006,kg:320260.1999999995,eu:8068571510300005e-9},{year:2007,kg:349809.54999999993,eu:822968079449999e-8},{year:2008,kg:309613.79000000004,eu:6765419586699992e-9},{year:2009,kg:401024.0399999999,eu:71960284464e-4},{year:2010,kg:371374.0200000004,eu:6665314762399995e-9},{year:2011,kg:334962.49999999965,eu:6385841540399987e-9},{year:2012,kg:333707.19999999984,eu:5716401833000012e-9},{year:2013,kg:347384.3499999993,eu:5631843572900001e-9},{year:2014,kg:328077.08999999915,eu:6042049726900002e-9},{year:2015,kg:212316.43000000052,eu:4666920201499999e-9},{year:2016,kg:174025.6300000003,eu:3861168834999995e-9},{year:2017,kg:180912.8300000002,eu:4206909641499996e-9},{year:2018,kg:192443.50000000035,eu:4279993389999991e-9},{year:2019,kg:184603.81999999998,eu:4200485569999996e-9},{year:2020,kg:131929.4699999999,eu:3.5038250200000023e6},{year:2021,kg:113409.24000000031,eu:3375226509999995e-9},{year:2022,kg:133354.1699999997,eu:373955560999998e-8},{year:2023,kg:143198.5299999999,eu:3.9198180700000008e6}]};es.register(or,ar,ao,ws,lh,ch,ah);const OR={name:"App",components:{Line:IR},data(){return{data:{labels:sl.data.map(e=>e.year),datasets:[{label:"Kg",data:sl.data.map(e=>e.kg),backgroundColor:"#7BBC8C",borderColor:"#7BBC8C",yAxisID:"y"},{label:"Eu",data:sl.data.map(e=>e.eu),backgroundColor:"#496CAD",borderColor:"#496CAD",yAxisID:"y1"}]},options:{responsive:!0,indexAxis:"x",plugins:{legend:{display:!0,position:"bottom"},title:{text:"Species landings evolution (Catalunya)",display:!0}},scales:{y:{display:!0,title:{text:"Kg",display:!0}},y1:{display:!0,title:{text:"Eu",display:!0},position:"right"}},maintainAspectRatio:!1}}}};function DR(e,t,i,n,s,r){const o=qi("Line");return hr(),rc(o,{data:s.data,options:s.options},null,8,["data","options"])}const kR=Er(OR,[["render",DR]]);es.register(or,ar,zs,lh,ch,ah);const FR={name:"App",components:{Bar:tm},data(){return{data:{labels:Bo.data.map(e=>e.Name),datasets:[{data:Bo.data.map(e=>e.eu),backgroundColor:"#496CAD"}]},options:{responsive:!0,indexAxis:"y",plugins:{legend:{display:!1},title:{display:!0,text:"Species income by port 2023"}},scales:{x:{title:{text:"Euros ()",display:!0}}},maintainAspectRatio:!1}}}};function NR(e,t,i,n,s,r){const o=qi("Bar");return hr(),rc(o,{data:s.data,options:s.options},null,8,["data","options"])}const zR=Er(FR,[["render",NR]]),BR={name:"AppMap",components:{MapComponent:pE,LandingsPortChartComponent:LR,LandingsYearlyChartComponent:kR,EuPortChartComponent:zR}},jR={id:"app"},WR={class:"cell cell-map"},HR={class:"cell cell-edit"},UR={class:"cell cell-edit-2"},VR={class:"cell cell-inspect"};function XR(e,t,i,n,s,r){const o=qi("MapComponent"),a=qi("LandingsPortChartComponent"),l=qi("EuPortChartComponent"),c=qi("LandingsYearlyChartComponent");return hr(),Zf("div",jR,[In("div",WR,[qt(o)]),In("div",HR,[qt(a)]),In("div",UR,[qt(l)]),In("div",VR,[qt(c)])])}const GR=Er(BR,[["render",XR]]),YR=C0(GR);YR.mount("#app");
